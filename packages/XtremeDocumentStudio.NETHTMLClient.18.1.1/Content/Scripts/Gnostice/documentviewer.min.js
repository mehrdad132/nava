!function (e) { function t(e) { return typeof e !== "undefined" } function n(t, n, r) { var i = function () { }; i.prototype = n.prototype; t.prototype = new i; t.prototype.constructor = t; n.prototype.constructor = n; t._super = n.prototype; if (r) { e.extend(t.prototype, r) } } function s(e, n) { var s; if (typeof e === "string") { n = e; e = document } for (var o = 0; o < r.length; ++o) { n = n.replace(r[o][0], r[o][1]); for (var u = 0; u < i.length; ++u) { s = i[u]; s += u === 0 ? n : n.charAt(0).toUpperCase() + n.substr(1); if (t(e[s])) { return e[s] } } } return void 0 } var r = [["", ""], ["exit", "cancel"], ["screen", "Screen"]]; var i = ["", "o", "ms", "moz", "webkit", "webkitCurrent"]; var o = navigator.userAgent; var u = s("fullscreenEnabled"); var a = o.indexOf("Android") !== -1 && o.indexOf("Chrome") !== -1; var f = !a && t(s("fullscreenElement")) && (!t(u) || u === true); var l = e.fn.jquery.split("."); var c = parseInt(l[0]) < 2 && parseInt(l[1]) < 7; var h = function () { this.__options = null; this._fullScreenElement = null; this.__savedStyles = {} }; h.prototype = { "native": s, _DEFAULT_OPTIONS: { styles: { boxSizing: "border-box", MozBoxSizing: "border-box", WebkitBoxSizing: "border-box" }, toggleClass: null }, __documentOverflow: "", __htmlOverflow: "", _preventDocumentScroll: function () { this.__documentOverflow = document.body.style.overflow; this.__htmlOverflow = document.documentElement.style.overflow; if (!e(this._fullScreenElement).is("body, html")) { e("body, html").css("overflow", "hidden") } }, _allowDocumentScroll: function () { document.body.style.overflow = this.__documentOverflow; document.documentElement.style.overflow = this.__htmlOverflow }, _fullScreenChange: function () { if (!this.__options) { return } if (!this.isFullScreen()) { this._allowDocumentScroll(); this._revertStyles(); this._triggerEvents(); this._fullScreenElement = null } else { this._preventDocumentScroll(); this._triggerEvents() } }, _fullScreenError: function (t) { if (!this.__options) { return } this._revertStyles(); this._fullScreenElement = null; if (t) { e(document).trigger("fscreenerror", [t]) } }, _triggerEvents: function () { e(this._fullScreenElement).trigger(this.isFullScreen() ? "fscreenopen" : "fscreenclose"); e(document).trigger("fscreenchange", [this.isFullScreen(), this._fullScreenElement]) }, _saveAndApplyStyles: function () { var t = e(this._fullScreenElement); this.__savedStyles = {}; for (var n in this.__options.styles) { this.__savedStyles[n] = this._fullScreenElement.style[n]; this._fullScreenElement.style[n] = this.__options.styles[n] } if (t.is("body")) { document.documentElement.style.overflow = this.__options.styles.overflow } if (this.__options.toggleClass) { t.addClass(this.__options.toggleClass) } }, _revertStyles: function () { var t = e(this._fullScreenElement); for (var n in this.__options.styles) { this._fullScreenElement.style[n] = this.__savedStyles[n] } if (t.is("body")) { document.documentElement.style.overflow = this.__savedStyles.overflow } if (this.__options.toggleClass) { t.removeClass(this.__options.toggleClass) } }, open: function (t, n) { if (t === this._fullScreenElement) { return } if (this.isFullScreen()) { this.exit() } this._fullScreenElement = t; this.__options = e.extend(true, {}, this._DEFAULT_OPTIONS, n); this._saveAndApplyStyles() }, exit: null, isFullScreen: null, isNativelySupported: function () { return f } }; var p = function () { p._super.constructor.apply(this, arguments); this.exit = e.proxy(s("exitFullscreen"), document); this._DEFAULT_OPTIONS = e.extend(true, {}, this._DEFAULT_OPTIONS, { styles: { width: "100%", height: "100%" } }); e(document).bind(this._prefixedString("fullscreenchange") + " MSFullscreenChange", e.proxy(this._fullScreenChange, this)).bind(this._prefixedString("fullscreenerror") + " MSFullscreenError", e.proxy(this._fullScreenError, this)) }; n(p, h, { VENDOR_PREFIXES: ["", "o", "moz", "webkit"], _prefixedString: function (t) { return e.map(this.VENDOR_PREFIXES, function (e) { return e + t }).join(" ") }, open: function (e, t) { p._super.open.apply(this, arguments); var n = s(e, "requestFullscreen"); n.call(e) }, exit: e.noop, isFullScreen: function () { return s("fullscreenElement") !== null }, element: function () { return s("fullscreenElement") } }); var d = function () { d._super.constructor.apply(this, arguments); this._DEFAULT_OPTIONS = e.extend({}, this._DEFAULT_OPTIONS, { styles: { position: "absolute", zIndex: "2147483647", left: 0, top: 0, bottom: 0, right: 0 } }); this.__delegateKeydownHandler() }; n(d, h, { __isFullScreen: false, __delegateKeydownHandler: function () { var t = e(document); t.delegate("*", "keydown.fullscreen", e.proxy(this.__keydownHandler, this)); var n = c ? t.data("events") : e._data(document).events; var r = n["keydown"]; if (!c) { r.splice(0, 0, r.splice(r.delegateCount - 1, 1)[0]) } else { n.live.unshift(n.live.pop()) } }, __keydownHandler: function (e) { if (this.isFullScreen() && e.which === 27) { this.exit(); return false } return true }, _revertStyles: function () { d._super._revertStyles.apply(this, arguments); this._fullScreenElement.offsetHeight }, open: function (e) { d._super.open.apply(this, arguments); this.__isFullScreen = true; this._fullScreenChange() }, exit: function () { if (!this.__isFullScreen) { return } this.__isFullScreen = false; this._fullScreenChange() }, isFullScreen: function () { return this.__isFullScreen }, element: function () { return this.__isFullScreen ? this._fullScreenElement : null } }); e.fullscreen = f ? new p : new d; e.fn.fullscreen = function (t) { var n = this[0]; t = e.extend({ toggleClass: null, overflow: "hidden" }, t); t.styles = { overflow: t.overflow }; delete t.overflow; if (n) { e.fullscreen.open(n, t) } return this } }(jQuery);




/**
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler ○ gmail • com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 2.1.3
 */
; (function (f) { "use strict"; "function" === typeof define && define.amd ? define(["jquery"], f) : "undefined" !== typeof module && module.exports ? module.exports = f(require("jquery")) : f(jQuery) })(function ($) { "use strict"; function n(a) { return !a.nodeName || -1 !== $.inArray(a.nodeName.toLowerCase(), ["iframe", "#document", "html", "body"]) } function h(a) { return $.isFunction(a) || $.isPlainObject(a) ? a : { top: a, left: a } } var p = $.scrollTo = function (a, d, b) { return $(window).scrollTo(a, d, b) }; p.defaults = { axis: "xy", duration: 0, limit: !0 }; $.fn.scrollTo = function (a, d, b) { "object" === typeof d && (b = d, d = 0); "function" === typeof b && (b = { onAfter: b }); "max" === a && (a = 9E9); b = $.extend({}, p.defaults, b); d = d || b.duration; var u = b.queue && 1 < b.axis.length; u && (d /= 2); b.offset = h(b.offset); b.over = h(b.over); return this.each(function () { function k(a) { var k = $.extend({}, b, { queue: !0, duration: d, complete: a && function () { a.call(q, e, b) } }); r.animate(f, k) } if (null !== a) { var l = n(this), q = l ? this.contentWindow || window : this, r = $(q), e = a, f = {}, t; switch (typeof e) { case "number": case "string": if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)) { e = h(e); break } e = l ? $(e) : $(e, q); case "object": if (e.length === 0) return; if (e.is || e.style) t = (e = $(e)).offset() } var v = $.isFunction(b.offset) && b.offset(q, e) || b.offset; $.each(b.axis.split(""), function (a, c) { var d = "x" === c ? "Left" : "Top", m = d.toLowerCase(), g = "scroll" + d, h = r[g](), n = p.max(q, c); t ? (f[g] = t[m] + (l ? 0 : h - r.offset()[m]), b.margin && (f[g] -= parseInt(e.css("margin" + d), 10) || 0, f[g] -= parseInt(e.css("border" + d + "Width"), 10) || 0), f[g] += v[m] || 0, b.over[m] && (f[g] += e["x" === c ? "width" : "height"]() * b.over[m])) : (d = e[m], f[g] = d.slice && "%" === d.slice(-1) ? parseFloat(d) / 100 * n : d); b.limit && /^\d+$/.test(f[g]) && (f[g] = 0 >= f[g] ? 0 : Math.min(f[g], n)); !a && 1 < b.axis.length && (h === f[g] ? f = {} : u && (k(b.onAfterFirst), f = {})) }); k(b.onAfter) } }) }; p.max = function (a, d) { var b = "x" === d ? "Width" : "Height", h = "scroll" + b; if (!n(a)) return a[h] - $(a)[b.toLowerCase()](); var b = "client" + b, k = a.ownerDocument || a.document, l = k.documentElement, k = k.body; return Math.max(l[h], k[h]) - Math.min(l[b], k[b]) }; $.Tween.propHooks.scrollLeft = $.Tween.propHooks.scrollTop = { get: function (a) { return $(a.elem)[a.prop]() }, set: function (a) { var d = this.get(a); if (a.options.interrupt && a._last && a._last !== d) return $(a.elem).stop(); var b = Math.round(a.now); d !== b && ($(a.elem)[a.prop](b), a._last = this.get(a)) } }; return p });

/*IE 9 : Added Support for callback functions of JavaScript timers*/

/*\
|*|
|*|  Polyfill which enables the passage of arbitrary arguments to the
|*|  callback functions of JavaScript timers (HTML5 standard syntax).
|*|
|*|  https://developer.mozilla.org/en-US/docs/DOM/window.setInterval
|*|
|*|  Syntax:
|*|  var timeoutID = window.setTimeout(func, delay[, param1, param2, ...]);
|*|  var timeoutID = window.setTimeout(code, delay);
|*|  var intervalID = window.setInterval(func, delay[, param1, param2, ...]);
|*|  var intervalID = window.setInterval(code, delay);
|*|
\*/
/*!
* screenfull
* v3.0.0
*/


(function () {
    setTimeout(function (arg1) {
        if (arg1 === 'test') {
            // feature test is passed, no need for polyfill
            return;
        }
        var __nativeST__ = window.setTimeout;
        window.setTimeout = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
            var aArgs = Array.prototype.slice.call(arguments, 2);
            return __nativeST__(vCallback instanceof Function ? function () {
                vCallback.apply(null, aArgs);
            } : vCallback, nDelay);
        };
    }, 0, 'test');

    var interval = setInterval(function (arg1) {
        clearInterval(interval);
        if (arg1 === 'test') {
            // feature test is passed, no need for polyfill
            return;
        }
        var __nativeSI__ = window.setInterval;
        window.setInterval = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
            var aArgs = Array.prototype.slice.call(arguments, 2);
            return __nativeSI__(vCallback instanceof Function ? function () {
                vCallback.apply(null, aArgs);
            } : vCallback, nDelay);
        };
    }, 0, 'test');
}());

/*End of setTimeout support in IE 9.*/
!function () { "use strict"; var a = "undefined" != typeof module && module.exports, b = "undefined" != typeof Element && "ALLOW_KEYBOARD_INPUT" in Element, c = function () { for (var a, b, c = [["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror"], ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror"], ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror"], ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror"], ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError"]], d = 0, e = c.length, f = {}; e > d; d++) if (a = c[d], a && a[1] in document) { for (d = 0, b = a.length; b > d; d++) f[c[0][d]] = a[d]; return f } return !1 }(), d = { request: function (a) { var d = c.requestFullscreen; a = a || document.documentElement, /5\.1[\.\d]* Safari/.test(navigator.userAgent) ? a[d]() : a[d](b && Element.ALLOW_KEYBOARD_INPUT) }, exit: function () { document[c.exitFullscreen]() }, toggle: function (a) { this.isFullscreen ? this.exit() : this.request(a) }, raw: c }; return c ? (Object.defineProperties(d, { isFullscreen: { get: function () { return Boolean(document[c.fullscreenElement]) } }, element: { enumerable: !0, get: function () { return document[c.fullscreenElement] } }, enabled: { enumerable: !0, get: function () { return Boolean(document[c.fullscreenEnabled]) } } }), void (a ? module.exports = d : window.screenfull = d)) : void (a ? module.exports = !1 : window.screenfull = !1) }();

/*Splitter added*/
!function (t, i) { var e = 0, n = null, r = [], o = null; t.fn.split = function (s) { function l(t) { if ("number" == typeof t) return t; if ("string" == typeof t) { var i = t.match(/^([0-9\.]+)(px|%)$/); if (i) { if ("px" == i[2]) return +i[1]; if ("vertical" == u.orientation) return c * +i[1] / 100; if ("horizontal" == u.orientation) return f * +i[1] / 100 } } } var a = this.data("splitter"); if (a) return a; var h, p, u = t.extend({ limit: 100, orientation: "horizontal", position: "50%", invisible: !1, onDragStart: t.noop, onDragEnd: t.noop, onDrag: t.noop }, s || {}); this.settings = u; var d, g = this.children(); "vertical" == u.orientation ? (h = g.first().addClass("left_panel"), p = h.next().addClass("right_panel"), d = "vsplitter") : "horizontal" == u.orientation && (h = g.first().addClass("top_panel"), p = h.next().addClass("bottom_panel"), d = "hsplitter"), u.invisible && (d += " splitter-invisible"); var c = this.width(), f = this.height(), v = e++; this.addClass("splitter_panel"); var m, b = t("<div/>").addClass(d).bind("mouseenter touchstart", function () { n = v }).bind("mouseleave touchend", function () { n = null }).insertAfter(h), z = t.extend(this, { refresh: function () { var t = this.width(), i = this.height(); (c != t || f != i) && (c = this.width(), f = this.height(), z.position(m)) }, position: function () { return "vertical" == u.orientation ? function (t, e) { if (t === i) return m; m = l(t); var n, r = b.width(), o = r / 2; return u.invisible ? (n = h.width(m).outerWidth(), p.width(z.width() - n), b.css("left", n - o)) : (n = h.width(m - o).outerWidth(), p.width(z.width() - n - r), b.css("left", n)), h.find(".splitter_panel").eq(0).height(z.height()), p.find(".splitter_panel").eq(0).height(z.height()), u.onDragEnd(null), e || (z.trigger("splitter.resize"), z.find(".splitter_panel").trigger("splitter.resize")), z } : "horizontal" == u.orientation ? function (t, e) { if (t === i) return m; m = l(t); var n, r = b.height(), o = r / 2; return u.invisible ? (n = h.height(m).outerHeight(), p.height(z.height() - n), b.css("top", n - o)) : (n = h.height(m - o).outerHeight(), p.height(z.height() - n - r), b.css("top", n)), u.onDragEnd(null), e || (z.trigger("splitter.resize"), z.find(".splitter_panel").trigger("splitter.resize")), z } : t.noop }(), orientation: u.orientation, limit: u.limit, isActive: function () { return n === v }, destroy: function () { z.removeClass("splitter_panel"), b.unbind("mouseenter"), b.unbind("mouseleave"), b.unbind("touchstart"), b.unbind("touchmove"), b.unbind("touchend"), b.unbind("touchleave"), b.unbind("touchcancel"), "vertical" == u.orientation ? (h.removeClass("left_panel"), p.removeClass("right_panel")) : "horizontal" == u.orientation && (h.removeClass("top_panel"), p.removeClass("bottom_panel")), z.unbind("splitter.resize"), z.trigger("splitter.resize"), z.find(".splitter_panel").trigger("splitter.resize"), r[v] = null, e--, b.remove(), z.removeData("splitter"); for (var i = !1, n = r.length; n--;) if (null !== r[n]) { i = !0; break } i || (t(document.documentElement).unbind(".splitter"), t(window).unbind("resize.splitter"), r = [], e = 0) } }); z.bind("splitter.resize", function (t) { var i = z.position(); "vertical" == z.orientation && i > z.width() ? i = z.width() - z.limit - 1 : "horizontal" == z.orientation && i > z.height() && (i = z.height() - z.limit - 1), i < z.limit && (i = z.limit + 1), t.stopPropagation(), z.position(i, !0) }); var w; "vertical" == u.orientation ? w = w > c - u.limit ? c - u.limit : l(u.position) : "horizontal" == u.orientation && (w = w > f - u.limit ? f - u.limit : l(u.position)), w < u.limit && (w = u.limit), z.position(w, !0); var _ = this.closest(".splitter_panel"); return _.length && this.height(_.height()), 0 === r.filter(Boolean).length && (t(window).bind("resize.splitter", function () { t.each(r, function (t, i) { i && i.refresh() }) }), t(document.documentElement).on("mousedown.splitter touchstart.splitter", function (i) { null !== n && (i.preventDefault(), o = r[n], setTimeout(function () { t('<div class="splitterMask"></div>').css("cursor", o.children().eq(1).css("cursor")).insertAfter(o) }), o.settings.onDragStart(i)) }).bind("mouseup.splitter touchend.splitter touchleave.splitter touchcancel.splitter", function (i) { o && (setTimeout(function () { t(".splitterMask").remove() }), o.settings.onDragEnd(i), o = null) }).bind("mousemove.splitter touchmove.splitter", function (t) { if (null !== o) { var i = o.limit, e = o.offset(); if ("vertical" == o.orientation) { var n = t.pageX; t.originalEvent && t.originalEvent.changedTouches && (n = t.originalEvent.changedTouches[0].pageX); var r = n - e.left; r <= o.limit ? r = o.limit + 1 : r >= o.width() - i && (r = o.width() - i - 1), r > o.limit && r < o.width() - i && (o.position(r, !0), o.trigger("splitter.resize"), o.find(".splitter_panel").trigger("splitter.resize")) } else if ("horizontal" == o.orientation) { var s = t.pageY; t.originalEvent && t.originalEvent.changedTouches && (s = t.originalEvent.changedTouches[0].pageY); var l = s - e.top; l <= o.limit ? l = o.limit + 1 : l >= o.height() - i && (l = o.height() - i - 1), l > o.limit && l < o.height() - i && (o.position(l, !0), o.trigger("splitter.resize"), o.find(".splitter_panel").trigger("splitter.resize")) } o.settings.onDrag(t) } })), r[v] = z, z.data("splitter", z), z } }(jQuery);

/*Jquery Tree*/
!function e(t, n, o) { function r(s, l) { if (!n[s]) { if (!t[s]) { var d = "function" == typeof require && require; if (!l && d) return d(s, !0); if (i) return i(s, !0); var a = new Error("Cannot find module '" + s + "'"); throw a.code = "MODULE_NOT_FOUND", a } var u = n[s] = { exports: {} }; t[s][0].call(u.exports, function (e) { var n = t[s][1][e]; return r(n ? n : e) }, u, u.exports, e, t, n, o) } return n[s].exports } for (var i = "function" == typeof require && require, s = 0; s < o.length; s++) r(o[s]); return r }({
    1: [function (e, t, n) { var o, r, i, s, l, d, a, u, h = function (e, t) { function n() { this.constructor = e } for (var o in t) p.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, p = {}.hasOwnProperty; a = e("./node"), u = e("./util"), l = a.Position, o = jQuery, r = function () { function e(e) { this.tree_widget = e, this.hovered_area = null, this.$ghost = null, this.hit_areas = [], this.is_dragging = !1, this.current_item = null } return e.prototype.mouseCapture = function (e) { var t, n; return t = o(e.target), this.mustCaptureElement(t) ? this.tree_widget.options.onIsMoveHandle && !this.tree_widget.options.onIsMoveHandle(t) ? null : (n = this.tree_widget._getNodeElement(t), n && this.tree_widget.options.onCanMove && (this.tree_widget.options.onCanMove(n.node) || (n = null)), this.current_item = n, null !== this.current_item) : null }, e.prototype.mouseStart = function (e) { var t, n, r; return this.refresh(), r = o(e.target).offset(), t = this.current_item.node, n = this.tree_widget.options.autoEscape ? u.html_escape(t.name) : t.name, this.drag_element = new i(n, e.page_x - r.left, e.page_y - r.top, this.tree_widget.element), this.is_dragging = !0, this.current_item.$element.addClass("jqtree-moving"), !0 }, e.prototype.mouseDrag = function (e) { var t, n; return this.drag_element.move(e.page_x, e.page_y), t = this.findHoveredArea(e.page_x, e.page_y), n = this.canMoveToArea(t), n && t ? (t.node.isFolder() || this.stopOpenFolderTimer(), this.hovered_area !== t && (this.hovered_area = t, this.mustOpenFolderTimer(t) ? this.startOpenFolderTimer(t.node) : this.stopOpenFolderTimer(), this.updateDropHint())) : (this.removeHover(), this.removeDropHint(), this.stopOpenFolderTimer()), t || null != this.tree_widget.options.onDragMove && this.tree_widget.options.onDragMove(this.current_item.node, e.original_event), !0 }, e.prototype.mustCaptureElement = function (e) { return !e.is("input,select,textarea") }, e.prototype.canMoveToArea = function (e) { var t; return e ? this.tree_widget.options.onCanMoveTo ? (t = l.getName(e.position), this.tree_widget.options.onCanMoveTo(this.current_item.node, e.node, t)) : !0 : !1 }, e.prototype.mouseStop = function (e) { var t; return this.moveItem(e), this.clear(), this.removeHover(), this.removeDropHint(), this.removeHitAreas(), t = this.current_item, this.current_item && (this.current_item.$element.removeClass("jqtree-moving"), this.current_item = null), this.is_dragging = !1, !this.hovered_area && t && null != this.tree_widget.options.onDragStop && this.tree_widget.options.onDragStop(t.node, e.original_event), !1 }, e.prototype.refresh = function () { return this.removeHitAreas(), this.current_item && (this.generateHitAreas(), this.current_item = this.tree_widget._getNodeElementForNode(this.current_item.node), this.is_dragging) ? this.current_item.$element.addClass("jqtree-moving") : void 0 }, e.prototype.removeHitAreas = function () { return this.hit_areas = [] }, e.prototype.clear = function () { return this.drag_element.remove(), this.drag_element = null }, e.prototype.removeDropHint = function () { return this.previous_ghost ? this.previous_ghost.remove() : void 0 }, e.prototype.removeHover = function () { return this.hovered_area = null }, e.prototype.generateHitAreas = function () { var e; return e = new s(this.tree_widget.tree, this.current_item.node, this.getTreeDimensions().bottom), this.hit_areas = e.generate() }, e.prototype.findHoveredArea = function (e, t) { var n, o, r, i, s; if (o = this.getTreeDimensions(), e < o.left || t < o.top || e > o.right || t > o.bottom) return null; for (i = 0, r = this.hit_areas.length; r > i;) if (s = i + r >> 1, n = this.hit_areas[s], t < n.top) r = s; else { if (!(t > n.bottom)) return n; i = s + 1 } return null }, e.prototype.mustOpenFolderTimer = function (e) { var t; return t = e.node, t.isFolder() && !t.is_open && e.position === l.INSIDE }, e.prototype.updateDropHint = function () { var e; if (this.hovered_area) return this.removeDropHint(), e = this.tree_widget._getNodeElementForNode(this.hovered_area.node), this.previous_ghost = e.addDropHint(this.hovered_area.position) }, e.prototype.startOpenFolderTimer = function (e) { var t; return t = function (t) { return function () { return t.tree_widget._openNode(e, t.tree_widget.options.slide, function () { return t.refresh(), t.updateDropHint() }) } }(this), this.stopOpenFolderTimer(), this.open_folder_timer = setTimeout(t, this.tree_widget.options.openFolderDelay) }, e.prototype.stopOpenFolderTimer = function () { return this.open_folder_timer ? (clearTimeout(this.open_folder_timer), this.open_folder_timer = null) : void 0 }, e.prototype.moveItem = function (e) { var t, n, o, r, i, s; return this.hovered_area && this.hovered_area.position !== l.NONE && this.canMoveToArea(this.hovered_area) && (o = this.current_item.node, s = this.hovered_area.node, r = this.hovered_area.position, i = o.parent, r === l.INSIDE && (this.hovered_area.node.is_open = !0), t = function (e) { return function () { return e.tree_widget.tree.moveNode(o, s, r), e.tree_widget.element.empty(), e.tree_widget._refreshElements() } }(this), n = this.tree_widget._triggerEvent("tree.move", { move_info: { moved_node: o, target_node: s, position: l.getName(r), previous_parent: i, do_move: t, original_event: e.original_event } }), !n.isDefaultPrevented()) ? t() : void 0 }, e.prototype.getTreeDimensions = function () { var e; return e = this.tree_widget.element.offset(), { left: e.left, top: e.top, right: e.left + this.tree_widget.element.width(), bottom: e.top + this.tree_widget.element.height() + 16 } }, e }(), d = function () { function e(e) { this.tree = e } return e.prototype.iterate = function () { var e, t; return t = !0, (e = function (n) { return function (r, i) { var s, l, d, a, u, h, p, c; if (p = (r.is_open || !r.element) && r.hasChildren(), r.element) { if (s = o(r.element), !s.is(":visible")) return; t && (n.handleFirstNode(r, s), t = !1), r.hasChildren() ? r.is_open ? n.handleOpenFolder(r, s) || (p = !1) : n.handleClosedFolder(r, i, s) : n.handleNode(r, i, s) } if (p) { for (d = r.children.length, c = r.children, a = u = 0, h = c.length; h > u; a = ++u) l = c[a], a === d - 1 ? e(r.children[a], null) : e(r.children[a], r.children[a + 1]); if (r.is_open) return n.handleAfterOpenFolder(r, i, s) } } }(this))(this.tree, null) }, e.prototype.handleNode = function (e, t, n) { }, e.prototype.handleOpenFolder = function (e, t) { }, e.prototype.handleClosedFolder = function (e, t, n) { }, e.prototype.handleAfterOpenFolder = function (e, t, n) { }, e.prototype.handleFirstNode = function (e, t) { }, e }(), s = function (e) { function t(e, n, o) { t.__super__.constructor.call(this, e), this.current_node = n, this.tree_bottom = o } return h(t, e), t.prototype.generate = function () { return this.positions = [], this.last_top = 0, this.iterate(), this.generateHitAreas(this.positions) }, t.prototype.getTop = function (e) { return e.offset().top }, t.prototype.addPosition = function (e, t, n) { var o; return o = { top: n, node: e, position: t }, this.positions.push(o), this.last_top = n }, t.prototype.handleNode = function (e, t, n) { var o; return o = this.getTop(n), e === this.current_node ? this.addPosition(e, l.NONE, o) : this.addPosition(e, l.INSIDE, o), t === this.current_node || e === this.current_node ? this.addPosition(e, l.NONE, o) : this.addPosition(e, l.AFTER, o) }, t.prototype.handleOpenFolder = function (e, t) { return e === this.current_node ? !1 : (e.children[0] !== this.current_node && this.addPosition(e, l.INSIDE, this.getTop(t)), !0) }, t.prototype.handleClosedFolder = function (e, t, n) { var o; return o = this.getTop(n), e === this.current_node ? this.addPosition(e, l.NONE, o) : (this.addPosition(e, l.INSIDE, o), t !== this.current_node ? this.addPosition(e, l.AFTER, o) : void 0) }, t.prototype.handleFirstNode = function (e, t) { return e !== this.current_node ? this.addPosition(e, l.BEFORE, this.getTop(o(e.element))) : void 0 }, t.prototype.handleAfterOpenFolder = function (e, t, n) { return e === this.current_node.node || t === this.current_node.node ? this.addPosition(e, l.NONE, this.last_top) : this.addPosition(e, l.AFTER, this.last_top) }, t.prototype.generateHitAreas = function (e) { var t, n, o, r, i, s; for (s = -1, t = [], n = [], o = 0, r = e.length; r > o; o++) i = e[o], i.top !== s && t.length && (t.length && this.generateHitAreasForGroup(n, t, s, i.top), s = i.top, t = []), t.push(i); return this.generateHitAreasForGroup(n, t, s, this.tree_bottom), n }, t.prototype.generateHitAreasForGroup = function (e, t, n, o) { var r, i, s, l, d; for (d = Math.min(t.length, 4), r = Math.round((o - n) / d), i = n, s = 0; d > s;) l = t[s], e.push({ top: i, bottom: i + r, node: l.node, position: l.position }), i += r, s += 1; return null }, t }(d), i = function () { function e(e, t, n, r) { this.offset_x = t, this.offset_y = n, this.$element = o('<span class="jqtree-title jqtree-dragging">' + e + "</span>"), this.$element.css("position", "absolute"), r.append(this.$element) } return e.prototype.move = function (e, t) { return this.$element.offset({ left: e - this.offset_x, top: t - this.offset_y }) }, e.prototype.remove = function () { return this.$element.remove() }, e }(), t.exports = { DragAndDropHandler: r, DragElement: i, HitAreasGenerator: s } }, { "./node": 5, "./util": 12 }], 2: [function (e, t, n) { var o, r, i, s, l, d; l = e("./node_element"), i = l.NodeElement, d = e("./util"), s = d.html_escape, o = jQuery, r = function () { function e(e) { this.tree_widget = e, this.opened_icon_element = this.createButtonElement(e.options.openedIcon), this.closed_icon_element = this.createButtonElement(e.options.closedIcon) } return e.prototype.render = function (e) { return e && e.parent ? this.renderFromNode(e) : this.renderFromRoot() }, e.prototype.renderFromRoot = function () { var e; return e = this.tree_widget.element, e.empty(), this.createDomElements(e[0], this.tree_widget.tree.children, !0, !0, 1) }, e.prototype.renderFromNode = function (e) { var t, n; return t = o(e.element), n = this.createLi(e, e.getLevel()), this.attachNodeData(e, n), t.after(n), t.remove(), e.children ? this.createDomElements(n, e.children, !1, !1, e.getLevel() + 1) : void 0 }, e.prototype.createDomElements = function (e, t, n, o, r) { var i, s, l, d, a; for (a = this.createUl(n), e.appendChild(a), s = 0, l = t.length; l > s; s++) i = t[s], d = this.createLi(i, r), a.appendChild(d), this.attachNodeData(i, d), i.hasChildren() && this.createDomElements(d, i.children, !1, i.is_open, r + 1); return null }, e.prototype.attachNodeData = function (e, t) { return e.element = t, o(t).data("node", e) }, e.prototype.createUl = function (e) { var t, n, o; return e ? (t = "jqtree-tree", n = "tree", this.tree_widget.options.rtl && (t += " jqtree-rtl")) : (t = "", n = "group"), o = document.createElement("ul"), o.className = "jqtree_common " + t, o.setAttribute("role", n), o }, e.prototype.createLi = function (e, t) { var n, r; return n = this.tree_widget.select_node_handler && this.tree_widget.select_node_handler.isNodeSelected(e), r = e.isFolder() ? this.createFolderLi(e, t, n) : this.createNodeLi(e, t, n), this.tree_widget.options.onCreateLi && this.tree_widget.options.onCreateLi(e, o(r)), r }, e.prototype.createFolderLi = function (e, t, n) { var o, r, i, s, l, d, a; return o = this.getButtonClasses(e), s = this.getFolderClasses(e, n), l = e.is_open ? this.opened_icon_element : this.closed_icon_element, a = document.createElement("li"), a.className = "jqtree_common " + s, a.setAttribute("role", "presentation"), i = document.createElement("div"), i.className = "jqtree-element jqtree_common", i.setAttribute("role", "presentation"), a.appendChild(i), r = document.createElement("a"), r.className = o, r.appendChild(l.cloneNode(!1)), r.setAttribute("role", "presentation"), r.setAttribute("aria-hidden", "true"), this.tree_widget.options.buttonLeft && i.appendChild(r), i.appendChild(this.createTitleSpan(e.name, t, n, e.is_open, d = !0)), this.tree_widget.options.buttonLeft || i.appendChild(r), a }, e.prototype.createNodeLi = function (e, t, n) { var o, r, i, s, l; return l = ["jqtree_common"], n && l.push("jqtree-selected"), o = l.join(" "), s = document.createElement("li"), s.className = o, s.setAttribute("role", "presentation"), r = document.createElement("div"), r.className = "jqtree-element jqtree_common", r.setAttribute("role", "presentation"), s.appendChild(r), r.appendChild(this.createTitleSpan(e.name, t, n, e.is_open, i = !1)), s }, e.prototype.createTitleSpan = function (e, t, n, o, r) { var i, s; return s = document.createElement("span"), i = "jqtree-title jqtree_common", r && (i += " jqtree-title-folder"), s.className = i, s.setAttribute("role", "treeitem"), s.setAttribute("aria-level", t), s.setAttribute("aria-selected", d.getBoolString(n)), s.setAttribute("aria-expanded", d.getBoolString(o)), n && s.setAttribute("tabindex", 0), s.innerHTML = this.escapeIfNecessary(e), s }, e.prototype.getButtonClasses = function (e) { var t; return t = ["jqtree-toggler", "jqtree_common"], e.is_open || t.push("jqtree-closed"), this.tree_widget.options.buttonLeft ? t.push("jqtree-toggler-left") : t.push("jqtree-toggler-right"), t.join(" ") }, e.prototype.getFolderClasses = function (e, t) { var n; return n = ["jqtree-folder"], e.is_open || n.push("jqtree-closed"), t && n.push("jqtree-selected"), e.is_loading && n.push("jqtree-loading"), n.join(" ") }, e.prototype.escapeIfNecessary = function (e) { return this.tree_widget.options.autoEscape ? s(e) : e }, e.prototype.createButtonElement = function (e) { var t; return "string" == typeof e ? (t = document.createElement("div"), t.innerHTML = e, document.createTextNode(t.innerHTML)) : o(e)[0] }, e }(), t.exports = r }, { "./node_element": 6, "./util": 12 }], 3: [function (e, t, n) { var o, r, i = function (e, t) { return function () { return e.apply(t, arguments) } }; o = jQuery, r = function () { function e(e) { this.selectNode = i(this.selectNode, this), this.tree_widget = e, e.options.keyboardSupport && o(document).bind("keydown.jqtree", o.proxy(this.handleKeyDown, this)) } var t, n, r, s; return n = 37, s = 38, r = 39, t = 40, e.prototype.deinit = function () { return o(document).unbind("keydown.jqtree") }, e.prototype.moveDown = function () { var e; return e = this.tree_widget.getSelectedNode(), e ? this.selectNode(e.getNextNode()) : !1 }, e.prototype.moveUp = function () { var e; return e = this.tree_widget.getSelectedNode(), e ? this.selectNode(e.getPreviousNode()) : !1 }, e.prototype.moveRight = function () { var e; return e = this.tree_widget.getSelectedNode(), e && e.isFolder() ? e.is_open ? this.selectNode(e.getNextNode()) : (this.tree_widget.openNode(e), !1) : !0 }, e.prototype.moveLeft = function () { var e; return e = this.tree_widget.getSelectedNode(), e ? e.isFolder() && e.is_open ? (this.tree_widget.closeNode(e), !1) : this.selectNode(e.getParent()) : !0 }, e.prototype.handleKeyDown = function (e) { var i; if (!this.tree_widget.options.keyboardSupport) return !0; if (o(document.activeElement).is("textarea,input,select")) return !0; if (!this.tree_widget.getSelectedNode()) return !0; switch (i = e.which) { case t: return this.moveDown(); case s: return this.moveUp(); case r: return this.moveRight(); case n: return this.moveLeft() } return !0 }, e.prototype.selectNode = function (e) { return e ? (this.tree_widget.selectNode(e), this.tree_widget.scroll_handler && !this.tree_widget.scroll_handler.isScrolledIntoView(o(e.element).find(".jqtree-element")) && this.tree_widget.scrollToNode(e), !1) : !0 }, e }(), t.exports = r }, {}], 4: [function (e, t, n) { var o, r, i, s = function (e, t) { function n() { this.constructor = e } for (var o in t) l.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, l = {}.hasOwnProperty; i = e("./simple.widget"), o = jQuery, r = function (e) { function t() { return t.__super__.constructor.apply(this, arguments) } return s(t, e), t.is_mouse_handled = !1, t.prototype._init = function () { return this.$el.bind("mousedown.mousewidget", o.proxy(this._mouseDown, this)), this.$el.bind("touchstart.mousewidget", o.proxy(this._touchStart, this)), this.is_mouse_started = !1, this.mouse_delay = 0, this._mouse_delay_timer = null, this._is_mouse_delay_met = !0, this.mouse_down_info = null }, t.prototype._deinit = function () { var e; return this.$el.unbind("mousedown.mousewidget"), this.$el.unbind("touchstart.mousewidget"), e = o(document), e.unbind("mousemove.mousewidget"), e.unbind("mouseup.mousewidget") }, t.prototype._mouseDown = function (e) { var t; if (1 === e.which) return t = this._handleMouseDown(e, this._getPositionInfo(e)), t && e.preventDefault(), t }, t.prototype._handleMouseDown = function (e, n) { return !t.is_mouse_handled && (this.is_mouse_started && this._handleMouseUp(n), this.mouse_down_info = n, this._mouseCapture(n)) ? (this._handleStartMouse(), this.is_mouse_handled = !0, !0) : void 0 }, t.prototype._handleStartMouse = function () { var e; return e = o(document), e.bind("mousemove.mousewidget", o.proxy(this._mouseMove, this)), e.bind("touchmove.mousewidget", o.proxy(this._touchMove, this)), e.bind("mouseup.mousewidget", o.proxy(this._mouseUp, this)), e.bind("touchend.mousewidget", o.proxy(this._touchEnd, this)), this.mouse_delay ? this._startMouseDelayTimer() : void 0 }, t.prototype._startMouseDelayTimer = function () { return this._mouse_delay_timer && clearTimeout(this._mouse_delay_timer), this._mouse_delay_timer = setTimeout(function (e) { return function () { return e._is_mouse_delay_met = !0 } }(this), this.mouse_delay), this._is_mouse_delay_met = !1 }, t.prototype._mouseMove = function (e) { return this._handleMouseMove(e, this._getPositionInfo(e)) }, t.prototype._handleMouseMove = function (e, t) { return this.is_mouse_started ? (this._mouseDrag(t), e.preventDefault()) : this.mouse_delay && !this._is_mouse_delay_met ? !0 : (this.is_mouse_started = this._mouseStart(this.mouse_down_info) !== !1, this.is_mouse_started ? this._mouseDrag(t) : this._handleMouseUp(t), !this.is_mouse_started) }, t.prototype._getPositionInfo = function (e) { return { page_x: e.pageX, page_y: e.pageY, target: e.target, original_event: e } }, t.prototype._mouseUp = function (e) { return this._handleMouseUp(this._getPositionInfo(e)) }, t.prototype._handleMouseUp = function (e) { var t; t = o(document), t.unbind("mousemove.mousewidget"), t.unbind("touchmove.mousewidget"), t.unbind("mouseup.mousewidget"), t.unbind("touchend.mousewidget"), this.is_mouse_started && (this.is_mouse_started = !1, this._mouseStop(e)) }, t.prototype._mouseCapture = function (e) { return !0 }, t.prototype._mouseStart = function (e) { return null }, t.prototype._mouseDrag = function (e) { return null }, t.prototype._mouseStop = function (e) { return null }, t.prototype.setMouseDelay = function (e) { return this.mouse_delay = e }, t.prototype._touchStart = function (e) { var t; if (!(e.originalEvent.touches.length > 1)) return t = e.originalEvent.changedTouches[0], this._handleMouseDown(e, this._getPositionInfo(t)) }, t.prototype._touchMove = function (e) { var t; if (!(e.originalEvent.touches.length > 1)) return t = e.originalEvent.changedTouches[0], this._handleMouseMove(e, this._getPositionInfo(t)) }, t.prototype._touchEnd = function (e) { var t; if (!(e.originalEvent.touches.length > 1)) return t = e.originalEvent.changedTouches[0], this._handleMouseUp(this._getPositionInfo(t)) }, t }(i), t.exports = r }, { "./simple.widget": 10 }], 5: [function (e, t, n) { var o, r, i; o = jQuery, i = { getName: function (e) { return i.strings[e - 1] }, nameToIndex: function (e) { var t, n, o; for (t = n = 1, o = i.strings.length; o >= 1 ? o >= n : n >= o; t = o >= 1 ? ++n : --n) if (i.strings[t - 1] === e) return t; return 0 } }, i.BEFORE = 1, i.AFTER = 2, i.INSIDE = 3, i.NONE = 4, i.strings = ["before", "after", "inside", "none"], r = function () { function e(t, n, o) { null == n && (n = !1), null == o && (o = e), this.name = "", this.setData(t), this.children = [], this.parent = null, n && (this.id_mapping = {}, this.tree = this, this.node_class = o) } return e.prototype.setData = function (e) { var t, n, o; if (n = function (e) { return function (t) { return null !== t ? e.name = t : void 0 } }(this), "object" != typeof e) n(e); else for (t in e) o = e[t], "label" === t ? n(o) : "children" !== t && (this[t] = o); return null }, e.prototype.initFromData = function (e) { var t, n; return n = function (e) { return function (n) { return e.setData(n), n.children ? t(n.children) : void 0 } }(this), t = function (e) { return function (t) { var n, o, r, i; for (o = 0, r = t.length; r > o; o++) n = t[o], i = new e.tree.node_class(""), i.initFromData(n), e.addChild(i); return null } }(this), n(e), null }, e.prototype.loadFromData = function (e) { var t, n, o, r; for (this.removeChildren(), t = 0, n = e.length; n > t; t++) r = e[t], o = new this.tree.node_class(r), this.addChild(o), "object" == typeof r && r.children && o.loadFromData(r.children); return null }, e.prototype.addChild = function (e) { return this.children.push(e), e._setParent(this) }, e.prototype.addChildAtPosition = function (e, t) { return this.children.splice(t, 0, e), e._setParent(this) }, e.prototype._setParent = function (e) { return this.parent = e, this.tree = e.tree, this.tree.addNodeToIndex(this) }, e.prototype.removeChild = function (e) { return e.removeChildren(), this._removeChild(e) }, e.prototype._removeChild = function (e) { return this.children.splice(this.getChildIndex(e), 1), this.tree.removeNodeFromIndex(e) }, e.prototype.getChildIndex = function (e) { return o.inArray(e, this.children) }, e.prototype.hasChildren = function () { return 0 !== this.children.length }, e.prototype.isFolder = function () { return this.hasChildren() || this.load_on_demand }, e.prototype.iterate = function (e) { var t; return t = function (n, o) { var r, i, s, l, d; if (n.children) { for (l = n.children, i = 0, s = l.length; s > i; i++) r = l[i], d = e(r, o), d && r.hasChildren() && t(r, o + 1); return null } }, t(this, 0), null }, e.prototype.moveNode = function (e, t, n) { return e.isParentOf(t) ? void 0 : (e.parent._removeChild(e), n === i.AFTER ? t.parent.addChildAtPosition(e, t.parent.getChildIndex(t) + 1) : n === i.BEFORE ? t.parent.addChildAtPosition(e, t.parent.getChildIndex(t)) : n === i.INSIDE ? t.addChildAtPosition(e, 0) : void 0) }, e.prototype.getData = function (e) { var t; return null == e && (e = !1), (t = function (e) { var n, o, r, i, s, l, d; for (n = [], o = 0, i = e.length; i > o; o++) { s = e[o], l = {}; for (r in s) d = s[r], "parent" !== r && "children" !== r && "element" !== r && "tree" !== r && Object.prototype.hasOwnProperty.call(s, r) && (l[r] = d); s.hasChildren() && (l.children = t(s.children)), n.push(l) } return n })(e ? [this] : this.children) }, e.prototype.getNodeByName = function (e) { return this.getNodeByCallback(function (t) { return t.name === e }) }, e.prototype.getNodeByCallback = function (e) { var t; return t = null, this.iterate(function (n) { return e(n) ? (t = n, !1) : !0 }), t }, e.prototype.addAfter = function (e) { var t, n; return this.parent ? (n = new this.tree.node_class(e), t = this.parent.getChildIndex(this), this.parent.addChildAtPosition(n, t + 1), "object" == typeof e && e.children && e.children.length && n.loadFromData(e.children), n) : null }, e.prototype.addBefore = function (e) { var t, n; return this.parent ? (n = new this.tree.node_class(e), t = this.parent.getChildIndex(this), this.parent.addChildAtPosition(n, t), "object" == typeof e && e.children && e.children.length && n.loadFromData(e.children), n) : null }, e.prototype.addParent = function (e) { var t, n, o, r, i, s; if (this.parent) { for (r = new this.tree.node_class(e), r._setParent(this.tree), i = this.parent, s = i.children, n = 0, o = s.length; o > n; n++) t = s[n], r.addChild(t); return i.children = [], i.addChild(r), r } return null }, e.prototype.remove = function () { return this.parent ? (this.parent.removeChild(this), this.parent = null) : void 0 }, e.prototype.append = function (e) { var t; return t = new this.tree.node_class(e), this.addChild(t), "object" == typeof e && e.children && e.children.length && t.loadFromData(e.children), t }, e.prototype.prepend = function (e) { var t; return t = new this.tree.node_class(e), this.addChildAtPosition(t, 0), "object" == typeof e && e.children && e.children.length && t.loadFromData(e.children), t }, e.prototype.isParentOf = function (e) { var t; for (t = e.parent; t;) { if (t === this) return !0; t = t.parent } return !1 }, e.prototype.getLevel = function () { var e, t; for (e = 0, t = this; t.parent;) e += 1, t = t.parent; return e }, e.prototype.getNodeById = function (e) { return this.id_mapping[e] }, e.prototype.addNodeToIndex = function (e) { return null != e.id ? this.id_mapping[e.id] = e : void 0 }, e.prototype.removeNodeFromIndex = function (e) { return null != e.id ? delete this.id_mapping[e.id] : void 0 }, e.prototype.removeChildren = function () { return this.iterate(function (e) { return function (t) { return e.tree.removeNodeFromIndex(t), !0 } }(this)), this.children = [] }, e.prototype.getPreviousSibling = function () { var e; return this.parent ? (e = this.parent.getChildIndex(this) - 1, e >= 0 ? this.parent.children[e] : null) : null }, e.prototype.getNextSibling = function () { var e; return this.parent ? (e = this.parent.getChildIndex(this) + 1, e < this.parent.children.length ? this.parent.children[e] : null) : null }, e.prototype.getNodesByProperty = function (e, t) { return this.filter(function (n) { return n[e] === t }) }, e.prototype.filter = function (e) { var t; return t = [], this.iterate(function (n) { return e(n) && t.push(n), !0 }), t }, e.prototype.getNextNode = function (e) { var t; return null == e && (e = !0), e && this.hasChildren() && this.is_open ? this.children[0] : this.parent ? (t = this.getNextSibling(), t ? t : this.parent.getNextNode(!1)) : null }, e.prototype.getPreviousNode = function () { var e; return this.parent ? (e = this.getPreviousSibling(), e ? e.hasChildren() && e.is_open ? e.getLastChild() : e : this.getParent()) : null }, e.prototype.getParent = function () { return this.parent && this.parent.parent ? this.parent : null }, e.prototype.getLastChild = function () { var e; return this.hasChildren() ? (e = this.children[this.children.length - 1], e.hasChildren() && e.is_open ? e.getLastChild() : e) : null }, e }(), t.exports = { Node: r, Position: i } }, {}], 6: [function (e, t, n) { var o, r, i, s, l, d, a, u = function (e, t) { function n() { this.constructor = e } for (var o in t) h.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, h = {}.hasOwnProperty; a = e("./node"), d = a.Position, o = jQuery, l = function () { function e(e, t) { this.init(e, t) } return e.prototype.init = function (e, t) { return this.node = e, this.tree_widget = t, e.element || (e.element = this.tree_widget.element), this.$element = o(e.element) }, e.prototype.getUl = function () { return this.$element.children("ul:first") }, e.prototype.getSpan = function () { return this.$element.children(".jqtree-element").find("span.jqtree-title") }, e.prototype.getLi = function () { return this.$element }, e.prototype.addDropHint = function (e) { return e === d.INSIDE ? new r(this.$element) : new s(this.node, this.$element, e) }, e.prototype.select = function () { var e, t; return e = this.getLi(), e.addClass("jqtree-selected"), e.attr("aria-selected", "true"), t = this.getSpan(), t.attr("tabindex", 0) }, e.prototype.deselect = function () { var e, t; return e = this.getLi(), e.removeClass("jqtree-selected"), e.attr("aria-selected", "false"), t = this.getSpan(), t.attr("tabindex", -1) }, e }(), i = function (e) { function t() { return t.__super__.constructor.apply(this, arguments) } return u(t, e), t.prototype.open = function (e, t) { var n, o; return null == t && (t = !0), this.node.is_open ? void 0 : (this.node.is_open = !0, n = this.getButton(), n.removeClass("jqtree-closed"), n.html(""), n.append(this.tree_widget.renderer.opened_icon_element.cloneNode(!1)), o = function (t) { return function () { var n, o; return n = t.getLi(), n.removeClass("jqtree-closed"), o = t.getSpan(), o.attr("aria-expanded", "true"), e && e(), t.tree_widget._triggerEvent("tree.open", { node: t.node }) } }(this), t ? this.getUl().slideDown("fast", o) : (this.getUl().show(), o())) }, t.prototype.close = function (e) { var t, n; return null == e && (e = !0), this.node.is_open ? (this.node.is_open = !1, t = this.getButton(), t.addClass("jqtree-closed"), t.html(""), t.append(this.tree_widget.renderer.closed_icon_element.cloneNode(!1)), n = function (e) { return function () { var t, n; return t = e.getLi(), t.addClass("jqtree-closed"), n = e.getSpan(), n.attr("aria-expanded", "false"), e.tree_widget._triggerEvent("tree.close", { node: e.node }) } }(this), e ? this.getUl().slideUp("fast", n) : (this.getUl().hide(), n())) : void 0 }, t.prototype.getButton = function () { return this.$element.children(".jqtree-element").find("a.jqtree-toggler") }, t.prototype.addDropHint = function (e) { return this.node.is_open || e !== d.INSIDE ? new s(this.node, this.$element, e) : new r(this.$element) }, t }(l), r = function () { function e(e) { var t, n; t = e.children(".jqtree-element"), n = e.width() - 4, this.$hint = o('<span class="jqtree-border"></span>'), t.append(this.$hint), this.$hint.css({ width: n, height: t.outerHeight() - 4 }) } return e.prototype.remove = function () { return this.$hint.remove() }, e }(), s = function () { function e(e, t, n) { this.$element = t, this.node = e, this.$ghost = o('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>'), n === d.AFTER ? this.moveAfter() : n === d.BEFORE ? this.moveBefore() : n === d.INSIDE && (e.isFolder() && e.is_open ? this.moveInsideOpenFolder() : this.moveInside()) } return e.prototype.remove = function () { return this.$ghost.remove() }, e.prototype.moveAfter = function () { return this.$element.after(this.$ghost) }, e.prototype.moveBefore = function () { return this.$element.before(this.$ghost) }, e.prototype.moveInsideOpenFolder = function () { return o(this.node.children[0].element).before(this.$ghost) }, e.prototype.moveInside = function () { return this.$element.after(this.$ghost), this.$ghost.addClass("jqtree-inside") }, e }(), t.exports = { BorderDropHint: r, FolderElement: i, GhostDropHint: s, NodeElement: l } }, { "./node": 5 }], 7: [function (e, t, n) { var o, r, i, s, l; l = e("./util"), i = l.indexOf, s = l.isInt, o = jQuery, r = function () { function e(e) { this.tree_widget = e } return e.prototype.saveState = function () { var e; return e = JSON.stringify(this.getState()), this.tree_widget.options.onSetStateFromStorage ? this.tree_widget.options.onSetStateFromStorage(e) : this.supportsLocalStorage() ? localStorage.setItem(this.getCookieName(), e) : o.cookie ? (o.cookie.raw = !0, o.cookie(this.getCookieName(), e, { path: "/" })) : void 0 }, e.prototype.getStateFromStorage = function () { var e; return e = this._loadFromStorage(), e ? this._parseState(e) : null }, e.prototype._parseState = function (e) { var t; return t = o.parseJSON(e), t && t.selected_node && s(t.selected_node) && (t.selected_node = [t.selected_node]), t }, e.prototype._loadFromStorage = function () { return this.tree_widget.options.onGetStateFromStorage ? this.tree_widget.options.onGetStateFromStorage() : this.supportsLocalStorage() ? localStorage.getItem(this.getCookieName()) : o.cookie ? (o.cookie.raw = !0, o.cookie(this.getCookieName())) : null }, e.prototype.getState = function () { var e, t; return e = function (e) { return function () { var t; return t = [], e.tree_widget.tree.iterate(function (e) { return e.is_open && e.id && e.hasChildren() && t.push(e.id), !0 }), t } }(this), t = function (e) { return function () { var t; return function () { var e, n, o, r; for (o = this.tree_widget.getSelectedNodes(), r = [], e = 0, n = o.length; n > e; e++) t = o[e], r.push(t.id); return r }.call(e) } }(this), { open_nodes: e(), selected_node: t() } }, e.prototype.setInitialState = function (e) { var t; return e ? (t = this._openInitialNodes(e.open_nodes), this._selectInitialNodes(e.selected_node), t) : !1 }, e.prototype._openInitialNodes = function (e) { var t, n, o, r, i; for (o = !1, t = 0, n = e.length; n > t; t++) i = e[t], r = this.tree_widget.getNodeById(i), r && (r.load_on_demand ? o = !0 : r.is_open = !0); return o }, e.prototype._selectInitialNodes = function (e) { var t, n, o, r, i; for (i = 0, t = 0, n = e.length; n > t; t++) r = e[t], o = this.tree_widget.getNodeById(r), o && (i += 1, this.tree_widget.select_node_handler.addToSelection(o)); return 0 !== i }, e.prototype.setInitialStateOnDemand = function (e, t) { return e ? this._setInitialStateOnDemand(e.open_nodes, e.selected_node, t) : t() }, e.prototype._setInitialStateOnDemand = function (e, t, n) { var o, r, i; return r = 0, i = function (i) { return function () { var s, l, d, a, u; for (d = [], s = 0, l = e.length; l > s; s++) u = e[s], a = i.tree_widget.getNodeById(u), a ? a.is_loading || (a.load_on_demand ? o(a) : i.tree_widget._openNode(a, !1)) : d.push(u); return e = d, i._selectInitialNodes(t) && i.tree_widget._refreshElements(), 0 === r ? n() : void 0 } }(this), o = function (e) { return function (t) { return r += 1, e.tree_widget._openNode(t, !1, function () { return r -= 1, i() }) } }(this), i() }, e.prototype.getCookieName = function () { return "string" == typeof this.tree_widget.options.saveState ? this.tree_widget.options.saveState : "tree" }, e.prototype.supportsLocalStorage = function () { var e; return e = function () { var e, t; if ("undefined" == typeof localStorage || null === localStorage) return !1; try { t = "_storage_test", sessionStorage.setItem(t, !0), sessionStorage.removeItem(t) } catch (n) { return e = n, !1 } return !0 }, null == this._supportsLocalStorage && (this._supportsLocalStorage = e()), this._supportsLocalStorage }, e.prototype.getNodeIdToBeSelected = function () { var e; return e = this.getStateFromStorage(), e && e.selected_node ? e.selected_node[0] : null }, e }(), t.exports = r }, { "./util": 12 }], 8: [function (e, t, n) {
        var o, r; o = jQuery, r = function () {
            function e(e) { this.tree_widget = e, this.previous_top = -1, this.is_initialized = !1, this._initScrollParent() } return e.prototype._initScrollParent = function () { var e, t, n; return t = function (e) { return function () { var t, n, r, i, s, l; if (t = ["overflow", "overflow-y"], (r = function (e) { var n, r, i, s; for (r = 0, i = t.length; i > r; r++) if (n = t[r], "auto" === (s = o.css(e, n)) || "scroll" === s) return !0; return !1 })(e.tree_widget.$el[0])) return e.tree_widget.$el; for (l = e.tree_widget.$el.parents(), i = 0, s = l.length; s > i; i++) if (n = l[i], r(n)) return o(n); return null } }(this), n = function (e) { return function () { return e.scroll_parent_top = 0, e.$scroll_parent = null } }(this), "fixed" === this.tree_widget.$el.css("position") && n(), e = t(), e && e.length && "HTML" !== e[0].tagName ? (this.$scroll_parent = e, this.scroll_parent_top = this.$scroll_parent.offset().top) : n(), this.is_initialized = !0 }, e.prototype._ensureInit = function () { return this.is_initialized ? void 0 : this._initScrollParent() }, e.prototype.checkScrolling = function () { var e; return this._ensureInit(), e = this.tree_widget.dnd_handler.hovered_area, e && e.top !== this.previous_top ? (this.previous_top = e.top, this.$scroll_parent ? this._handleScrollingWithScrollParent(e) : this._handleScrollingWithDocument(e)) : void 0 }, e.prototype._handleScrollingWithScrollParent = function (e) {
                var t; return t = this.scroll_parent_top + this.$scroll_parent[0].offsetHeight - e.bottom, 20 > t ? (this.$scroll_parent[0].scrollTop += 20, this.tree_widget.refreshHitAreas(), this.previous_top = -1) : e.top - this.scroll_parent_top < 20 ? (this.$scroll_parent[0].scrollTop -= 20, this.tree_widget.refreshHitAreas(), this.previous_top = -1) : void 0
            }, e.prototype._handleScrollingWithDocument = function (e) { var t; return t = e.top - o(document).scrollTop(), 20 > t ? o(document).scrollTop(o(document).scrollTop() - 20) : o(window).height() - (e.bottom - o(document).scrollTop()) < 20 ? o(document).scrollTop(o(document).scrollTop() + 20) : void 0 }, e.prototype.scrollTo = function (e) { var t; return this._ensureInit(), this.$scroll_parent ? this.$scroll_parent[0].scrollTop = e : (t = this.tree_widget.$el.offset().top, o(document).scrollTop(e + t)) }, e.prototype.isScrolledIntoView = function (e) { var t, n, r, i, s; return this._ensureInit(), t = o(e), this.$scroll_parent ? (s = 0, i = this.$scroll_parent.height(), r = t.offset().top - this.scroll_parent_top, n = r + t.height()) : (s = o(window).scrollTop(), i = s + o(window).height(), r = t.offset().top, n = r + t.height()), i >= n && r >= s }, e
        }(), t.exports = r
    }, {}], 9: [function (e, t, n) { var o, r; o = jQuery, r = function () { function e(e) { this.tree_widget = e, this.clear() } return e.prototype.getSelectedNode = function () { var e; return e = this.getSelectedNodes(), e.length ? e[0] : !1 }, e.prototype.getSelectedNodes = function () { var e, t, n; if (this.selected_single_node) return [this.selected_single_node]; n = []; for (e in this.selected_nodes) t = this.tree_widget.getNodeById(e), t && n.push(t); return n }, e.prototype.getSelectedNodesUnder = function (e) { var t, n, o; if (this.selected_single_node) return e.isParentOf(this.selected_single_node) ? [this.selected_single_node] : []; o = []; for (t in this.selected_nodes) n = this.tree_widget.getNodeById(t), n && e.isParentOf(n) && o.push(n); return o }, e.prototype.isNodeSelected = function (e) { return e ? e.id ? this.selected_nodes[e.id] ? !0 : !1 : this.selected_single_node ? this.selected_single_node.element === e.element : !1 : !1 }, e.prototype.clear = function () { return this.selected_nodes = {}, this.selected_single_node = null }, e.prototype.removeFromSelection = function (e, t) { if (null == t && (t = !1), e.id) { if (delete this.selected_nodes[e.id], t) return e.iterate(function (t) { return function (n) { return delete t.selected_nodes[e.id], !0 } }(this)) } else if (this.selected_single_node && e.element === this.selected_single_node.element) return this.selected_single_node = null }, e.prototype.addToSelection = function (e) { return e.id ? this.selected_nodes[e.id] = !0 : this.selected_single_node = e }, e }(), t.exports = r }, {}], 10: [function (e, t, n) { var o, r, i = [].slice; o = jQuery, r = function () { function e(e, t) { this.$el = o(e), this.options = o.extend({}, this.defaults, t) } return e.prototype.defaults = {}, e.prototype.destroy = function () { return this._deinit() }, e.prototype._init = function () { return null }, e.prototype._deinit = function () { return null }, e.register = function (t, n) { var r, s, l, d, a; return d = function () { return "simple_widget_" + n }, a = function (t, n) { var r; return r = o.data(t, n), r && r instanceof e ? r : null }, s = function (e, n) { var r, i, s, l, u, h; for (r = d(), l = 0, u = e.length; u > l; l++) i = e[l], s = a(i, r), s || (h = new t(i, n), o.data(i, r) || o.data(i, r, h), h._init()); return e }, l = function (e) { var t, n, r, i, s, l; for (t = d(), s = [], r = 0, i = e.length; i > r; r++) n = e[r], l = a(n, t), l && l.destroy(), s.push(o.removeData(n, t)); return s }, r = function (t, n, r) { var i, s, l, a, u, h; for (a = null, s = 0, l = t.length; l > s; s++) i = t[s], u = o.data(i, d()), u && u instanceof e && (h = u[n], h && "function" == typeof h && (a = h.apply(u, r))); return a }, o.fn[n] = function () { var e, n, o, d, a; return o = arguments[0], n = 2 <= arguments.length ? i.call(arguments, 1) : [], e = this, void 0 === o || "object" == typeof o ? (a = o, s(e, a)) : "string" == typeof o && "_" !== o[0] ? (d = o, "destroy" === d ? l(e) : "get_widget_class" === d ? t : r(e, d, n)) : void 0 } }, e }(), t.exports = r }, {}], 11: [function (e, t, n) { var o, r, i, s, l, d, a, u, h, p, c, _, f, g, m, v, y, N, S, w, D, F, C, E = function (e, t) { function n() { this.constructor = e } for (var o in t) I.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, I = {}.hasOwnProperty; S = e("./version"), w = e("./drag_and_drop_handler"), l = e("./elements_renderer"), p = e("./key_handler"), c = e("./mouse.widget"), m = e("./save_state_handler"), v = e("./scroll_handler"), y = e("./select_node_handler"), N = e("./simple.widget"), D = e("./node"), _ = D.Node, g = D.Position, C = e("./util"), F = e("./node_element"), r = F.BorderDropHint, d = F.FolderElement, a = F.GhostDropHint, f = F.NodeElement, i = w.DragAndDropHandler, s = w.DragElement, u = w.HitAreasGenerator, o = jQuery, h = function (e) { function t() { return t.__super__.constructor.apply(this, arguments) } return E(t, e), t.prototype.BorderDropHint = r, t.prototype.DragElement = s, t.prototype.DragAndDropHandler = i, t.prototype.ElementsRenderer = l, t.prototype.GhostDropHint = a, t.prototype.HitAreasGenerator = u, t.prototype.Node = _, t.prototype.SaveStateHandler = m, t.prototype.ScrollHandler = v, t.prototype.SelectNodeHandler = y, t.prototype.defaults = { autoOpen: !1, saveState: !1, dragAndDrop: !1, selectable: !0, useContextMenu: !0, onCanSelectNode: null, onSetStateFromStorage: null, onGetStateFromStorage: null, onCreateLi: null, onIsMoveHandle: null, onCanMove: null, onCanMoveTo: null, onLoadFailed: null, autoEscape: !0, dataUrl: null, closedIcon: null, openedIcon: "&#x25bc;", slide: !0, nodeClass: _, dataFilter: null, keyboardSupport: !0, openFolderDelay: 500, rtl: null, onDragMove: null, onDragStop: null, buttonLeft: !0, onLoading: null }, t.prototype.toggle = function (e, t) { return null == t && (t = null), null === t && (t = this.options.slide), e.is_open ? this.closeNode(e, t) : this.openNode(e, t), this.element }, t.prototype.getTree = function () { return this.tree }, t.prototype.selectNode = function (e) { return this._selectNode(e, !1), this.element }, t.prototype._selectNode = function (e, t) { var n, o, r, i; if (null == t && (t = !1), this.select_node_handler) { if (n = function (t) { return function () { return t.options.onCanSelectNode ? t.options.selectable && t.options.onCanSelectNode(e) : t.options.selectable } }(this), r = function (t) { return function () { var n; return n = e.parent, n && n.parent && !n.is_open ? t.openNode(n, !1) : void 0 } }(this), i = function (e) { return function () { return e.options.saveState ? e.save_state_handler.saveState() : void 0 } }(this), !e) return this._deselectCurrentNode(), void i(); if (n()) return this.select_node_handler.isNodeSelected(e) ? t && (this._deselectCurrentNode(), this._triggerEvent("tree.select", { node: null, previous_node: e })) : (o = this.getSelectedNode(), this._deselectCurrentNode(), this.addToSelection(e), this._triggerEvent("tree.select", { node: e, deselected_node: o }), r()), i() } }, t.prototype.getSelectedNode = function () { return this.select_node_handler ? this.select_node_handler.getSelectedNode() : null }, t.prototype.toJson = function () { return JSON.stringify(this.tree.getData()) }, t.prototype.loadData = function (e, t) { return this._loadData(e, t), this.element }, t.prototype.loadDataFromUrl = function (e, t, n) { return "string" === o.type(e) ? this._loadDataFromUrl(e, t, n) : this._loadDataFromUrl(null, e, t), this.element }, t.prototype.reload = function (e) { return this._loadDataFromUrl(null, null, e), this.element }, t.prototype._loadDataFromUrl = function (e, t, n) { var r, i, s, l, d, a, u, h; r = null, i = function (e) { return function () { return r = t ? o(t.element) : e.element, r.addClass("jqtree-loading"), e._notifyLoading(!0, t, r) } }(this), h = function (e) { return function () { return r ? (r.removeClass("jqtree-loading"), e._notifyLoading(!1, t, r)) : void 0 } }(this), u = function () { return "string" === o.type(e) ? { url: e } : (e.method || (e.method = "get"), e) }, s = function (e) { return function (r) { return h(), e._loadData(r, t), n && o.isFunction(n) ? n() : void 0 } }(this), d = function (e) { return function (t) { var n; return n = o.isArray(t) || "object" == typeof t ? t : null != n ? o.parseJSON(t) : [], e.options.dataFilter && (n = e.options.dataFilter(n)), s(n) } }(this), l = function (e) { return function (t) { return h(), e.options.onLoadFailed ? e.options.onLoadFailed(t) : void 0 } }(this), a = function () { return e = u(), o.ajax(o.extend({}, e, { method: null != e.method ? e.method.toUpperCase() : "GET", cache: !1, dataType: "json", success: d, error: l })) }, e || (e = this._getDataUrlInfo(t)), i(), e ? o.isArray(e) ? s(e) : a() : h() }, t.prototype._loadData = function (e, t) { var n, o; return null == t && (t = null), n = function (e) { return function () { var n, o, r, i; if (e.select_node_handler) for (i = e.select_node_handler.getSelectedNodesUnder(t), n = 0, o = i.length; o > n; n++) r = i[n], e.select_node_handler.removeFromSelection(r); return null } }(this), o = function (n) { return function () { return t.loadFromData(e), t.load_on_demand = !1, t.is_loading = !1, n._refreshElements(t) } }(this), e ? (this._triggerEvent("tree.load_data", { tree_data: e }), t ? (n(), o()) : this._initTree(e), this.isDragging() ? this.dnd_handler.refresh() : void 0) : void 0 }, t.prototype.getNodeById = function (e) { return this.tree.getNodeById(e) }, t.prototype.getNodeByName = function (e) { return this.tree.getNodeByName(e) }, t.prototype.getNodesByProperty = function (e, t) { return this.tree.getNodesByProperty(e, t) }, t.prototype.getNodeByHtmlElement = function (e) { return this._getNode(o(e)) }, t.prototype.getNodeByCallback = function (e) { return this.tree.getNodeByCallback(e) }, t.prototype.openNode = function (e, t) { return null == t && (t = null), e && (null === t && (t = this.options.slide), this._openNode(e, t)), this.element }, t.prototype._openNode = function (e, t, n) { var o, r; if (null == t && (t = !0), o = function (e) { return function (t, n, o) { var r; return r = new d(t, e), r.open(o, n) } }(this), e.isFolder()) { if (e.load_on_demand) return this._loadFolderOnDemand(e, t, n); for (r = e.parent; r;) r.parent && o(r, !1, null), r = r.parent; return o(e, t, n), this._saveState() } }, t.prototype._loadFolderOnDemand = function (e, t, n) { return null == t && (t = !0), e.is_loading = !0, this._loadDataFromUrl(null, e, function (o) { return function () { return o._openNode(e, t, n) } }(this)) }, t.prototype.closeNode = function (e, t) { return null == t && (t = null), null === t && (t = this.options.slide), e.isFolder() && (new d(e, this).close(t), this._saveState()), this.element }, t.prototype.isDragging = function () { return this.dnd_handler ? this.dnd_handler.is_dragging : !1 }, t.prototype.refreshHitAreas = function () { return this.dnd_handler.refresh(), this.element }, t.prototype.addNodeAfter = function (e, t) { var n; return n = t.addAfter(e), this._refreshElements(t.parent), n }, t.prototype.addNodeBefore = function (e, t) { var n; return n = t.addBefore(e), this._refreshElements(t.parent), n }, t.prototype.addParentNode = function (e, t) { var n; return n = t.addParent(e), this._refreshElements(n.parent), n }, t.prototype.removeNode = function (e) { var t; return t = e.parent, t && (this.select_node_handler.removeFromSelection(e, !0), e.remove(), this._refreshElements(t)), this.element }, t.prototype.appendNode = function (e, t) { var n; return t = t || this.tree, n = t.append(e), this._refreshElements(t), n }, t.prototype.prependNode = function (e, t) { var n; return t || (t = this.tree), n = t.prepend(e), this._refreshElements(t), n }, t.prototype.updateNode = function (e, t) { var n; return n = t.id && t.id !== e.id, n && this.tree.removeNodeFromIndex(e), e.setData(t), n && this.tree.addNodeToIndex(e), "object" == typeof t && t.children && (e.removeChildren(), t.children.length && e.loadFromData(t.children)), this.renderer.renderFromNode(e), this._selectCurrentNode(), this.element }, t.prototype.moveNode = function (e, t, n) { var o; return o = g.nameToIndex(n), this.tree.moveNode(e, t, o), this._refreshElements(), this.element }, t.prototype.getStateFromStorage = function () { return this.save_state_handler.getStateFromStorage() }, t.prototype.addToSelection = function (e) { return e && (this.select_node_handler.addToSelection(e), this._getNodeElementForNode(e).select(), this._saveState()), this.element }, t.prototype.getSelectedNodes = function () { return this.select_node_handler.getSelectedNodes() }, t.prototype.isNodeSelected = function (e) { return this.select_node_handler.isNodeSelected(e) }, t.prototype.removeFromSelection = function (e) { return this.select_node_handler.removeFromSelection(e), this._getNodeElementForNode(e).deselect(), this._saveState(), this.element }, t.prototype.scrollToNode = function (e) { var t, n; return t = o(e.element), n = t.offset().top - this.$el.offset().top, this.scroll_handler.scrollTo(n), this.element }, t.prototype.getState = function () { return this.save_state_handler.getState() }, t.prototype.setState = function (e) { return this.save_state_handler.setInitialState(e), this._refreshElements(), this.element }, t.prototype.setOption = function (e, t) { return this.options[e] = t, this.element }, t.prototype.moveDown = function () { return this.key_handler && this.key_handler.moveDown(), this.element }, t.prototype.moveUp = function () { return this.key_handler && this.key_handler.moveUp(), this.element }, t.prototype.getVersion = function () { return S }, t.prototype._init = function () { return t.__super__._init.call(this), this.element = this.$el, this.mouse_delay = 300, this.is_initialized = !1, this.options.rtl = this._getRtlOption(), this.options.closedIcon || (this.options.closedIcon = this._getDefaultClosedIcon()), this.renderer = new l(this), null != m ? this.save_state_handler = new m(this) : this.options.saveState = !1, null != y && (this.select_node_handler = new y(this)), null != i ? this.dnd_handler = new i(this) : this.options.dragAndDrop = !1, null != v && (this.scroll_handler = new v(this)), null != p && null != y && (this.key_handler = new p(this)), this._initData(), this.element.click(o.proxy(this._click, this)), this.element.dblclick(o.proxy(this._dblclick, this)), this.options.useContextMenu ? this.element.bind("contextmenu", o.proxy(this._contextmenu, this)) : void 0 }, t.prototype._deinit = function () { return this.element.empty(), this.element.unbind(), this.key_handler && this.key_handler.deinit(), this.tree = null, t.__super__._deinit.call(this) }, t.prototype._initData = function () { var e; return this.options.data ? this._loadData(this.options.data) : (e = this._getDataUrlInfo(), e ? this._loadDataFromUrl() : this._loadData([])) }, t.prototype._getDataUrlInfo = function (e) { var t, n; return t = this.options.dataUrl || this.element.data("url"), n = function (n) { return function () { var o, r, i; return i = { url: t }, e && e.id ? (o = { node: e.id }, i.data = o) : (r = n._getNodeIdToBeSelected(), r && (o = { selected_node: r }, i.data = o)), i } }(this), o.isFunction(t) ? t(e) : "string" === o.type(t) ? n() : t }, t.prototype._getNodeIdToBeSelected = function () { return this.options.saveState ? this.save_state_handler.getNodeIdToBeSelected() : null }, t.prototype._initTree = function (e) { var t, n; return t = function (e) { return function () { return e.is_initialized ? void 0 : (e.is_initialized = !0, e._triggerEvent("tree.init")) } }(this), this.tree = new this.options.nodeClass(null, !0, this.options.nodeClass), this.select_node_handler && this.select_node_handler.clear(), this.tree.loadFromData(e), n = this._setInitialState(), this._refreshElements(), n ? this._setInitialStateOnDemand(t) : t() }, t.prototype._setInitialState = function () { var e, t, n, o, r; return r = function (e) { return function () { var t, n; return e.options.saveState && e.save_state_handler ? (n = e.save_state_handler.getStateFromStorage(), n ? (t = e.save_state_handler.setInitialState(n), [!0, t]) : [!1, !1]) : [!1, !1] } }(this), e = function (e) { return function () { var t, n; return e.options.autoOpen === !1 ? !1 : (t = e._getAutoOpenMaxLevel(), n = !1, e.tree.iterate(function (e, o) { return e.load_on_demand ? (n = !0, !1) : e.hasChildren() ? (e.is_open = !0, o !== t) : !1 }), n) } }(this), o = r(), t = o[0], n = o[1], t || (n = e()), n }, t.prototype._setInitialStateOnDemand = function (e) { var t, n; return n = function (t) { return function () { var n; return t.options.saveState && t.save_state_handler ? (n = t.save_state_handler.getStateFromStorage(), n ? (t.save_state_handler.setInitialStateOnDemand(n, e), !0) : !1) : !1 } }(this), t = function (t) { return function () { var n, o, r, i; return r = t._getAutoOpenMaxLevel(), o = 0, n = function (e) { return o += 1, t._openNode(e, !1, function () { return o -= 1, i() }) }, (i = function () { return t.tree.iterate(function (e, o) { return e.load_on_demand ? (e.is_loading || n(e), !1) : (t._openNode(e, !1), o !== r) }), 0 === o ? e() : void 0 })() } }(this), n() ? void 0 : t() }, t.prototype._getAutoOpenMaxLevel = function () { return this.options.autoOpen === !0 ? -1 : parseInt(this.options.autoOpen) }, t.prototype._refreshElements = function (e) { return null == e && (e = null), this.renderer.render(e), this._triggerEvent("tree.refresh") }, t.prototype._click = function (e) { var t, n, o; if (t = this._getClickTarget(e.target)) { if ("button" === t.type) return this.toggle(t.node, this.options.slide), e.preventDefault(), e.stopPropagation(); if ("label" === t.type && (o = t.node, n = this._triggerEvent("tree.click", { node: o, click_event: e }), !n.isDefaultPrevented())) return this._selectNode(o, !0) } }, t.prototype._dblclick = function (e) { var t; return t = this._getClickTarget(e.target), t && "label" === t.type ? this._triggerEvent("tree.dblclick", { node: t.node, click_event: e }) : void 0 }, t.prototype._getClickTarget = function (e) { var t, n, r, i; if (r = o(e), t = r.closest(".jqtree-toggler"), t.length) { if (i = this._getNode(t)) return { type: "button", node: i } } else if (n = r.closest(".jqtree-element"), n.length && (i = this._getNode(n))) return { type: "label", node: i }; return null }, t.prototype._getNode = function (e) { var t; return t = e.closest("li.jqtree_common"), 0 === t.length ? null : t.data("node") }, t.prototype._getNodeElementForNode = function (e) { return e.isFolder() ? new d(e, this) : new f(e, this) }, t.prototype._getNodeElement = function (e) { var t; return t = this._getNode(e), t ? this._getNodeElementForNode(t) : null }, t.prototype._contextmenu = function (e) { var t, n; return t = o(e.target).closest("ul.jqtree-tree .jqtree-element"), t.length && (n = this._getNode(t)) ? (e.preventDefault(), e.stopPropagation(), this._triggerEvent("tree.contextmenu", { node: n, click_event: e }), !1) : void 0 }, t.prototype._saveState = function () { return this.options.saveState ? this.save_state_handler.saveState() : void 0 }, t.prototype._mouseCapture = function (e) { return this.options.dragAndDrop ? this.dnd_handler.mouseCapture(e) : !1 }, t.prototype._mouseStart = function (e) { return this.options.dragAndDrop ? this.dnd_handler.mouseStart(e) : !1 }, t.prototype._mouseDrag = function (e) { var t; return this.options.dragAndDrop ? (t = this.dnd_handler.mouseDrag(e), this.scroll_handler && this.scroll_handler.checkScrolling(), t) : !1 }, t.prototype._mouseStop = function (e) { return this.options.dragAndDrop ? this.dnd_handler.mouseStop(e) : !1 }, t.prototype._triggerEvent = function (e, t) { var n; return n = o.Event(e), o.extend(n, t), this.element.trigger(n), n }, t.prototype.testGenerateHitAreas = function (e) { return this.dnd_handler.current_item = this._getNodeElementForNode(e), this.dnd_handler.generateHitAreas(), this.dnd_handler.hit_areas }, t.prototype._selectCurrentNode = function () { var e, t; return e = this.getSelectedNode(), e && (t = this._getNodeElementForNode(e)) ? t.select() : void 0 }, t.prototype._deselectCurrentNode = function () { var e; return e = this.getSelectedNode(), e ? this.removeFromSelection(e) : void 0 }, t.prototype._getDefaultClosedIcon = function () { return this.options.rtl ? "&#x25c0;" : "&#x25ba;" }, t.prototype._getRtlOption = function () { var e; return null !== this.options.rtl ? this.options.rtl : (e = this.element.data("rtl"), null != e && e !== !1 ? !0 : !1) }, t.prototype._notifyLoading = function (e, t, n) { return this.options.onLoading ? this.options.onLoading(e, t, n) : void 0 }, t }(c), h.getModule = function (e) { var t; return t = { node: D, util: C, drag_and_drop_handler: w }, t[e] }, N.register(h, "tree") }, { "./drag_and_drop_handler": 1, "./elements_renderer": 2, "./key_handler": 3, "./mouse.widget": 4, "./node": 5, "./node_element": 6, "./save_state_handler": 7, "./scroll_handler": 8, "./select_node_handler": 9, "./simple.widget": 10, "./util": 12, "./version": 13 }], 12: [function (e, t, n) { var o, r, i, s, l; o = function (e, t) { var n, o, r, i; for (n = o = 0, r = e.length; r > o; n = ++o) if (i = e[n], i === t) return n; return -1 }, s = function (e, t) { return e.indexOf ? e.indexOf(t) : o(e, t) }, l = function (e) { return "number" == typeof e && e % 1 === 0 }, i = function (e) { return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;") }, r = function (e) { return e ? "true" : "false" }, t.exports = { _indexOf: o, getBoolString: r, html_escape: i, indexOf: s, isInt: l } }, {}], 13: [function (e, t, n) { t.exports = "1.3.6" }, {}]
}, {}, [11]);

/* raphael.min.js */
!function t(e, r) { "object" == typeof exports && "object" == typeof module ? module.exports = r() : "function" == typeof define && define.amd ? define([], r) : "object" == typeof exports ? exports.Raphael = r() : e.Raphael = r() }(this, function () {
    return function (t) { function e(i) { if (r[i]) return r[i].exports; var n = r[i] = { exports: {}, id: i, loaded: !1 }; return t[i].call(n.exports, n, n.exports, e), n.loaded = !0, n.exports } var r = {}; return e.m = t, e.c = r, e.p = "", e(0) }([function (t, e, r) { var i, n; i = [r(1), r(3), r(4)], n = function (t) { return t }.apply(e, i), !(void 0 !== n && (t.exports = n)) }, function (t, e, r) {
        var i, n; i = [r(2)], n = function (t) {
            function e(r) { if (e.is(r, "function")) return w ? r() : t.on("raphael.DOMload", r); if (e.is(r, Q)) return e._engine.create[z](e, r.splice(0, 3 + e.is(r[0], $))).add(r); var i = Array.prototype.slice.call(arguments, 0); if (e.is(i[i.length - 1], "function")) { var n = i.pop(); return w ? n.call(e._engine.create[z](e, i)) : t.on("raphael.DOMload", function () { n.call(e._engine.create[z](e, i)) }) } return e._engine.create[z](e, arguments) } function r(t) { if ("function" == typeof t || Object(t) !== t) return t; var e = new t.constructor; for (var i in t) t[A](i) && (e[i] = r(t[i])); return e } function i(t, e) { for (var r = 0, i = t.length; r < i; r++) if (t[r] === e) return t.push(t.splice(r, 1)[0]) } function n(t, e, r) { function n() { var a = Array.prototype.slice.call(arguments, 0), s = a.join("␀"), o = n.cache = n.cache || {}, l = n.count = n.count || []; return o[A](s) ? (i(l, s), r ? r(o[s]) : o[s]) : (l.length >= 1e3 && delete o[l.shift()], l.push(s), o[s] = t[z](e, a), r ? r(o[s]) : o[s]) } return n } function a() { return this.hex } function s(t, e) { for (var r = [], i = 0, n = t.length; n - 2 * !e > i; i += 2) { var a = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? n - 4 == i ? a[3] = { x: +t[0], y: +t[1] } : n - 2 == i && (a[2] = { x: +t[0], y: +t[1] }, a[3] = { x: +t[2], y: +t[3] }) : a[0] = { x: +t[n - 2], y: +t[n - 1] } : n - 4 == i ? a[3] = a[2] : i || (a[0] = { x: +t[i], y: +t[i + 1] }), r.push(["C", (-a[0].x + 6 * a[1].x + a[2].x) / 6, (-a[0].y + 6 * a[1].y + a[2].y) / 6, (a[1].x + 6 * a[2].x - a[3].x) / 6, (a[1].y + 6 * a[2].y - a[3].y) / 6, a[2].x, a[2].y]) } return r } function o(t, e, r, i, n) { var a = -3 * e + 9 * r - 9 * i + 3 * n, s = t * a + 6 * e - 12 * r + 6 * i; return t * s - 3 * e + 3 * r } function l(t, e, r, i, n, a, s, l, h) { null == h && (h = 1), h = h > 1 ? 1 : h < 0 ? 0 : h; for (var u = h / 2, c = 12, f = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], p = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], d = 0, g = 0; g < c; g++) { var v = u * f[g] + u, x = o(v, t, r, n, s), y = o(v, e, i, a, l), m = x * x + y * y; d += p[g] * Y.sqrt(m) } return u * d } function h(t, e, r, i, n, a, s, o, h) { if (!(h < 0 || l(t, e, r, i, n, a, s, o) < h)) { var u = 1, c = u / 2, f = u - c, p, d = .01; for (p = l(t, e, r, i, n, a, s, o, f) ; H(p - h) > d;) c /= 2, f += (p < h ? 1 : -1) * c, p = l(t, e, r, i, n, a, s, o, f); return f } } function u(t, e, r, i, n, a, s, o) { if (!(W(t, r) < G(n, s) || G(t, r) > W(n, s) || W(e, i) < G(a, o) || G(e, i) > W(a, o))) { var l = (t * i - e * r) * (n - s) - (t - r) * (n * o - a * s), h = (t * i - e * r) * (a - o) - (e - i) * (n * o - a * s), u = (t - r) * (a - o) - (e - i) * (n - s); if (u) { var c = l / u, f = h / u, p = +c.toFixed(2), d = +f.toFixed(2); if (!(p < +G(t, r).toFixed(2) || p > +W(t, r).toFixed(2) || p < +G(n, s).toFixed(2) || p > +W(n, s).toFixed(2) || d < +G(e, i).toFixed(2) || d > +W(e, i).toFixed(2) || d < +G(a, o).toFixed(2) || d > +W(a, o).toFixed(2))) return { x: c, y: f } } } } function c(t, e) { return p(t, e) } function f(t, e) { return p(t, e, 1) } function p(t, r, i) { var n = e.bezierBBox(t), a = e.bezierBBox(r); if (!e.isBBoxIntersect(n, a)) return i ? 0 : []; for (var s = l.apply(0, t), o = l.apply(0, r), h = W(~~(s / 5), 1), c = W(~~(o / 5), 1), f = [], p = [], d = {}, g = i ? 0 : [], v = 0; v < h + 1; v++) { var x = e.findDotsAtSegment.apply(e, t.concat(v / h)); f.push({ x: x.x, y: x.y, t: v / h }) } for (v = 0; v < c + 1; v++) x = e.findDotsAtSegment.apply(e, r.concat(v / c)), p.push({ x: x.x, y: x.y, t: v / c }); for (v = 0; v < h; v++) for (var y = 0; y < c; y++) { var m = f[v], b = f[v + 1], _ = p[y], w = p[y + 1], k = H(b.x - m.x) < .001 ? "y" : "x", B = H(w.x - _.x) < .001 ? "y" : "x", C = u(m.x, m.y, b.x, b.y, _.x, _.y, w.x, w.y); if (C) { if (d[C.x.toFixed(4)] == C.y.toFixed(4)) continue; d[C.x.toFixed(4)] = C.y.toFixed(4); var S = m.t + H((C[k] - m[k]) / (b[k] - m[k])) * (b.t - m.t), A = _.t + H((C[B] - _[B]) / (w[B] - _[B])) * (w.t - _.t); S >= 0 && S <= 1.001 && A >= 0 && A <= 1.001 && (i ? g++ : g.push({ x: C.x, y: C.y, t1: G(S, 1), t2: G(A, 1) })) } } return g } function d(t, r, i) { t = e._path2curve(t), r = e._path2curve(r); for (var n, a, s, o, l, h, u, c, f, d, g = i ? 0 : [], v = 0, x = t.length; v < x; v++) { var y = t[v]; if ("M" == y[0]) n = l = y[1], a = h = y[2]; else { "C" == y[0] ? (f = [n, a].concat(y.slice(1)), n = f[6], a = f[7]) : (f = [n, a, n, a, l, h, l, h], n = l, a = h); for (var m = 0, b = r.length; m < b; m++) { var _ = r[m]; if ("M" == _[0]) s = u = _[1], o = c = _[2]; else { "C" == _[0] ? (d = [s, o].concat(_.slice(1)), s = d[6], o = d[7]) : (d = [s, o, s, o, u, c, u, c], s = u, o = c); var w = p(f, d, i); if (i) g += w; else { for (var k = 0, B = w.length; k < B; k++) w[k].segment1 = v, w[k].segment2 = m, w[k].bez1 = f, w[k].bez2 = d; g = g.concat(w) } } } } } return g } function g(t, e, r, i, n, a) { null != t ? (this.a = +t, this.b = +e, this.c = +r, this.d = +i, this.e = +n, this.f = +a) : (this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0) } function v() { return this.x + j + this.y } function x() { return this.x + j + this.y + j + this.width + " × " + this.height } function y(t, e, r, i, n, a) { function s(t) { return ((c * t + u) * t + h) * t } function o(t, e) { var r = l(t, e); return ((d * r + p) * r + f) * r } function l(t, e) { var r, i, n, a, o, l; for (n = t, l = 0; l < 8; l++) { if (a = s(n) - t, H(a) < e) return n; if (o = (3 * c * n + 2 * u) * n + h, H(o) < 1e-6) break; n -= a / o } if (r = 0, i = 1, n = t, n < r) return r; if (n > i) return i; for (; r < i;) { if (a = s(n), H(a - t) < e) return n; t > a ? r = n : i = n, n = (i - r) / 2 + r } return n } var h = 3 * e, u = 3 * (i - e) - h, c = 1 - h - u, f = 3 * r, p = 3 * (n - r) - f, d = 1 - f - p; return o(t, 1 / (200 * a)) } function m(t, e) { var r = [], i = {}; if (this.ms = e, this.times = 1, t) { for (var n in t) t[A](n) && (i[ht(n)] = t[n], r.push(ht(n))); r.sort(Bt) } this.anim = i, this.top = r[r.length - 1], this.percents = r } function b(r, i, n, a, s, o) { n = ht(n); var l, h, u, c = [], f, p, d, v = r.ms, x = {}, m = {}, b = {}; if (a) for (w = 0, B = Ee.length; w < B; w++) { var _ = Ee[w]; if (_.el.id == i.id && _.anim == r) { _.percent != n ? (Ee.splice(w, 1), u = 1) : h = _, i.attr(_.totalOrigin); break } } else a = +m; for (var w = 0, B = r.percents.length; w < B; w++) { if (r.percents[w] == n || r.percents[w] > a * r.top) { n = r.percents[w], p = r.percents[w - 1] || 0, v = v / r.top * (n - p), f = r.percents[w + 1], l = r.anim[n]; break } a && i.attr(r.anim[r.percents[w]]) } if (l) { if (h) h.initstatus = a, h.start = new Date - h.ms * a; else { for (var C in l) if (l[A](C) && (pt[A](C) || i.paper.customAttributes[A](C))) switch (x[C] = i.attr(C), null == x[C] && (x[C] = ft[C]), m[C] = l[C], pt[C]) { case $: b[C] = (m[C] - x[C]) / v; break; case "colour": x[C] = e.getRGB(x[C]); var S = e.getRGB(m[C]); b[C] = { r: (S.r - x[C].r) / v, g: (S.g - x[C].g) / v, b: (S.b - x[C].b) / v }; break; case "path": var T = Qt(x[C], m[C]), E = T[1]; for (x[C] = T[0], b[C] = [], w = 0, B = x[C].length; w < B; w++) { b[C][w] = [0]; for (var M = 1, N = x[C][w].length; M < N; M++) b[C][w][M] = (E[w][M] - x[C][w][M]) / v } break; case "transform": var L = i._, z = le(L[C], m[C]); if (z) for (x[C] = z.from, m[C] = z.to, b[C] = [], b[C].real = !0, w = 0, B = x[C].length; w < B; w++) for (b[C][w] = [x[C][w][0]], M = 1, N = x[C][w].length; M < N; M++) b[C][w][M] = (m[C][w][M] - x[C][w][M]) / v; else { var F = i.matrix || new g, R = { _: { transform: L.transform }, getBBox: function () { return i.getBBox(1) } }; x[C] = [F.a, F.b, F.c, F.d, F.e, F.f], se(R, m[C]), m[C] = R._.transform, b[C] = [(R.matrix.a - F.a) / v, (R.matrix.b - F.b) / v, (R.matrix.c - F.c) / v, (R.matrix.d - F.d) / v, (R.matrix.e - F.e) / v, (R.matrix.f - F.f) / v] } break; case "csv": var j = I(l[C])[q](k), D = I(x[C])[q](k); if ("clip-rect" == C) for (x[C] = D, b[C] = [], w = D.length; w--;) b[C][w] = (j[w] - x[C][w]) / v; m[C] = j; break; default: for (j = [][P](l[C]), D = [][P](x[C]), b[C] = [], w = i.paper.customAttributes[C].length; w--;) b[C][w] = ((j[w] || 0) - (D[w] || 0)) / v } var V = l.easing, O = e.easing_formulas[V]; if (!O) if (O = I(V).match(st), O && 5 == O.length) { var Y = O; O = function (t) { return y(t, +Y[1], +Y[2], +Y[3], +Y[4], v) } } else O = St; if (d = l.start || r.start || +new Date, _ = { anim: r, percent: n, timestamp: d, start: d + (r.del || 0), status: 0, initstatus: a || 0, stop: !1, ms: v, easing: O, from: x, diff: b, to: m, el: i, callback: l.callback, prev: p, next: f, repeat: o || r.times, origin: i.attr(), totalOrigin: s }, Ee.push(_), a && !h && !u && (_.stop = !0, _.start = new Date - v * a, 1 == Ee.length)) return Ne(); u && (_.start = new Date - _.ms * a), 1 == Ee.length && Me(Ne) } t("raphael.anim.start." + i.id, i, r) } } function _(t) { for (var e = 0; e < Ee.length; e++) Ee[e].el.paper == t && Ee.splice(e--, 1) } e.version = "2.2.0", e.eve = t; var w, k = /[, ]+/, B = { circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1 }, C = /\{(\d+)\}/g, S = "prototype", A = "hasOwnProperty", T = { doc: document, win: window }, E = { was: Object.prototype[A].call(T.win, "Raphael"), is: T.win.Raphael }, M = function () { this.ca = this.customAttributes = {} }, N, L = "appendChild", z = "apply", P = "concat", F = "ontouchstart" in T.win || T.win.DocumentTouch && T.doc instanceof DocumentTouch, R = "", j = " ", I = String, q = "split", D = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[q](j), V = { mousedown: "touchstart", mousemove: "touchmove", mouseup: "touchend" }, O = I.prototype.toLowerCase, Y = Math, W = Y.max, G = Y.min, H = Y.abs, X = Y.pow, U = Y.PI, $ = "number", Z = "string", Q = "array", J = "toString", K = "fill", tt = Object.prototype.toString, et = {}, rt = "push", it = e._ISURL = /^url\(['"]?(.+?)['"]?\)$/i, nt = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i, at = { NaN: 1, Infinity: 1, "-Infinity": 1 }, st = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/, ot = Y.round, lt = "setAttribute", ht = parseFloat, ut = parseInt, ct = I.prototype.toUpperCase, ft = e._availableAttrs = { "arrow-end": "none", "arrow-start": "none", blur: 0, "clip-rect": "0 0 1e9 1e9", cursor: "default", cx: 0, cy: 0, fill: "#fff", "fill-opacity": 1, font: '10px "Arial"', "font-family": '"Arial"', "font-size": "10", "font-style": "normal", "font-weight": 400, gradient: 0, height: 0, href: "http://raphaeljs.com/", "letter-spacing": 0, opacity: 1, path: "M0,0", r: 0, rx: 0, ry: 0, src: "", stroke: "#000", "stroke-dasharray": "", "stroke-linecap": "butt", "stroke-linejoin": "butt", "stroke-miterlimit": 0, "stroke-opacity": 1, "stroke-width": 1, target: "_blank", "text-anchor": "middle", title: "Raphael", transform: "", width: 0, x: 0, y: 0, "class": "" }, pt = e._availableAnimAttrs = { blur: $, "clip-rect": "csv", cx: $, cy: $, fill: "colour", "fill-opacity": $, "font-size": $, height: $, opacity: $, path: "path", r: $, rx: $, ry: $, stroke: "colour", "stroke-opacity": $, "stroke-width": $, transform: "transform", width: $, x: $, y: $ }, dt = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g, gt = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/, vt = { hs: 1, rg: 1 }, xt = /,?([achlmqrstvxz]),?/gi, yt = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, mt = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, bt = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi, _t = e._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/, wt = {}, kt = function (t, e) { return t.key - e.key }, Bt = function (t, e) { return ht(t) - ht(e) }, Ct = function () { }, St = function (t) { return t }, At = e._rectPath = function (t, e, r, i, n) { return n ? [["M", t + n, e], ["l", r - 2 * n, 0], ["a", n, n, 0, 0, 1, n, n], ["l", 0, i - 2 * n], ["a", n, n, 0, 0, 1, -n, n], ["l", 2 * n - r, 0], ["a", n, n, 0, 0, 1, -n, -n], ["l", 0, 2 * n - i], ["a", n, n, 0, 0, 1, n, -n], ["z"]] : [["M", t, e], ["l", r, 0], ["l", 0, i], ["l", -r, 0], ["z"]] }, Tt = function (t, e, r, i) { return null == i && (i = r), [["M", t, e], ["m", 0, -i], ["a", r, i, 0, 1, 1, 0, 2 * i], ["a", r, i, 0, 1, 1, 0, -2 * i], ["z"]] }, Et = e._getPath = { path: function (t) { return t.attr("path") }, circle: function (t) { var e = t.attrs; return Tt(e.cx, e.cy, e.r) }, ellipse: function (t) { var e = t.attrs; return Tt(e.cx, e.cy, e.rx, e.ry) }, rect: function (t) { var e = t.attrs; return At(e.x, e.y, e.width, e.height, e.r) }, image: function (t) { var e = t.attrs; return At(e.x, e.y, e.width, e.height) }, text: function (t) { var e = t._getBBox(); return At(e.x, e.y, e.width, e.height) }, set: function (t) { var e = t._getBBox(); return At(e.x, e.y, e.width, e.height) } }, Mt = e.mapPath = function (t, e) { if (!e) return t; var r, i, n, a, s, o, l; for (t = Qt(t), n = 0, s = t.length; n < s; n++) for (l = t[n], a = 1, o = l.length; a < o; a += 2) r = e.x(l[a], l[a + 1]), i = e.y(l[a], l[a + 1]), l[a] = r, l[a + 1] = i; return t }; if (e._g = T, e.type = T.win.SVGAngle || T.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML", "VML" == e.type) { var Nt = T.doc.createElement("div"), Lt; if (Nt.innerHTML = '<v:shape adj="1"/>', Lt = Nt.firstChild, Lt.style.behavior = "url(#default#VML)", !Lt || "object" != typeof Lt.adj) return e.type = R; Nt = null } e.svg = !(e.vml = "VML" == e.type), e._Paper = M, e.fn = N = M.prototype = e.prototype, e._id = 0, e.is = function (t, e) { return e = O.call(e), "finite" == e ? !at[A](+t) : "array" == e ? t instanceof Array : "null" == e && null === t || e == typeof t && null !== t || "object" == e && t === Object(t) || "array" == e && Array.isArray && Array.isArray(t) || tt.call(t).slice(8, -1).toLowerCase() == e }, e.angle = function (t, r, i, n, a, s) { if (null == a) { var o = t - i, l = r - n; return o || l ? (180 + 180 * Y.atan2(-l, -o) / U + 360) % 360 : 0 } return e.angle(t, r, a, s) - e.angle(i, n, a, s) }, e.rad = function (t) { return t % 360 * U / 180 }, e.deg = function (t) { return Math.round(180 * t / U % 360 * 1e3) / 1e3 }, e.snapTo = function (t, r, i) { if (i = e.is(i, "finite") ? i : 10, e.is(t, Q)) { for (var n = t.length; n--;) if (H(t[n] - r) <= i) return t[n] } else { t = +t; var a = r % t; if (a < i) return r - a; if (a > t - i) return r - a + t } return r }; var zt = e.createUUID = function (t, e) { return function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t, e).toUpperCase() } }(/[xy]/g, function (t) { var e = 16 * Y.random() | 0, r = "x" == t ? e : 3 & e | 8; return r.toString(16) }); e.setWindow = function (r) { t("raphael.setWindow", e, T.win, r), T.win = r, T.doc = T.win.document, e._engine.initWin && e._engine.initWin(T.win) }; var Pt = function (t) { if (e.vml) { var r = /^\s+|\s+$/g, i; try { var a = new ActiveXObject("htmlfile"); a.write("<body>"), a.close(), i = a.body } catch (s) { i = createPopup().document.body } var o = i.createTextRange(); Pt = n(function (t) { try { i.style.color = I(t).replace(r, R); var e = o.queryCommandValue("ForeColor"); return e = (255 & e) << 16 | 65280 & e | (16711680 & e) >>> 16, "#" + ("000000" + e.toString(16)).slice(-6) } catch (n) { return "none" } }) } else { var l = T.doc.createElement("i"); l.title = "Raphaël Colour Picker", l.style.display = "none", T.doc.body.appendChild(l), Pt = n(function (t) { return l.style.color = t, T.doc.defaultView.getComputedStyle(l, R).getPropertyValue("color") }) } return Pt(t) }, Ft = function () { return "hsb(" + [this.h, this.s, this.b] + ")" }, Rt = function () { return "hsl(" + [this.h, this.s, this.l] + ")" }, jt = function () { return this.hex }, It = function (t, r, i) { if (null == r && e.is(t, "object") && "r" in t && "g" in t && "b" in t && (i = t.b, r = t.g, t = t.r), null == r && e.is(t, Z)) { var n = e.getRGB(t); t = n.r, r = n.g, i = n.b } return (t > 1 || r > 1 || i > 1) && (t /= 255, r /= 255, i /= 255), [t, r, i] }, qt = function (t, r, i, n) { t *= 255, r *= 255, i *= 255; var a = { r: t, g: r, b: i, hex: e.rgb(t, r, i), toString: jt }; return e.is(n, "finite") && (a.opacity = n), a }; e.color = function (t) { var r; return e.is(t, "object") && "h" in t && "s" in t && "b" in t ? (r = e.hsb2rgb(t), t.r = r.r, t.g = r.g, t.b = r.b, t.hex = r.hex) : e.is(t, "object") && "h" in t && "s" in t && "l" in t ? (r = e.hsl2rgb(t), t.r = r.r, t.g = r.g, t.b = r.b, t.hex = r.hex) : (e.is(t, "string") && (t = e.getRGB(t)), e.is(t, "object") && "r" in t && "g" in t && "b" in t ? (r = e.rgb2hsl(t), t.h = r.h, t.s = r.s, t.l = r.l, r = e.rgb2hsb(t), t.v = r.b) : (t = { hex: "none" }, t.r = t.g = t.b = t.h = t.s = t.v = t.l = -1)), t.toString = jt, t }, e.hsb2rgb = function (t, e, r, i) { this.is(t, "object") && "h" in t && "s" in t && "b" in t && (r = t.b, e = t.s, i = t.o, t = t.h), t *= 360; var n, a, s, o, l; return t = t % 360 / 60, l = r * e, o = l * (1 - H(t % 2 - 1)), n = a = s = r - l, t = ~~t, n += [l, o, 0, 0, o, l][t], a += [o, l, l, o, 0, 0][t], s += [0, 0, o, l, l, o][t], qt(n, a, s, i) }, e.hsl2rgb = function (t, e, r, i) { this.is(t, "object") && "h" in t && "s" in t && "l" in t && (r = t.l, e = t.s, t = t.h), (t > 1 || e > 1 || r > 1) && (t /= 360, e /= 100, r /= 100), t *= 360; var n, a, s, o, l; return t = t % 360 / 60, l = 2 * e * (r < .5 ? r : 1 - r), o = l * (1 - H(t % 2 - 1)), n = a = s = r - l / 2, t = ~~t, n += [l, o, 0, 0, o, l][t], a += [o, l, l, o, 0, 0][t], s += [0, 0, o, l, l, o][t], qt(n, a, s, i) }, e.rgb2hsb = function (t, e, r) { r = It(t, e, r), t = r[0], e = r[1], r = r[2]; var i, n, a, s; return a = W(t, e, r), s = a - G(t, e, r), i = 0 == s ? null : a == t ? (e - r) / s : a == e ? (r - t) / s + 2 : (t - e) / s + 4, i = (i + 360) % 6 * 60 / 360, n = 0 == s ? 0 : s / a, { h: i, s: n, b: a, toString: Ft } }, e.rgb2hsl = function (t, e, r) { r = It(t, e, r), t = r[0], e = r[1], r = r[2]; var i, n, a, s, o, l; return s = W(t, e, r), o = G(t, e, r), l = s - o, i = 0 == l ? null : s == t ? (e - r) / l : s == e ? (r - t) / l + 2 : (t - e) / l + 4, i = (i + 360) % 6 * 60 / 360, a = (s + o) / 2, n = 0 == l ? 0 : a < .5 ? l / (2 * a) : l / (2 - 2 * a), { h: i, s: n, l: a, toString: Rt } }, e._path2string = function () { return this.join(",").replace(xt, "$1") }; var Dt = e._preload = function (t, e) { var r = T.doc.createElement("img"); r.style.cssText = "position:absolute;left:-9999em;top:-9999em", r.onload = function () { e.call(this), this.onload = null, T.doc.body.removeChild(this) }, r.onerror = function () { T.doc.body.removeChild(this) }, T.doc.body.appendChild(r), r.src = t }; e.getRGB = n(function (t) { if (!t || (t = I(t)).indexOf("-") + 1) return { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: a }; if ("none" == t) return { r: -1, g: -1, b: -1, hex: "none", toString: a }; !(vt[A](t.toLowerCase().substring(0, 2)) || "#" == t.charAt()) && (t = Pt(t)); var r, i, n, s, o, l, h, u = t.match(nt); return u ? (u[2] && (s = ut(u[2].substring(5), 16), n = ut(u[2].substring(3, 5), 16), i = ut(u[2].substring(1, 3), 16)), u[3] && (s = ut((l = u[3].charAt(3)) + l, 16), n = ut((l = u[3].charAt(2)) + l, 16), i = ut((l = u[3].charAt(1)) + l, 16)), u[4] && (h = u[4][q](gt), i = ht(h[0]), "%" == h[0].slice(-1) && (i *= 2.55), n = ht(h[1]), "%" == h[1].slice(-1) && (n *= 2.55), s = ht(h[2]), "%" == h[2].slice(-1) && (s *= 2.55), "rgba" == u[1].toLowerCase().slice(0, 4) && (o = ht(h[3])), h[3] && "%" == h[3].slice(-1) && (o /= 100)), u[5] ? (h = u[5][q](gt), i = ht(h[0]), "%" == h[0].slice(-1) && (i *= 2.55), n = ht(h[1]), "%" == h[1].slice(-1) && (n *= 2.55), s = ht(h[2]), "%" == h[2].slice(-1) && (s *= 2.55), ("deg" == h[0].slice(-3) || "°" == h[0].slice(-1)) && (i /= 360), "hsba" == u[1].toLowerCase().slice(0, 4) && (o = ht(h[3])), h[3] && "%" == h[3].slice(-1) && (o /= 100), e.hsb2rgb(i, n, s, o)) : u[6] ? (h = u[6][q](gt), i = ht(h[0]), "%" == h[0].slice(-1) && (i *= 2.55), n = ht(h[1]), "%" == h[1].slice(-1) && (n *= 2.55), s = ht(h[2]), "%" == h[2].slice(-1) && (s *= 2.55), ("deg" == h[0].slice(-3) || "°" == h[0].slice(-1)) && (i /= 360), "hsla" == u[1].toLowerCase().slice(0, 4) && (o = ht(h[3])), h[3] && "%" == h[3].slice(-1) && (o /= 100), e.hsl2rgb(i, n, s, o)) : (u = { r: i, g: n, b: s, toString: a }, u.hex = "#" + (16777216 | s | n << 8 | i << 16).toString(16).slice(1), e.is(o, "finite") && (u.opacity = o), u)) : { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: a } }, e), e.hsb = n(function (t, r, i) { return e.hsb2rgb(t, r, i).hex }), e.hsl = n(function (t, r, i) { return e.hsl2rgb(t, r, i).hex }), e.rgb = n(function (t, e, r) { function i(t) { return t + .5 | 0 } return "#" + (16777216 | i(r) | i(e) << 8 | i(t) << 16).toString(16).slice(1) }), e.getColor = function (t) { var e = this.getColor.start = this.getColor.start || { h: 0, s: 1, b: t || .75 }, r = this.hsb2rgb(e.h, e.s, e.b); return e.h += .075, e.h > 1 && (e.h = 0, e.s -= .2, e.s <= 0 && (this.getColor.start = { h: 0, s: 1, b: e.b })), r.hex }, e.getColor.reset = function () { delete this.start }, e.parsePathString = function (t) { if (!t) return null; var r = Vt(t); if (r.arr) return Yt(r.arr); var i = { a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0 }, n = []; return e.is(t, Q) && e.is(t[0], Q) && (n = Yt(t)), n.length || I(t).replace(yt, function (t, e, r) { var a = [], s = e.toLowerCase(); if (r.replace(bt, function (t, e) { e && a.push(+e) }), "m" == s && a.length > 2 && (n.push([e][P](a.splice(0, 2))), s = "l", e = "m" == e ? "l" : "L"), "r" == s) n.push([e][P](a)); else for (; a.length >= i[s] && (n.push([e][P](a.splice(0, i[s]))), i[s]) ;); }), n.toString = e._path2string, r.arr = Yt(n), n }, e.parseTransformString = n(function (t) { if (!t) return null; var r = { r: 3, s: 4, t: 2, m: 6 }, i = []; return e.is(t, Q) && e.is(t[0], Q) && (i = Yt(t)), i.length || I(t).replace(mt, function (t, e, r) { var n = [], a = O.call(e); r.replace(bt, function (t, e) { e && n.push(+e) }), i.push([e][P](n)) }), i.toString = e._path2string, i }); var Vt = function (t) { var e = Vt.ps = Vt.ps || {}; return e[t] ? e[t].sleep = 100 : e[t] = { sleep: 100 }, setTimeout(function () { for (var r in e) e[A](r) && r != t && (e[r].sleep--, !e[r].sleep && delete e[r]) }), e[t] }; e.findDotsAtSegment = function (t, e, r, i, n, a, s, o, l) { var h = 1 - l, u = X(h, 3), c = X(h, 2), f = l * l, p = f * l, d = u * t + 3 * c * l * r + 3 * h * l * l * n + p * s, g = u * e + 3 * c * l * i + 3 * h * l * l * a + p * o, v = t + 2 * l * (r - t) + f * (n - 2 * r + t), x = e + 2 * l * (i - e) + f * (a - 2 * i + e), y = r + 2 * l * (n - r) + f * (s - 2 * n + r), m = i + 2 * l * (a - i) + f * (o - 2 * a + i), b = h * t + l * r, _ = h * e + l * i, w = h * n + l * s, k = h * a + l * o, B = 90 - 180 * Y.atan2(v - y, x - m) / U; return (v > y || x < m) && (B += 180), { x: d, y: g, m: { x: v, y: x }, n: { x: y, y: m }, start: { x: b, y: _ }, end: { x: w, y: k }, alpha: B } }, e.bezierBBox = function (t, r, i, n, a, s, o, l) { e.is(t, "array") || (t = [t, r, i, n, a, s, o, l]); var h = Zt.apply(null, t); return { x: h.min.x, y: h.min.y, x2: h.max.x, y2: h.max.y, width: h.max.x - h.min.x, height: h.max.y - h.min.y } }, e.isPointInsideBBox = function (t, e, r) { return e >= t.x && e <= t.x2 && r >= t.y && r <= t.y2 }, e.isBBoxIntersect = function (t, r) { var i = e.isPointInsideBBox; return i(r, t.x, t.y) || i(r, t.x2, t.y) || i(r, t.x, t.y2) || i(r, t.x2, t.y2) || i(t, r.x, r.y) || i(t, r.x2, r.y) || i(t, r.x, r.y2) || i(t, r.x2, r.y2) || (t.x < r.x2 && t.x > r.x || r.x < t.x2 && r.x > t.x) && (t.y < r.y2 && t.y > r.y || r.y < t.y2 && r.y > t.y) }, e.pathIntersection = function (t, e) { return d(t, e) }, e.pathIntersectionNumber = function (t, e) { return d(t, e, 1) }, e.isPointInsidePath = function (t, r, i) { var n = e.pathBBox(t); return e.isPointInsideBBox(n, r, i) && d(t, [["M", r, i], ["H", n.x2 + 10]], 1) % 2 == 1 }, e._removedFactory = function (e) { return function () { t("raphael.log", null, "Raphaël: you are calling to method “" + e + "” of removed object", e) } }; var Ot = e.pathBBox = function (t) { var e = Vt(t); if (e.bbox) return r(e.bbox); if (!t) return { x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0 }; t = Qt(t); for (var i = 0, n = 0, a = [], s = [], o, l = 0, h = t.length; l < h; l++) if (o = t[l], "M" == o[0]) i = o[1], n = o[2], a.push(i), s.push(n); else { var u = Zt(i, n, o[1], o[2], o[3], o[4], o[5], o[6]); a = a[P](u.min.x, u.max.x), s = s[P](u.min.y, u.max.y), i = o[5], n = o[6] } var c = G[z](0, a), f = G[z](0, s), p = W[z](0, a), d = W[z](0, s), g = p - c, v = d - f, x = { x: c, y: f, x2: p, y2: d, width: g, height: v, cx: c + g / 2, cy: f + v / 2 }; return e.bbox = r(x), x }, Yt = function (t) { var i = r(t); return i.toString = e._path2string, i }, Wt = e._pathToRelative = function (t) { var r = Vt(t); if (r.rel) return Yt(r.rel); e.is(t, Q) && e.is(t && t[0], Q) || (t = e.parsePathString(t)); var i = [], n = 0, a = 0, s = 0, o = 0, l = 0; "M" == t[0][0] && (n = t[0][1], a = t[0][2], s = n, o = a, l++, i.push(["M", n, a])); for (var h = l, u = t.length; h < u; h++) { var c = i[h] = [], f = t[h]; if (f[0] != O.call(f[0])) switch (c[0] = O.call(f[0]), c[0]) { case "a": c[1] = f[1], c[2] = f[2], c[3] = f[3], c[4] = f[4], c[5] = f[5], c[6] = +(f[6] - n).toFixed(3), c[7] = +(f[7] - a).toFixed(3); break; case "v": c[1] = +(f[1] - a).toFixed(3); break; case "m": s = f[1], o = f[2]; default: for (var p = 1, d = f.length; p < d; p++) c[p] = +(f[p] - (p % 2 ? n : a)).toFixed(3) } else { c = i[h] = [], "m" == f[0] && (s = f[1] + n, o = f[2] + a); for (var g = 0, v = f.length; g < v; g++) i[h][g] = f[g] } var x = i[h].length; switch (i[h][0]) { case "z": n = s, a = o; break; case "h": n += +i[h][x - 1]; break; case "v": a += +i[h][x - 1]; break; default: n += +i[h][x - 2], a += +i[h][x - 1] } } return i.toString = e._path2string, r.rel = Yt(i), i }, Gt = e._pathToAbsolute = function (t) { var r = Vt(t); if (r.abs) return Yt(r.abs); if (e.is(t, Q) && e.is(t && t[0], Q) || (t = e.parsePathString(t)), !t || !t.length) return [["M", 0, 0]]; var i = [], n = 0, a = 0, o = 0, l = 0, h = 0; "M" == t[0][0] && (n = +t[0][1], a = +t[0][2], o = n, l = a, h++, i[0] = ["M", n, a]); for (var u = 3 == t.length && "M" == t[0][0] && "R" == t[1][0].toUpperCase() && "Z" == t[2][0].toUpperCase(), c, f, p = h, d = t.length; p < d; p++) { if (i.push(c = []), f = t[p], f[0] != ct.call(f[0])) switch (c[0] = ct.call(f[0]), c[0]) { case "A": c[1] = f[1], c[2] = f[2], c[3] = f[3], c[4] = f[4], c[5] = f[5], c[6] = +(f[6] + n), c[7] = +(f[7] + a); break; case "V": c[1] = +f[1] + a; break; case "H": c[1] = +f[1] + n; break; case "R": for (var g = [n, a][P](f.slice(1)), v = 2, x = g.length; v < x; v++) g[v] = +g[v] + n, g[++v] = +g[v] + a; i.pop(), i = i[P](s(g, u)); break; case "M": o = +f[1] + n, l = +f[2] + a; default: for (v = 1, x = f.length; v < x; v++) c[v] = +f[v] + (v % 2 ? n : a) } else if ("R" == f[0]) g = [n, a][P](f.slice(1)), i.pop(), i = i[P](s(g, u)), c = ["R"][P](f.slice(-2)); else for (var y = 0, m = f.length; y < m; y++) c[y] = f[y]; switch (c[0]) { case "Z": n = o, a = l; break; case "H": n = c[1]; break; case "V": a = c[1]; break; case "M": o = c[c.length - 2], l = c[c.length - 1]; default: n = c[c.length - 2], a = c[c.length - 1] } } return i.toString = e._path2string, r.abs = Yt(i), i }, Ht = function (t, e, r, i) { return [t, e, r, i, r, i] }, Xt = function (t, e, r, i, n, a) { var s = 1 / 3, o = 2 / 3; return [s * t + o * r, s * e + o * i, s * n + o * r, s * a + o * i, n, a] }, Ut = function (t, e, r, i, a, s, o, l, h, u) { var c = 120 * U / 180, f = U / 180 * (+a || 0), p = [], d, g = n(function (t, e, r) { var i = t * Y.cos(r) - e * Y.sin(r), n = t * Y.sin(r) + e * Y.cos(r); return { x: i, y: n } }); if (u) S = u[0], A = u[1], B = u[2], C = u[3]; else { d = g(t, e, -f), t = d.x, e = d.y, d = g(l, h, -f), l = d.x, h = d.y; var v = Y.cos(U / 180 * a), x = Y.sin(U / 180 * a), y = (t - l) / 2, m = (e - h) / 2, b = y * y / (r * r) + m * m / (i * i); b > 1 && (b = Y.sqrt(b), r = b * r, i = b * i); var _ = r * r, w = i * i, k = (s == o ? -1 : 1) * Y.sqrt(H((_ * w - _ * m * m - w * y * y) / (_ * m * m + w * y * y))), B = k * r * m / i + (t + l) / 2, C = k * -i * y / r + (e + h) / 2, S = Y.asin(((e - C) / i).toFixed(9)), A = Y.asin(((h - C) / i).toFixed(9)); S = t < B ? U - S : S, A = l < B ? U - A : A, S < 0 && (S = 2 * U + S), A < 0 && (A = 2 * U + A), o && S > A && (S -= 2 * U), !o && A > S && (A -= 2 * U) } var T = A - S; if (H(T) > c) { var E = A, M = l, N = h; A = S + c * (o && A > S ? 1 : -1), l = B + r * Y.cos(A), h = C + i * Y.sin(A), p = Ut(l, h, r, i, a, 0, o, M, N, [A, E, B, C]) } T = A - S; var L = Y.cos(S), z = Y.sin(S), F = Y.cos(A), R = Y.sin(A), j = Y.tan(T / 4), I = 4 / 3 * r * j, D = 4 / 3 * i * j, V = [t, e], O = [t + I * z, e - D * L], W = [l + I * R, h - D * F], G = [l, h]; if (O[0] = 2 * V[0] - O[0], O[1] = 2 * V[1] - O[1], u) return [O, W, G][P](p); p = [O, W, G][P](p).join()[q](","); for (var X = [], $ = 0, Z = p.length; $ < Z; $++) X[$] = $ % 2 ? g(p[$ - 1], p[$], f).y : g(p[$], p[$ + 1], f).x; return X }, $t = function (t, e, r, i, n, a, s, o, l) { var h = 1 - l; return { x: X(h, 3) * t + 3 * X(h, 2) * l * r + 3 * h * l * l * n + X(l, 3) * s, y: X(h, 3) * e + 3 * X(h, 2) * l * i + 3 * h * l * l * a + X(l, 3) * o } }, Zt = n(function (t, e, r, i, n, a, s, o) { var l = n - 2 * r + t - (s - 2 * n + r), h = 2 * (r - t) - 2 * (n - r), u = t - r, c = (-h + Y.sqrt(h * h - 4 * l * u)) / 2 / l, f = (-h - Y.sqrt(h * h - 4 * l * u)) / 2 / l, p = [e, o], d = [t, s], g; return H(c) > "1e12" && (c = .5), H(f) > "1e12" && (f = .5), c > 0 && c < 1 && (g = $t(t, e, r, i, n, a, s, o, c), d.push(g.x), p.push(g.y)), f > 0 && f < 1 && (g = $t(t, e, r, i, n, a, s, o, f), d.push(g.x), p.push(g.y)), l = a - 2 * i + e - (o - 2 * a + i), h = 2 * (i - e) - 2 * (a - i), u = e - i, c = (-h + Y.sqrt(h * h - 4 * l * u)) / 2 / l, f = (-h - Y.sqrt(h * h - 4 * l * u)) / 2 / l, H(c) > "1e12" && (c = .5), H(f) > "1e12" && (f = .5), c > 0 && c < 1 && (g = $t(t, e, r, i, n, a, s, o, c), d.push(g.x), p.push(g.y)), f > 0 && f < 1 && (g = $t(t, e, r, i, n, a, s, o, f), d.push(g.x), p.push(g.y)), { min: { x: G[z](0, d), y: G[z](0, p) }, max: { x: W[z](0, d), y: W[z](0, p) } } }), Qt = e._path2curve = n(function (t, e) { var r = !e && Vt(t); if (!e && r.curve) return Yt(r.curve); for (var i = Gt(t), n = e && Gt(e), a = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, s = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, o = (function (t, e, r) { var i, n, a = { T: 1, Q: 1 }; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in a) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"][P](Ut[z](0, [e.x, e.y][P](t.slice(1)))); break; case "S": "C" == r || "S" == r ? (i = 2 * e.x - e.bx, n = 2 * e.y - e.by) : (i = e.x, n = e.y), t = ["C", i, n][P](t.slice(1)); break; case "T": "Q" == r || "T" == r ? (e.qx = 2 * e.x - e.qx, e.qy = 2 * e.y - e.qy) : (e.qx = e.x, e.qy = e.y), t = ["C"][P](Xt(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"][P](Xt(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"][P](Ht(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"][P](Ht(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"][P](Ht(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"][P](Ht(e.x, e.y, e.X, e.Y)) } return t }), l = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var r = t[e]; r.length;) u[e] = "A", n && (c[e] = "A"), t.splice(e++, 0, ["C"][P](r.splice(0, 6))); t.splice(e, 1), g = W(i.length, n && n.length || 0) } }, h = function (t, e, r, a, s) { t && e && "M" == t[s][0] && "M" != e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), r.bx = 0, r.by = 0, r.x = t[s][1], r.y = t[s][2], g = W(i.length, n && n.length || 0)) }, u = [], c = [], f = "", p = "", d = 0, g = W(i.length, n && n.length || 0) ; d < g; d++) { i[d] && (f = i[d][0]), "C" != f && (u[d] = f, d && (p = u[d - 1])), i[d] = o(i[d], a, p), "A" != u[d] && "C" == f && (u[d] = "C"), l(i, d), n && (n[d] && (f = n[d][0]), "C" != f && (c[d] = f, d && (p = c[d - 1])), n[d] = o(n[d], s, p), "A" != c[d] && "C" == f && (c[d] = "C"), l(n, d)), h(i, n, a, s, d), h(n, i, s, a, d); var v = i[d], x = n && n[d], y = v.length, m = n && x.length; a.x = v[y - 2], a.y = v[y - 1], a.bx = ht(v[y - 4]) || a.x, a.by = ht(v[y - 3]) || a.y, s.bx = n && (ht(x[m - 4]) || s.x), s.by = n && (ht(x[m - 3]) || s.y), s.x = n && x[m - 2], s.y = n && x[m - 1] } return n || (r.curve = Yt(i)), n ? [i, n] : i }, null, Yt), Jt = e._parseDots = n(function (t) { for (var r = [], i = 0, n = t.length; i < n; i++) { var a = {}, s = t[i].match(/^([^:]*):?([\d\.]*)/); if (a.color = e.getRGB(s[1]), a.color.error) return null; a.opacity = a.color.opacity, a.color = a.color.hex, s[2] && (a.offset = s[2] + "%"), r.push(a) } for (i = 1, n = r.length - 1; i < n; i++) if (!r[i].offset) { for (var o = ht(r[i - 1].offset || 0), l = 0, h = i + 1; h < n; h++) if (r[h].offset) { l = r[h].offset; break } l || (l = 100, h = n), l = ht(l); for (var u = (l - o) / (h - i + 1) ; i < h; i++) o += u, r[i].offset = o + "%" } return r }), Kt = e._tear = function (t, e) { t == e.top && (e.top = t.prev), t == e.bottom && (e.bottom = t.next), t.next && (t.next.prev = t.prev), t.prev && (t.prev.next = t.next) }, te = e._tofront = function (t, e) { e.top !== t && (Kt(t, e), t.next = null, t.prev = e.top, e.top.next = t, e.top = t) }, ee = e._toback = function (t, e) { e.bottom !== t && (Kt(t, e), t.next = e.bottom, t.prev = null, e.bottom.prev = t, e.bottom = t) }, re = e._insertafter = function (t, e, r) { Kt(t, r), e == r.top && (r.top = t), e.next && (e.next.prev = t), t.next = e.next, t.prev = e, e.next = t }, ie = e._insertbefore = function (t, e, r) { Kt(t, r), e == r.bottom && (r.bottom = t), e.prev && (e.prev.next = t), t.prev = e.prev, e.prev = t, t.next = e }, ne = e.toMatrix = function (t, e) { var r = Ot(t), i = { _: { transform: R }, getBBox: function () { return r } }; return se(i, e), i.matrix }, ae = e.transformPath = function (t, e) { return Mt(t, ne(t, e)) }, se = e._extractTransform = function (t, r) { if (null == r) return t._.transform; r = I(r).replace(/\.{3}|\u2026/g, t._.transform || R); var i = e.parseTransformString(r), n = 0, a = 0, s = 0, o = 1, l = 1, h = t._, u = new g; if (h.transform = i || [], i) for (var c = 0, f = i.length; c < f; c++) { var p = i[c], d = p.length, v = I(p[0]).toLowerCase(), x = p[0] != v, y = x ? u.invert() : 0, m, b, _, w, k; "t" == v && 3 == d ? x ? (m = y.x(0, 0), b = y.y(0, 0), _ = y.x(p[1], p[2]), w = y.y(p[1], p[2]), u.translate(_ - m, w - b)) : u.translate(p[1], p[2]) : "r" == v ? 2 == d ? (k = k || t.getBBox(1), u.rotate(p[1], k.x + k.width / 2, k.y + k.height / 2), n += p[1]) : 4 == d && (x ? (_ = y.x(p[2], p[3]), w = y.y(p[2], p[3]), u.rotate(p[1], _, w)) : u.rotate(p[1], p[2], p[3]), n += p[1]) : "s" == v ? 2 == d || 3 == d ? (k = k || t.getBBox(1), u.scale(p[1], p[d - 1], k.x + k.width / 2, k.y + k.height / 2), o *= p[1], l *= p[d - 1]) : 5 == d && (x ? (_ = y.x(p[3], p[4]), w = y.y(p[3], p[4]), u.scale(p[1], p[2], _, w)) : u.scale(p[1], p[2], p[3], p[4]), o *= p[1], l *= p[2]) : "m" == v && 7 == d && u.add(p[1], p[2], p[3], p[4], p[5], p[6]), h.dirtyT = 1, t.matrix = u } t.matrix = u, h.sx = o, h.sy = l, h.deg = n, h.dx = a = u.e, h.dy = s = u.f, 1 == o && 1 == l && !n && h.bbox ? (h.bbox.x += +a, h.bbox.y += +s) : h.dirtyT = 1 }, oe = function (t) { var e = t[0]; switch (e.toLowerCase()) { case "t": return [e, 0, 0]; case "m": return [e, 1, 0, 0, 1, 0, 0]; case "r": return 4 == t.length ? [e, 0, t[2], t[3]] : [e, 0]; case "s": return 5 == t.length ? [e, 1, 1, t[3], t[4]] : 3 == t.length ? [e, 1, 1] : [e, 1] } }, le = e._equaliseTransform = function (t, r) { r = I(r).replace(/\.{3}|\u2026/g, t), t = e.parseTransformString(t) || [], r = e.parseTransformString(r) || []; for (var i = W(t.length, r.length), n = [], a = [], s = 0, o, l, h, u; s < i; s++) { if (h = t[s] || oe(r[s]), u = r[s] || oe(h), h[0] != u[0] || "r" == h[0].toLowerCase() && (h[2] != u[2] || h[3] != u[3]) || "s" == h[0].toLowerCase() && (h[3] != u[3] || h[4] != u[4])) return; for (n[s] = [], a[s] = [], o = 0, l = W(h.length, u.length) ; o < l; o++) o in h && (n[s][o] = h[o]), o in u && (a[s][o] = u[o]) } return { from: n, to: a } }; e._getContainer = function (t, r, i, n) { var a; if (a = null != n || e.is(t, "object") ? t : T.doc.getElementById(t), null != a) return a.tagName ? null == r ? { container: a, width: a.style.pixelWidth || a.offsetWidth, height: a.style.pixelHeight || a.offsetHeight } : { container: a, width: r, height: i } : { container: 1, x: t, y: r, width: i, height: n } }, e.pathToRelative = Wt, e._engine = {}, e.path2curve = Qt, e.matrix = function (t, e, r, i, n, a) { return new g(t, e, r, i, n, a) }, function (t) {
                function r(t) { return t[0] * t[0] + t[1] * t[1] } function i(t) { var e = Y.sqrt(r(t)); t[0] && (t[0] /= e), t[1] && (t[1] /= e) } t.add = function (t, e, r, i, n, a) { var s = [[], [], []], o = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]], l = [[t, r, n], [e, i, a], [0, 0, 1]], h, u, c, f; for (t && t instanceof g && (l = [[t.a, t.c, t.e], [t.b, t.d, t.f], [0, 0, 1]]), h = 0; h < 3; h++) for (u = 0; u < 3; u++) { for (f = 0, c = 0; c < 3; c++) f += o[h][c] * l[c][u]; s[h][u] = f } this.a = s[0][0], this.b = s[1][0], this.c = s[0][1], this.d = s[1][1], this.e = s[0][2], this.f = s[1][2] }, t.invert = function () { var t = this, e = t.a * t.d - t.b * t.c; return new g(t.d / e, -t.b / e, -t.c / e, t.a / e, (t.c * t.f - t.d * t.e) / e, (t.b * t.e - t.a * t.f) / e) }, t.clone = function () { return new g(this.a, this.b, this.c, this.d, this.e, this.f) }, t.translate = function (t, e) {
                    this.add(1, 0, 0, 1, t, e)
                }, t.scale = function (t, e, r, i) { null == e && (e = t), (r || i) && this.add(1, 0, 0, 1, r, i), this.add(t, 0, 0, e, 0, 0), (r || i) && this.add(1, 0, 0, 1, -r, -i) }, t.rotate = function (t, r, i) { t = e.rad(t), r = r || 0, i = i || 0; var n = +Y.cos(t).toFixed(9), a = +Y.sin(t).toFixed(9); this.add(n, a, -a, n, r, i), this.add(1, 0, 0, 1, -r, -i) }, t.x = function (t, e) { return t * this.a + e * this.c + this.e }, t.y = function (t, e) { return t * this.b + e * this.d + this.f }, t.get = function (t) { return +this[I.fromCharCode(97 + t)].toFixed(4) }, t.toString = function () { return e.svg ? "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" : [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join() }, t.toFilter = function () { return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) + ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) + ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')" }, t.offset = function () { return [this.e.toFixed(4), this.f.toFixed(4)] }, t.split = function () { var t = {}; t.dx = this.e, t.dy = this.f; var n = [[this.a, this.c], [this.b, this.d]]; t.scalex = Y.sqrt(r(n[0])), i(n[0]), t.shear = n[0][0] * n[1][0] + n[0][1] * n[1][1], n[1] = [n[1][0] - n[0][0] * t.shear, n[1][1] - n[0][1] * t.shear], t.scaley = Y.sqrt(r(n[1])), i(n[1]), t.shear /= t.scaley; var a = -n[0][1], s = n[1][1]; return s < 0 ? (t.rotate = e.deg(Y.acos(s)), a < 0 && (t.rotate = 360 - t.rotate)) : t.rotate = e.deg(Y.asin(a)), t.isSimple = !(+t.shear.toFixed(9) || t.scalex.toFixed(9) != t.scaley.toFixed(9) && t.rotate), t.isSuperSimple = !+t.shear.toFixed(9) && t.scalex.toFixed(9) == t.scaley.toFixed(9) && !t.rotate, t.noRotation = !+t.shear.toFixed(9) && !t.rotate, t }, t.toTransformString = function (t) { var e = t || this[q](); return e.isSimple ? (e.scalex = +e.scalex.toFixed(4), e.scaley = +e.scaley.toFixed(4), e.rotate = +e.rotate.toFixed(4), (e.dx || e.dy ? "t" + [e.dx, e.dy] : R) + (1 != e.scalex || 1 != e.scaley ? "s" + [e.scalex, e.scaley, 0, 0] : R) + (e.rotate ? "r" + [e.rotate, 0, 0] : R)) : "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)] }
            }(g.prototype); for (var he = function () { this.returnValue = !1 }, ue = function () { return this.originalEvent.preventDefault() }, ce = function () { this.cancelBubble = !0 }, fe = function () { return this.originalEvent.stopPropagation() }, pe = function (t) { var e = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, r = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft; return { x: t.clientX + r, y: t.clientY + e } }, de = function () { return T.doc.addEventListener ? function (t, e, r, i) { var n = function (t) { var e = pe(t); return r.call(i, t, e.x, e.y) }; if (t.addEventListener(e, n, !1), F && V[e]) { var a = function (e) { for (var n = pe(e), a = e, s = 0, o = e.targetTouches && e.targetTouches.length; s < o; s++) if (e.targetTouches[s].target == t) { e = e.targetTouches[s], e.originalEvent = a, e.preventDefault = ue, e.stopPropagation = fe; break } return r.call(i, e, n.x, n.y) }; t.addEventListener(V[e], a, !1) } return function () { return t.removeEventListener(e, n, !1), F && V[e] && t.removeEventListener(V[e], a, !1), !0 } } : T.doc.attachEvent ? function (t, e, r, i) { var n = function (t) { t = t || T.win.event; var e = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, n = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft, a = t.clientX + n, s = t.clientY + e; return t.preventDefault = t.preventDefault || he, t.stopPropagation = t.stopPropagation || ce, r.call(i, t, a, s) }; t.attachEvent("on" + e, n); var a = function () { return t.detachEvent("on" + e, n), !0 }; return a } : void 0 }(), ge = [], ve = function (e) { for (var r = e.clientX, i = e.clientY, n = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, a = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft, s, o = ge.length; o--;) { if (s = ge[o], F && e.touches) { for (var l = e.touches.length, h; l--;) if (h = e.touches[l], h.identifier == s.el._drag.id) { r = h.clientX, i = h.clientY, (e.originalEvent ? e.originalEvent : e).preventDefault(); break } } else e.preventDefault(); var u = s.el.node, c, f = u.nextSibling, p = u.parentNode, d = u.style.display; T.win.opera && p.removeChild(u), u.style.display = "none", c = s.el.paper.getElementByPoint(r, i), u.style.display = d, T.win.opera && (f ? p.insertBefore(u, f) : p.appendChild(u)), c && t("raphael.drag.over." + s.el.id, s.el, c), r += a, i += n, t("raphael.drag.move." + s.el.id, s.move_scope || s.el, r - s.el._drag.x, i - s.el._drag.y, r, i, e) } }, xe = function (r) { e.unmousemove(ve).unmouseup(xe); for (var i = ge.length, n; i--;) n = ge[i], n.el._drag = {}, t("raphael.drag.end." + n.el.id, n.end_scope || n.start_scope || n.move_scope || n.el, r); ge = [] }, ye = e.el = {}, me = D.length; me--;) !function (t) { e[t] = ye[t] = function (r, i) { return e.is(r, "function") && (this.events = this.events || [], this.events.push({ name: t, f: r, unbind: de(this.shape || this.node || T.doc, t, r, i || this) })), this }, e["un" + t] = ye["un" + t] = function (r) { for (var i = this.events || [], n = i.length; n--;) i[n].name != t || !e.is(r, "undefined") && i[n].f != r || (i[n].unbind(), i.splice(n, 1), !i.length && delete this.events); return this } }(D[me]); ye.data = function (r, i) { var n = wt[this.id] = wt[this.id] || {}; if (0 == arguments.length) return n; if (1 == arguments.length) { if (e.is(r, "object")) { for (var a in r) r[A](a) && this.data(a, r[a]); return this } return t("raphael.data.get." + this.id, this, n[r], r), n[r] } return n[r] = i, t("raphael.data.set." + this.id, this, i, r), this }, ye.removeData = function (t) { return null == t ? wt[this.id] = {} : wt[this.id] && delete wt[this.id][t], this }, ye.getData = function () { return r(wt[this.id] || {}) }, ye.hover = function (t, e, r, i) { return this.mouseover(t, r).mouseout(e, i || r) }, ye.unhover = function (t, e) { return this.unmouseover(t).unmouseout(e) }; var be = []; ye.drag = function (r, i, n, a, s, o) { function l(l) { (l.originalEvent || l).preventDefault(); var h = l.clientX, u = l.clientY, c = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, f = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft; if (this._drag.id = l.identifier, F && l.touches) for (var p = l.touches.length, d; p--;) if (d = l.touches[p], this._drag.id = d.identifier, d.identifier == this._drag.id) { h = d.clientX, u = d.clientY; break } this._drag.x = h + f, this._drag.y = u + c, !ge.length && e.mousemove(ve).mouseup(xe), ge.push({ el: this, move_scope: a, start_scope: s, end_scope: o }), i && t.on("raphael.drag.start." + this.id, i), r && t.on("raphael.drag.move." + this.id, r), n && t.on("raphael.drag.end." + this.id, n), t("raphael.drag.start." + this.id, s || a || this, l.clientX + f, l.clientY + c, l) } return this._drag = {}, be.push({ el: this, start: l }), this.mousedown(l), this }, ye.onDragOver = function (e) { e ? t.on("raphael.drag.over." + this.id, e) : t.unbind("raphael.drag.over." + this.id) }, ye.undrag = function () { for (var r = be.length; r--;) be[r].el == this && (this.unmousedown(be[r].start), be.splice(r, 1), t.unbind("raphael.drag.*." + this.id)); !be.length && e.unmousemove(ve).unmouseup(xe), ge = [] }, N.circle = function (t, r, i) { var n = e._engine.circle(this, t || 0, r || 0, i || 0); return this.__set__ && this.__set__.push(n), n }, N.rect = function (t, r, i, n, a) { var s = e._engine.rect(this, t || 0, r || 0, i || 0, n || 0, a || 0); return this.__set__ && this.__set__.push(s), s }, N.ellipse = function (t, r, i, n) { var a = e._engine.ellipse(this, t || 0, r || 0, i || 0, n || 0); return this.__set__ && this.__set__.push(a), a }, N.path = function (t) { t && !e.is(t, Z) && !e.is(t[0], Q) && (t += R); var r = e._engine.path(e.format[z](e, arguments), this); return this.__set__ && this.__set__.push(r), r }, N.image = function (t, r, i, n, a) { var s = e._engine.image(this, t || "about:blank", r || 0, i || 0, n || 0, a || 0); return this.__set__ && this.__set__.push(s), s }, N.text = function (t, r, i) { var n = e._engine.text(this, t || 0, r || 0, I(i)); return this.__set__ && this.__set__.push(n), n }, N.set = function (t) { !e.is(t, "array") && (t = Array.prototype.splice.call(arguments, 0, arguments.length)); var r = new ze(t); return this.__set__ && this.__set__.push(r), r.paper = this, r.type = "set", r }, N.setStart = function (t) { this.__set__ = t || this.set() }, N.setFinish = function (t) { var e = this.__set__; return delete this.__set__, e }, N.getSize = function () { var t = this.canvas.parentNode; return { width: t.offsetWidth, height: t.offsetHeight } }, N.setSize = function (t, r) { return e._engine.setSize.call(this, t, r) }, N.setViewBox = function (t, r, i, n, a) { return e._engine.setViewBox.call(this, t, r, i, n, a) }, N.top = N.bottom = null, N.raphael = e; var _e = function (t) { var e = t.getBoundingClientRect(), r = t.ownerDocument, i = r.body, n = r.documentElement, a = n.clientTop || i.clientTop || 0, s = n.clientLeft || i.clientLeft || 0, o = e.top + (T.win.pageYOffset || n.scrollTop || i.scrollTop) - a, l = e.left + (T.win.pageXOffset || n.scrollLeft || i.scrollLeft) - s; return { y: o, x: l } }; N.getElementByPoint = function (t, e) { var r = this, i = r.canvas, n = T.doc.elementFromPoint(t, e); if (T.win.opera && "svg" == n.tagName) { var a = _e(i), s = i.createSVGRect(); s.x = t - a.x, s.y = e - a.y, s.width = s.height = 1; var o = i.getIntersectionList(s, null); o.length && (n = o[o.length - 1]) } if (!n) return null; for (; n.parentNode && n != i.parentNode && !n.raphael;) n = n.parentNode; return n == r.canvas.parentNode && (n = i), n = n && n.raphael ? r.getById(n.raphaelid) : null }, N.getElementsByBBox = function (t) { var r = this.set(); return this.forEach(function (i) { e.isBBoxIntersect(i.getBBox(), t) && r.push(i) }), r }, N.getById = function (t) { for (var e = this.bottom; e;) { if (e.id == t) return e; e = e.next } return null }, N.forEach = function (t, e) { for (var r = this.bottom; r;) { if (t.call(e, r) === !1) return this; r = r.next } return this }, N.getElementsByPoint = function (t, e) { var r = this.set(); return this.forEach(function (i) { i.isPointInside(t, e) && r.push(i) }), r }, ye.isPointInside = function (t, r) { var i = this.realPath = Et[this.type](this); return this.attr("transform") && this.attr("transform").length && (i = e.transformPath(i, this.attr("transform"))), e.isPointInsidePath(i, t, r) }, ye.getBBox = function (t) { if (this.removed) return {}; var e = this._; return t ? (!e.dirty && e.bboxwt || (this.realPath = Et[this.type](this), e.bboxwt = Ot(this.realPath), e.bboxwt.toString = x, e.dirty = 0), e.bboxwt) : ((e.dirty || e.dirtyT || !e.bbox) && (!e.dirty && this.realPath || (e.bboxwt = 0, this.realPath = Et[this.type](this)), e.bbox = Ot(Mt(this.realPath, this.matrix)), e.bbox.toString = x, e.dirty = e.dirtyT = 0), e.bbox) }, ye.clone = function () { if (this.removed) return null; var t = this.paper[this.type]().attr(this.attr()); return this.__set__ && this.__set__.push(t), t }, ye.glow = function (t) { if ("text" == this.type) return null; t = t || {}; var e = { width: (t.width || 10) + (+this.attr("stroke-width") || 1), fill: t.fill || !1, opacity: null == t.opacity ? .5 : t.opacity, offsetx: t.offsetx || 0, offsety: t.offsety || 0, color: t.color || "#000" }, r = e.width / 2, i = this.paper, n = i.set(), a = this.realPath || Et[this.type](this); a = this.matrix ? Mt(a, this.matrix) : a; for (var s = 1; s < r + 1; s++) n.push(i.path(a).attr({ stroke: e.color, fill: e.fill ? e.color : "none", "stroke-linejoin": "round", "stroke-linecap": "round", "stroke-width": +(e.width / r * s).toFixed(3), opacity: +(e.opacity / r).toFixed(3) })); return n.insertBefore(this).translate(e.offsetx, e.offsety) }; var we = {}, ke = function (t, r, i, n, a, s, o, u, c) { return null == c ? l(t, r, i, n, a, s, o, u) : e.findDotsAtSegment(t, r, i, n, a, s, o, u, h(t, r, i, n, a, s, o, u, c)) }, Be = function (t, r) { return function (i, n, a) { i = Qt(i); for (var s, o, l, h, u = "", c = {}, f, p = 0, d = 0, g = i.length; d < g; d++) { if (l = i[d], "M" == l[0]) s = +l[1], o = +l[2]; else { if (h = ke(s, o, l[1], l[2], l[3], l[4], l[5], l[6]), p + h > n) { if (r && !c.start) { if (f = ke(s, o, l[1], l[2], l[3], l[4], l[5], l[6], n - p), u += ["C" + f.start.x, f.start.y, f.m.x, f.m.y, f.x, f.y], a) return u; c.start = u, u = ["M" + f.x, f.y + "C" + f.n.x, f.n.y, f.end.x, f.end.y, l[5], l[6]].join(), p += h, s = +l[5], o = +l[6]; continue } if (!t && !r) return f = ke(s, o, l[1], l[2], l[3], l[4], l[5], l[6], n - p), { x: f.x, y: f.y, alpha: f.alpha } } p += h, s = +l[5], o = +l[6] } u += l.shift() + l } return c.end = u, f = t ? p : r ? c : e.findDotsAtSegment(s, o, l[0], l[1], l[2], l[3], l[4], l[5], 1), f.alpha && (f = { x: f.x, y: f.y, alpha: f.alpha }), f } }, Ce = Be(1), Se = Be(), Ae = Be(0, 1); e.getTotalLength = Ce, e.getPointAtLength = Se, e.getSubpath = function (t, e, r) { if (this.getTotalLength(t) - r < 1e-6) return Ae(t, e).end; var i = Ae(t, r, 1); return e ? Ae(i, e).end : i }, ye.getTotalLength = function () { var t = this.getPath(); if (t) return this.node.getTotalLength ? this.node.getTotalLength() : Ce(t) }, ye.getPointAtLength = function (t) { var e = this.getPath(); if (e) return Se(e, t) }, ye.getPath = function () { var t, r = e._getPath[this.type]; if ("text" != this.type && "set" != this.type) return r && (t = r(this)), t }, ye.getSubpath = function (t, r) { var i = this.getPath(); if (i) return e.getSubpath(i, t, r) }; var Te = e.easing_formulas = { linear: function (t) { return t }, "<": function (t) { return X(t, 1.7) }, ">": function (t) { return X(t, .48) }, "<>": function (t) { var e = .48 - t / 1.04, r = Y.sqrt(.1734 + e * e), i = r - e, n = X(H(i), 1 / 3) * (i < 0 ? -1 : 1), a = -r - e, s = X(H(a), 1 / 3) * (a < 0 ? -1 : 1), o = n + s + .5; return 3 * (1 - o) * o * o + o * o * o }, backIn: function (t) { var e = 1.70158; return t * t * ((e + 1) * t - e) }, backOut: function (t) { t -= 1; var e = 1.70158; return t * t * ((e + 1) * t + e) + 1 }, elastic: function (t) { return t == !!t ? t : X(2, -10 * t) * Y.sin((t - .075) * (2 * U) / .3) + 1 }, bounce: function (t) { var e = 7.5625, r = 2.75, i; return t < 1 / r ? i = e * t * t : t < 2 / r ? (t -= 1.5 / r, i = e * t * t + .75) : t < 2.5 / r ? (t -= 2.25 / r, i = e * t * t + .9375) : (t -= 2.625 / r, i = e * t * t + .984375), i } }; Te.easeIn = Te["ease-in"] = Te["<"], Te.easeOut = Te["ease-out"] = Te[">"], Te.easeInOut = Te["ease-in-out"] = Te["<>"], Te["back-in"] = Te.backIn, Te["back-out"] = Te.backOut; var Ee = [], Me = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (t) { setTimeout(t, 16) }, Ne = function () { for (var r = +new Date, i = 0; i < Ee.length; i++) { var n = Ee[i]; if (!n.el.removed && !n.paused) { var a = r - n.start, s = n.ms, o = n.easing, l = n.from, h = n.diff, u = n.to, c = n.t, f = n.el, p = {}, d, g = {}, v; if (n.initstatus ? (a = (n.initstatus * n.anim.top - n.prev) / (n.percent - n.prev) * s, n.status = n.initstatus, delete n.initstatus, n.stop && Ee.splice(i--, 1)) : n.status = (n.prev + (n.percent - n.prev) * (a / s)) / n.anim.top, !(a < 0)) if (a < s) { var x = o(a / s); for (var y in l) if (l[A](y)) { switch (pt[y]) { case $: d = +l[y] + x * s * h[y]; break; case "colour": d = "rgb(" + [Le(ot(l[y].r + x * s * h[y].r)), Le(ot(l[y].g + x * s * h[y].g)), Le(ot(l[y].b + x * s * h[y].b))].join(",") + ")"; break; case "path": d = []; for (var m = 0, _ = l[y].length; m < _; m++) { d[m] = [l[y][m][0]]; for (var w = 1, k = l[y][m].length; w < k; w++) d[m][w] = +l[y][m][w] + x * s * h[y][m][w]; d[m] = d[m].join(j) } d = d.join(j); break; case "transform": if (h[y].real) for (d = [], m = 0, _ = l[y].length; m < _; m++) for (d[m] = [l[y][m][0]], w = 1, k = l[y][m].length; w < k; w++) d[m][w] = l[y][m][w] + x * s * h[y][m][w]; else { var B = function (t) { return +l[y][t] + x * s * h[y][t] }; d = [["m", B(0), B(1), B(2), B(3), B(4), B(5)]] } break; case "csv": if ("clip-rect" == y) for (d = [], m = 4; m--;) d[m] = +l[y][m] + x * s * h[y][m]; break; default: var C = [][P](l[y]); for (d = [], m = f.paper.customAttributes[y].length; m--;) d[m] = +C[m] + x * s * h[y][m] } p[y] = d } f.attr(p), function (e, r, i) { setTimeout(function () { t("raphael.anim.frame." + e, r, i) }) }(f.id, f, n.anim) } else { if (function (r, i, n) { setTimeout(function () { t("raphael.anim.frame." + i.id, i, n), t("raphael.anim.finish." + i.id, i, n), e.is(r, "function") && r.call(i) }) }(n.callback, f, n.anim), f.attr(u), Ee.splice(i--, 1), n.repeat > 1 && !n.next) { for (v in u) u[A](v) && (g[v] = n.totalOrigin[v]); n.el.attr(g), b(n.anim, n.el, n.anim.percents[0], null, n.totalOrigin, n.repeat - 1) } n.next && !n.stop && b(n.anim, n.el, n.next, null, n.totalOrigin, n.repeat) } } } Ee.length && Me(Ne) }, Le = function (t) { return t > 255 ? 255 : t < 0 ? 0 : t }; ye.animateWith = function (t, r, i, n, a, s) { var o = this; if (o.removed) return s && s.call(o), o; var l = i instanceof m ? i : e.animation(i, n, a, s), h, u; b(l, o, l.percents[0], null, o.attr()); for (var c = 0, f = Ee.length; c < f; c++) if (Ee[c].anim == r && Ee[c].el == t) { Ee[f - 1].start = Ee[c].start; break } return o }, ye.onAnimation = function (e) { return e ? t.on("raphael.anim.frame." + this.id, e) : t.unbind("raphael.anim.frame." + this.id), this }, m.prototype.delay = function (t) { var e = new m(this.anim, this.ms); return e.times = this.times, e.del = +t || 0, e }, m.prototype.repeat = function (t) { var e = new m(this.anim, this.ms); return e.del = this.del, e.times = Y.floor(W(t, 0)) || 1, e }, e.animation = function (t, r, i, n) { if (t instanceof m) return t; !e.is(i, "function") && i || (n = n || i || null, i = null), t = Object(t), r = +r || 0; var a = {}, s, o; for (o in t) t[A](o) && ht(o) != o && ht(o) + "%" != o && (s = !0, a[o] = t[o]); if (s) return i && (a.easing = i), n && (a.callback = n), new m({ 100: a }, r); if (n) { var l = 0; for (var h in t) { var u = ut(h); t[A](h) && u > l && (l = u) } l += "%", !t[l].callback && (t[l].callback = n) } return new m(t, r) }, ye.animate = function (t, r, i, n) { var a = this; if (a.removed) return n && n.call(a), a; var s = t instanceof m ? t : e.animation(t, r, i, n); return b(s, a, s.percents[0], null, a.attr()), a }, ye.setTime = function (t, e) { return t && null != e && this.status(t, G(e, t.ms) / t.ms), this }, ye.status = function (t, e) { var r = [], i = 0, n, a; if (null != e) return b(t, this, -1, G(e, 1)), this; for (n = Ee.length; i < n; i++) if (a = Ee[i], a.el.id == this.id && (!t || a.anim == t)) { if (t) return a.status; r.push({ anim: a.anim, status: a.status }) } return t ? 0 : r }, ye.pause = function (e) { for (var r = 0; r < Ee.length; r++) Ee[r].el.id != this.id || e && Ee[r].anim != e || t("raphael.anim.pause." + this.id, this, Ee[r].anim) !== !1 && (Ee[r].paused = !0); return this }, ye.resume = function (e) { for (var r = 0; r < Ee.length; r++) if (Ee[r].el.id == this.id && (!e || Ee[r].anim == e)) { var i = Ee[r]; t("raphael.anim.resume." + this.id, this, i.anim) !== !1 && (delete i.paused, this.status(i.anim, i.status)) } return this }, ye.stop = function (e) { for (var r = 0; r < Ee.length; r++) Ee[r].el.id != this.id || e && Ee[r].anim != e || t("raphael.anim.stop." + this.id, this, Ee[r].anim) !== !1 && Ee.splice(r--, 1); return this }, t.on("raphael.remove", _), t.on("raphael.clear", _), ye.toString = function () { return "Raphaël’s object" }; var ze = function (t) { if (this.items = [], this.length = 0, this.type = "set", t) for (var e = 0, r = t.length; e < r; e++) !t[e] || t[e].constructor != ye.constructor && t[e].constructor != ze || (this[this.items.length] = this.items[this.items.length] = t[e], this.length++) }, Pe = ze.prototype; Pe.push = function () { for (var t, e, r = 0, i = arguments.length; r < i; r++) t = arguments[r], !t || t.constructor != ye.constructor && t.constructor != ze || (e = this.items.length, this[e] = this.items[e] = t, this.length++); return this }, Pe.pop = function () { return this.length && delete this[this.length--], this.items.pop() }, Pe.forEach = function (t, e) { for (var r = 0, i = this.items.length; r < i; r++) if (t.call(e, this.items[r], r) === !1) return this; return this }; for (var Fe in ye) ye[A](Fe) && (Pe[Fe] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t][z](r, e) }) } }(Fe)); return Pe.attr = function (t, r) { if (t && e.is(t, Q) && e.is(t[0], "object")) for (var i = 0, n = t.length; i < n; i++) this.items[i].attr(t[i]); else for (var a = 0, s = this.items.length; a < s; a++) this.items[a].attr(t, r); return this }, Pe.clear = function () { for (; this.length;) this.pop() }, Pe.splice = function (t, e, r) { t = t < 0 ? W(this.length + t, 0) : t, e = W(0, G(this.length - t, e)); var i = [], n = [], a = [], s; for (s = 2; s < arguments.length; s++) a.push(arguments[s]); for (s = 0; s < e; s++) n.push(this[t + s]); for (; s < this.length - t; s++) i.push(this[t + s]); var o = a.length; for (s = 0; s < o + i.length; s++) this.items[t + s] = this[t + s] = s < o ? a[s] : i[s - o]; for (s = this.items.length = this.length -= e - o; this[s];) delete this[s++]; return new ze(n) }, Pe.exclude = function (t) { for (var e = 0, r = this.length; e < r; e++) if (this[e] == t) return this.splice(e, 1), !0 }, Pe.animate = function (t, r, i, n) { (e.is(i, "function") || !i) && (n = i || null); var a = this.items.length, s = a, o, l = this, h; if (!a) return this; n && (h = function () { !--a && n.call(l) }), i = e.is(i, Z) ? i : h; var u = e.animation(t, r, i, h); for (o = this.items[--s].animate(u) ; s--;) this.items[s] && !this.items[s].removed && this.items[s].animateWith(o, u, u), this.items[s] && !this.items[s].removed || a--; return this }, Pe.insertAfter = function (t) { for (var e = this.items.length; e--;) this.items[e].insertAfter(t); return this }, Pe.getBBox = function () { for (var t = [], e = [], r = [], i = [], n = this.items.length; n--;) if (!this.items[n].removed) { var a = this.items[n].getBBox(); t.push(a.x), e.push(a.y), r.push(a.x + a.width), i.push(a.y + a.height) } return t = G[z](0, t), e = G[z](0, e), r = W[z](0, r), i = W[z](0, i), { x: t, y: e, x2: r, y2: i, width: r - t, height: i - e } }, Pe.clone = function (t) { t = this.paper.set(); for (var e = 0, r = this.items.length; e < r; e++) t.push(this.items[e].clone()); return t }, Pe.toString = function () { return "Raphaël‘s set" }, Pe.glow = function (t) { var e = this.paper.set(); return this.forEach(function (r, i) { var n = r.glow(t); null != n && n.forEach(function (t, r) { e.push(t) }) }), e }, Pe.isPointInside = function (t, e) { var r = !1; return this.forEach(function (i) { if (i.isPointInside(t, e)) return r = !0, !1 }), r }, e.registerFont = function (t) { if (!t.face) return t; this.fonts = this.fonts || {}; var e = { w: t.w, face: {}, glyphs: {} }, r = t.face["font-family"]; for (var i in t.face) t.face[A](i) && (e.face[i] = t.face[i]); if (this.fonts[r] ? this.fonts[r].push(e) : this.fonts[r] = [e], !t.svg) { e.face["units-per-em"] = ut(t.face["units-per-em"], 10); for (var n in t.glyphs) if (t.glyphs[A](n)) { var a = t.glyphs[n]; if (e.glyphs[n] = { w: a.w, k: {}, d: a.d && "M" + a.d.replace(/[mlcxtrv]/g, function (t) { return { l: "L", c: "C", x: "z", t: "m", r: "l", v: "c" }[t] || "M" }) + "z" }, a.k) for (var s in a.k) a[A](s) && (e.glyphs[n].k[s] = a.k[s]) } } return t }, N.getFont = function (t, r, i, n) { if (n = n || "normal", i = i || "normal", r = +r || { normal: 400, bold: 700, lighter: 300, bolder: 800 }[r] || 400, e.fonts) { var a = e.fonts[t]; if (!a) { var s = new RegExp("(^|\\s)" + t.replace(/[^\w\d\s+!~.:_-]/g, R) + "(\\s|$)", "i"); for (var o in e.fonts) if (e.fonts[A](o) && s.test(o)) { a = e.fonts[o]; break } } var l; if (a) for (var h = 0, u = a.length; h < u && (l = a[h], l.face["font-weight"] != r || l.face["font-style"] != i && l.face["font-style"] || l.face["font-stretch"] != n) ; h++); return l } }, N.print = function (t, r, i, n, a, s, o, l) { s = s || "middle", o = W(G(o || 0, 1), -1), l = W(G(l || 1, 3), 1); var h = I(i)[q](R), u = 0, c = 0, f = R, p; if (e.is(n, "string") && (n = this.getFont(n)), n) { p = (a || 16) / n.face["units-per-em"]; for (var d = n.face.bbox[q](k), g = +d[0], v = d[3] - d[1], x = 0, y = +d[1] + ("baseline" == s ? v + +n.face.descent : v / 2), m = 0, b = h.length; m < b; m++) { if ("\n" == h[m]) u = 0, w = 0, c = 0, x += v * l; else { var _ = c && n.glyphs[h[m - 1]] || {}, w = n.glyphs[h[m]]; u += c ? (_.w || n.w) + (_.k && _.k[h[m]] || 0) + n.w * o : 0, c = 1 } w && w.d && (f += e.transformPath(w.d, ["t", u * p, x * p, "s", p, p, g, y, "t", (t - g) / p, (r - y) / p])) } } return this.path(f).attr({ fill: "#000", stroke: "none" }) }, N.add = function (t) { if (e.is(t, "array")) for (var r = this.set(), i = 0, n = t.length, a; i < n; i++) a = t[i] || {}, B[A](a.type) && r.push(this[a.type]().attr(a)); return r }, e.format = function (t, r) { var i = e.is(r, Q) ? [0][P](r) : arguments; return t && e.is(t, Z) && i.length - 1 && (t = t.replace(C, function (t, e) { return null == i[++e] ? R : i[e] })), t || R }, e.fullfill = function () { var t = /\{([^\}]+)\}/g, e = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, r = function (t, r, i) { var n = i; return r.replace(e, function (t, e, r, i, a) { e = e || i, n && (e in n && (n = n[e]), "function" == typeof n && a && (n = n())) }), n = (null == n || n == i ? t : n) + "" }; return function (e, i) { return String(e).replace(t, function (t, e) { return r(t, e, i) }) } }(), e.ninja = function () { if (E.was) T.win.Raphael = E.is; else { window.Raphael = void 0; try { delete window.Raphael } catch (t) { } } return e }, e.st = Pe, t.on("raphael.DOMload", function () { w = !0 }), function (t, r, i) { function n() { /in/.test(t.readyState) ? setTimeout(n, 9) : e.eve("raphael.DOMload") } null == t.readyState && t.addEventListener && (t.addEventListener(r, i = function () { t.removeEventListener(r, i, !1), t.readyState = "complete" }, !1), t.readyState = "loading"), n() }(document, "DOMContentLoaded"), e
        }.apply(e, i), !(void 0 !== n && (t.exports = n))
    }, function (t, e, r) { var i, n; !function (r) { var a = "0.5.0", s = "hasOwnProperty", o = /[\.\/]/, l = /\s*,\s*/, h = "*", u = function () { }, c = function (t, e) { return t - e }, f, p, d = { n: {} }, g = function () { for (var t = 0, e = this.length; t < e; t++) if ("undefined" != typeof this[t]) return this[t] }, v = function () { for (var t = this.length; --t;) if ("undefined" != typeof this[t]) return this[t] }, x = Object.prototype.toString, y = String, m = Array.isArray || function (t) { return t instanceof Array || "[object Array]" == x.call(t) }; eve = function (t, e) { var r = d, i = p, n = Array.prototype.slice.call(arguments, 2), a = eve.listeners(t), s = 0, o = !1, l, h = [], u = {}, x = [], y = f, m = []; x.firstDefined = g, x.lastDefined = v, f = t, p = 0; for (var b = 0, _ = a.length; b < _; b++) "zIndex" in a[b] && (h.push(a[b].zIndex), a[b].zIndex < 0 && (u[a[b].zIndex] = a[b])); for (h.sort(c) ; h[s] < 0;) if (l = u[h[s++]], x.push(l.apply(e, n)), p) return p = i, x; for (b = 0; b < _; b++) if (l = a[b], "zIndex" in l) if (l.zIndex == h[s]) { if (x.push(l.apply(e, n)), p) break; do if (s++, l = u[h[s]], l && x.push(l.apply(e, n)), p) break; while (l) } else u[l.zIndex] = l; else if (x.push(l.apply(e, n)), p) break; return p = i, f = y, x }, eve._events = d, eve.listeners = function (t) { var e = m(t) ? t : t.split(o), r = d, i, n, a, s, l, u, c, f, p = [r], g = []; for (s = 0, l = e.length; s < l; s++) { for (f = [], u = 0, c = p.length; u < c; u++) for (r = p[u].n, n = [r[e[s]], r[h]], a = 2; a--;) i = n[a], i && (f.push(i), g = g.concat(i.f || [])); p = f } return g }, eve.separator = function (t) { t ? (t = y(t).replace(/(?=[\.\^\]\[\-])/g, "\\"), t = "[" + t + "]", o = new RegExp(t)) : o = /[\.\/]/ }, eve.on = function (t, e) { if ("function" != typeof e) return function () { }; for (var r = m(t) ? m(t[0]) ? t : [t] : y(t).split(l), i = 0, n = r.length; i < n; i++) !function (t) { for (var r = m(t) ? t : y(t).split(o), i = d, n, a = 0, s = r.length; a < s; a++) i = i.n, i = i.hasOwnProperty(r[a]) && i[r[a]] || (i[r[a]] = { n: {} }); for (i.f = i.f || [], a = 0, s = i.f.length; a < s; a++) if (i.f[a] == e) { n = !0; break } !n && i.f.push(e) }(r[i]); return function (t) { +t == +t && (e.zIndex = +t) } }, eve.f = function (t) { var e = [].slice.call(arguments, 1); return function () { eve.apply(null, [t, null].concat(e).concat([].slice.call(arguments, 0))) } }, eve.stop = function () { p = 1 }, eve.nt = function (t) { var e = m(f) ? f.join(".") : f; return t ? new RegExp("(?:\\.|\\/|^)" + t + "(?:\\.|\\/|$)").test(e) : e }, eve.nts = function () { return m(f) ? f : f.split(o) }, eve.off = eve.unbind = function (t, e) { if (!t) return void (eve._events = d = { n: {} }); var r = m(t) ? m(t[0]) ? t : [t] : y(t).split(l); if (r.length > 1) for (var i = 0, n = r.length; i < n; i++) eve.off(r[i], e); else { r = m(t) ? t : y(t).split(o); var a, u, c, i, n, f, p, g = [d]; for (i = 0, n = r.length; i < n; i++) for (f = 0; f < g.length; f += c.length - 2) { if (c = [f, 1], a = g[f].n, r[i] != h) a[r[i]] && c.push(a[r[i]]); else for (u in a) a[s](u) && c.push(a[u]); g.splice.apply(g, c) } for (i = 0, n = g.length; i < n; i++) for (a = g[i]; a.n;) { if (e) { if (a.f) { for (f = 0, p = a.f.length; f < p; f++) if (a.f[f] == e) { a.f.splice(f, 1); break } !a.f.length && delete a.f } for (u in a.n) if (a.n[s](u) && a.n[u].f) { var v = a.n[u].f; for (f = 0, p = v.length; f < p; f++) if (v[f] == e) { v.splice(f, 1); break } !v.length && delete a.n[u].f } } else { delete a.f; for (u in a.n) a.n[s](u) && a.n[u].f && delete a.n[u].f } a = a.n } } }, eve.once = function (t, e) { var r = function () { return eve.off(t, r), e.apply(this, arguments) }; return eve.on(t, r) }, eve.version = a, eve.toString = function () { return "You are running Eve " + a }, "undefined" != typeof t && t.exports ? t.exports = eve : (i = [], n = function () { return eve }.apply(e, i), !(void 0 !== n && (t.exports = n))) }(this) }, function (t, e, r) {
        var i, n; i = [r(1)], n = function (t) {
            if (!t || t.svg) {
                var e = "hasOwnProperty", r = String, i = parseFloat, n = parseInt, a = Math, s = a.max, o = a.abs, l = a.pow, h = /[, ]+/, u = t.eve, c = "", f = " ", p = "http://www.w3.org/1999/xlink", d = { block: "M5,0 0,2.5 5,5z", classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z", diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z", open: "M6,1 1,3.5 6,6", oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z" }, g = {}; t.toString = function () { return "Your browser supports SVG.\nYou are running Raphaël " + this.version }; var v = function (i, n) { if (n) { "string" == typeof i && (i = v(i)); for (var a in n) n[e](a) && ("xlink:" == a.substring(0, 6) ? i.setAttributeNS(p, a.substring(6), r(n[a])) : i.setAttribute(a, r(n[a]))) } else i = t._g.doc.createElementNS("http://www.w3.org/2000/svg", i), i.style && (i.style.webkitTapHighlightColor = "rgba(0,0,0,0)"); return i }, x = function (e, n) { var h = "linear", u = e.id + n, f = .5, p = .5, d = e.node, g = e.paper, x = d.style, y = t._g.doc.getElementById(u); if (!y) { if (n = r(n).replace(t._radial_gradient, function (t, e, r) { if (h = "radial", e && r) { f = i(e), p = i(r); var n = 2 * (p > .5) - 1; l(f - .5, 2) + l(p - .5, 2) > .25 && (p = a.sqrt(.25 - l(f - .5, 2)) * n + .5) && .5 != p && (p = p.toFixed(5) - 1e-5 * n) } return c }), n = n.split(/\s*\-\s*/), "linear" == h) { var b = n.shift(); if (b = -i(b), isNaN(b)) return null; var _ = [0, 0, a.cos(t.rad(b)), a.sin(t.rad(b))], w = 1 / (s(o(_[2]), o(_[3])) || 1); _[2] *= w, _[3] *= w, _[2] < 0 && (_[0] = -_[2], _[2] = 0), _[3] < 0 && (_[1] = -_[3], _[3] = 0) } var k = t._parseDots(n); if (!k) return null; if (u = u.replace(/[\(\)\s,\xb0#]/g, "_"), e.gradient && u != e.gradient.id && (g.defs.removeChild(e.gradient), delete e.gradient), !e.gradient) { y = v(h + "Gradient", { id: u }), e.gradient = y, v(y, "radial" == h ? { fx: f, fy: p } : { x1: _[0], y1: _[1], x2: _[2], y2: _[3], gradientTransform: e.matrix.invert() }), g.defs.appendChild(y); for (var B = 0, C = k.length; B < C; B++) y.appendChild(v("stop", { offset: k[B].offset ? k[B].offset : B ? "100%" : "0%", "stop-color": k[B].color || "#fff", "stop-opacity": isFinite(k[B].opacity) ? k[B].opacity : 1 })) } } return v(d, { fill: m(u), opacity: 1, "fill-opacity": 1 }), x.fill = c, x.opacity = 1, x.fillOpacity = 1, 1 }, y = function () { var t = document.documentMode; return t && (9 === t || 10 === t) }, m = function (t) { if (y()) return "url('#" + t + "')"; var e = document.location, r = e.protocol + "//" + e.host + e.pathname + e.search; return "url('" + r + "#" + t + "')" }, b = function (t) { var e = t.getBBox(1); v(t.pattern, { patternTransform: t.matrix.invert() + " translate(" + e.x + "," + e.y + ")" }) }, _ = function (i, n, a) { if ("path" == i.type) { for (var s = r(n).toLowerCase().split("-"), o = i.paper, l = a ? "end" : "start", h = i.node, u = i.attrs, f = u["stroke-width"], p = s.length, x = "classic", y, m, b, _, w, k = 3, B = 3, C = 5; p--;) switch (s[p]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": x = s[p]; break; case "wide": B = 5; break; case "narrow": B = 2; break; case "long": k = 5; break; case "short": k = 2 } if ("open" == x ? (k += 2, B += 2, C += 2, b = 1, _ = a ? 4 : 1, w = { fill: "none", stroke: u.stroke }) : (_ = b = k / 2, w = { fill: u.stroke, stroke: "none" }), i._.arrows ? a ? (i._.arrows.endPath && g[i._.arrows.endPath]--, i._.arrows.endMarker && g[i._.arrows.endMarker]--) : (i._.arrows.startPath && g[i._.arrows.startPath]--, i._.arrows.startMarker && g[i._.arrows.startMarker]--) : i._.arrows = {}, "none" != x) { var S = "raphael-marker-" + x, A = "raphael-marker-" + l + x + k + B + "-obj" + i.id; t._g.doc.getElementById(S) ? g[S]++ : (o.defs.appendChild(v(v("path"), { "stroke-linecap": "round", d: d[x], id: S })), g[S] = 1); var T = t._g.doc.getElementById(A), E; T ? (g[A]++, E = T.getElementsByTagName("use")[0]) : (T = v(v("marker"), { id: A, markerHeight: B, markerWidth: k, orient: "auto", refX: _, refY: B / 2 }), E = v(v("use"), { "xlink:href": "#" + S, transform: (a ? "rotate(180 " + k / 2 + " " + B / 2 + ") " : c) + "scale(" + k / C + "," + B / C + ")", "stroke-width": (1 / ((k / C + B / C) / 2)).toFixed(4) }), T.appendChild(E), o.defs.appendChild(T), g[A] = 1), v(E, w); var M = b * ("diamond" != x && "oval" != x); a ? (y = i._.arrows.startdx * f || 0, m = t.getTotalLength(u.path) - M * f) : (y = M * f, m = t.getTotalLength(u.path) - (i._.arrows.enddx * f || 0)), w = {}, w["marker-" + l] = "url(#" + A + ")", (m || y) && (w.d = t.getSubpath(u.path, y, m)), v(h, w), i._.arrows[l + "Path"] = S, i._.arrows[l + "Marker"] = A, i._.arrows[l + "dx"] = M, i._.arrows[l + "Type"] = x, i._.arrows[l + "String"] = n } else a ? (y = i._.arrows.startdx * f || 0, m = t.getTotalLength(u.path) - y) : (y = 0, m = t.getTotalLength(u.path) - (i._.arrows.enddx * f || 0)), i._.arrows[l + "Path"] && v(h, { d: t.getSubpath(u.path, y, m) }), delete i._.arrows[l + "Path"], delete i._.arrows[l + "Marker"], delete i._.arrows[l + "dx"], delete i._.arrows[l + "Type"], delete i._.arrows[l + "String"]; for (w in g) if (g[e](w) && !g[w]) { var N = t._g.doc.getElementById(w); N && N.parentNode.removeChild(N) } } }, w = { "-": [3, 1], ".": [1, 1], "-.": [3, 1, 1, 1], "-..": [3, 1, 1, 1, 1, 1], ". ": [1, 3], "- ": [4, 3], "--": [8, 3], "- .": [4, 3, 1, 3], "--.": [8, 3, 1, 3], "--..": [8, 3, 1, 3, 1, 3] }, k = function (t, e, i) { if (e = w[r(e).toLowerCase()]) { for (var n = t.attrs["stroke-width"] || "1", a = { round: n, square: n, butt: 0 }[t.attrs["stroke-linecap"] || i["stroke-linecap"]] || 0, s = [], o = e.length; o--;) s[o] = e[o] * n + (o % 2 ? 1 : -1) * a; v(t.node, { "stroke-dasharray": s.join(",") }) } else v(t.node, { "stroke-dasharray": "none" }) }, B = function (i, a) {
                    var l = i.node, u = i.attrs, f = l.style.visibility; l.style.visibility = "hidden"; for (var d in a) if (a[e](d)) {
                        if (!t._availableAttrs[e](d)) continue; var g = a[d]; switch (u[d] = g, d) {
                            case "blur": i.blur(g); break; case "title": var y = l.getElementsByTagName("title"); if (y.length && (y = y[0])) y.firstChild.nodeValue = g; else { y = v("title"); var m = t._g.doc.createTextNode(g); y.appendChild(m), l.appendChild(y) } break; case "href": case "target": var w = l.parentNode; if ("a" != w.tagName.toLowerCase()) { var B = v("a"); w.insertBefore(B, l), B.appendChild(l), w = B } "target" == d ? w.setAttributeNS(p, "show", "blank" == g ? "new" : g) : w.setAttributeNS(p, d, g); break; case "cursor": l.style.cursor = g; break; case "transform": i.transform(g); break; case "arrow-start": _(i, g); break; case "arrow-end": _(i, g, 1); break; case "clip-rect": var C = r(g).split(h); if (4 == C.length) { i.clip && i.clip.parentNode.parentNode.removeChild(i.clip.parentNode); var A = v("clipPath"), T = v("rect"); A.id = t.createUUID(), v(T, { x: C[0], y: C[1], width: C[2], height: C[3] }), A.appendChild(T), i.paper.defs.appendChild(A), v(l, { "clip-path": "url(#" + A.id + ")" }), i.clip = T } if (!g) { var E = l.getAttribute("clip-path"); if (E) { var M = t._g.doc.getElementById(E.replace(/(^url\(#|\)$)/g, c)); M && M.parentNode.removeChild(M), v(l, { "clip-path": c }), delete i.clip } } break; case "path": "path" == i.type && (v(l, { d: g ? u.path = t._pathToAbsolute(g) : "M0,0" }), i._.dirty = 1, i._.arrows && ("startString" in i._.arrows && _(i, i._.arrows.startString), "endString" in i._.arrows && _(i, i._.arrows.endString, 1))); break; case "width": if (l.setAttribute(d, g), i._.dirty = 1, !u.fx) break; d = "x", g = u.x; case "x": u.fx && (g = -u.x - (u.width || 0)); case "rx": if ("rx" == d && "rect" == i.type) break; case "cx": l.setAttribute(d, g), i.pattern && b(i), i._.dirty = 1; break; case "height": if (l.setAttribute(d, g), i._.dirty = 1, !u.fy) break; d = "y", g = u.y; case "y": u.fy && (g = -u.y - (u.height || 0)); case "ry": if ("ry" == d && "rect" == i.type) break; case "cy": l.setAttribute(d, g), i.pattern && b(i), i._.dirty = 1; break; case "r": "rect" == i.type ? v(l, { rx: g, ry: g }) : l.setAttribute(d, g), i._.dirty = 1; break; case "src": "image" == i.type && l.setAttributeNS(p, "href", g); break; case "stroke-width": 1 == i._.sx && 1 == i._.sy || (g /= s(o(i._.sx), o(i._.sy)) || 1), l.setAttribute(d, g), u["stroke-dasharray"] && k(i, u["stroke-dasharray"], a),
                            i._.arrows && ("startString" in i._.arrows && _(i, i._.arrows.startString), "endString" in i._.arrows && _(i, i._.arrows.endString, 1)); break; case "stroke-dasharray": k(i, g, a); break; case "fill": var N = r(g).match(t._ISURL); if (N) { A = v("pattern"); var L = v("image"); A.id = t.createUUID(), v(A, { x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1 }), v(L, { x: 0, y: 0, "xlink:href": N[1] }), A.appendChild(L), function (e) { t._preload(N[1], function () { var t = this.offsetWidth, r = this.offsetHeight; v(e, { width: t, height: r }), v(L, { width: t, height: r }) }) }(A), i.paper.defs.appendChild(A), v(l, { fill: "url(#" + A.id + ")" }), i.pattern = A, i.pattern && b(i); break } var z = t.getRGB(g); if (z.error) { if (("circle" == i.type || "ellipse" == i.type || "r" != r(g).charAt()) && x(i, g)) { if ("opacity" in u || "fill-opacity" in u) { var P = t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, c)); if (P) { var F = P.getElementsByTagName("stop"); v(F[F.length - 1], { "stop-opacity": ("opacity" in u ? u.opacity : 1) * ("fill-opacity" in u ? u["fill-opacity"] : 1) }) } } u.gradient = g, u.fill = "none"; break } } else delete a.gradient, delete u.gradient, !t.is(u.opacity, "undefined") && t.is(a.opacity, "undefined") && v(l, { opacity: u.opacity }), !t.is(u["fill-opacity"], "undefined") && t.is(a["fill-opacity"], "undefined") && v(l, { "fill-opacity": u["fill-opacity"] }); z[e]("opacity") && v(l, { "fill-opacity": z.opacity > 1 ? z.opacity / 100 : z.opacity }); case "stroke": z = t.getRGB(g), l.setAttribute(d, z.hex), "stroke" == d && z[e]("opacity") && v(l, { "stroke-opacity": z.opacity > 1 ? z.opacity / 100 : z.opacity }), "stroke" == d && i._.arrows && ("startString" in i._.arrows && _(i, i._.arrows.startString), "endString" in i._.arrows && _(i, i._.arrows.endString, 1)); break; case "gradient": ("circle" == i.type || "ellipse" == i.type || "r" != r(g).charAt()) && x(i, g); break; case "opacity": u.gradient && !u[e]("stroke-opacity") && v(l, { "stroke-opacity": g > 1 ? g / 100 : g }); case "fill-opacity": if (u.gradient) { P = t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, c)), P && (F = P.getElementsByTagName("stop"), v(F[F.length - 1], { "stop-opacity": g })); break } default: "font-size" == d && (g = n(g, 10) + "px"); var R = d.replace(/(\-.)/g, function (t) { return t.substring(1).toUpperCase() }); l.style[R] = g, i._.dirty = 1, l.setAttribute(d, g)
                        }
                    } S(i, a), l.style.visibility = f
                }, C = 1.2, S = function (i, a) { if ("text" == i.type && (a[e]("text") || a[e]("font") || a[e]("font-size") || a[e]("x") || a[e]("y"))) { var s = i.attrs, o = i.node, l = o.firstChild ? n(t._g.doc.defaultView.getComputedStyle(o.firstChild, c).getPropertyValue("font-size"), 10) : 10; if (a[e]("text")) { for (s.text = a.text; o.firstChild;) o.removeChild(o.firstChild); for (var h = r(a.text).split("\n"), u = [], f, p = 0, d = h.length; p < d; p++) f = v("tspan"), p && v(f, { dy: l * C, x: s.x }), f.appendChild(t._g.doc.createTextNode(h[p])), o.appendChild(f), u[p] = f } else for (u = o.getElementsByTagName("tspan"), p = 0, d = u.length; p < d; p++) p ? v(u[p], { dy: l * C, x: s.x }) : v(u[0], { dy: 0 }); v(o, { x: s.x, y: s.y }), i._.dirty = 1; var g = i._getBBox(), x = s.y - (g.y + g.height / 2); x && t.is(x, "finite") && v(u[0], { dy: x }) } }, A = function (t) { return t.parentNode && "a" === t.parentNode.tagName.toLowerCase() ? t.parentNode : t }, T = function (e, r) { function i() { return ("0000" + (Math.random() * Math.pow(36, 5) << 0).toString(36)).slice(-5) } var n = 0, a = 0; this[0] = this.node = e, e.raphael = !0, this.id = i(), e.raphaelid = this.id, this.matrix = t.matrix(), this.realPath = null, this.paper = r, this.attrs = this.attrs || {}, this._ = { transform: [], sx: 1, sy: 1, deg: 0, dx: 0, dy: 0, dirty: 1 }, !r.bottom && (r.bottom = this), this.prev = r.top, r.top && (r.top.next = this), r.top = this, this.next = null }, E = t.el; T.prototype = E, E.constructor = T, t._engine.path = function (t, e) { var r = v("path"); e.canvas && e.canvas.appendChild(r); var i = new T(r, e); return i.type = "path", B(i, { fill: "none", stroke: "#000", path: t }), i }, E.rotate = function (t, e, n) { if (this.removed) return this; if (t = r(t).split(h), t.length - 1 && (e = i(t[1]), n = i(t[2])), t = i(t[0]), null == n && (e = n), null == e || null == n) { var a = this.getBBox(1); e = a.x + a.width / 2, n = a.y + a.height / 2 } return this.transform(this._.transform.concat([["r", t, e, n]])), this }, E.scale = function (t, e, n, a) { if (this.removed) return this; if (t = r(t).split(h), t.length - 1 && (e = i(t[1]), n = i(t[2]), a = i(t[3])), t = i(t[0]), null == e && (e = t), null == a && (n = a), null == n || null == a) var s = this.getBBox(1); return n = null == n ? s.x + s.width / 2 : n, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([["s", t, e, n, a]])), this }, E.translate = function (t, e) { return this.removed ? this : (t = r(t).split(h), t.length - 1 && (e = i(t[1])), t = i(t[0]) || 0, e = +e || 0, this.transform(this._.transform.concat([["t", t, e]])), this) }, E.transform = function (r) { var i = this._; if (null == r) return i.transform; if (t._extractTransform(this, r), this.clip && v(this.clip, { transform: this.matrix.invert() }), this.pattern && b(this), this.node && v(this.node, { transform: this.matrix }), 1 != i.sx || 1 != i.sy) { var n = this.attrs[e]("stroke-width") ? this.attrs["stroke-width"] : 1; this.attr({ "stroke-width": n }) } return this }, E.hide = function () { return this.removed || (this.node.style.display = "none"), this }, E.show = function () { return this.removed || (this.node.style.display = ""), this }, E.remove = function () { var e = A(this.node); if (!this.removed && e.parentNode) { var r = this.paper; r.__set__ && r.__set__.exclude(this), u.unbind("raphael.*.*." + this.id), this.gradient && r.defs.removeChild(this.gradient), t._tear(this, r), e.parentNode.removeChild(e), this.removeData(); for (var i in this) this[i] = "function" == typeof this[i] ? t._removedFactory(i) : null; this.removed = !0 } }, E._getBBox = function () { if ("none" == this.node.style.display) { this.show(); var t = !0 } var e = !1, r; this.paper.canvas.parentElement ? r = this.paper.canvas.parentElement.style : this.paper.canvas.parentNode && (r = this.paper.canvas.parentNode.style), r && "none" == r.display && (e = !0, r.display = ""); var i = {}; try { i = this.node.getBBox() } catch (n) { i = { x: this.node.clientLeft, y: this.node.clientTop, width: this.node.clientWidth, height: this.node.clientHeight } } finally { i = i || {}, e && (r.display = "none") } return t && this.hide(), i }, E.attr = function (r, i) { if (this.removed) return this; if (null == r) { var n = {}; for (var a in this.attrs) this.attrs[e](a) && (n[a] = this.attrs[a]); return n.gradient && "none" == n.fill && (n.fill = n.gradient) && delete n.gradient, n.transform = this._.transform, n } if (null == i && t.is(r, "string")) { if ("fill" == r && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; if ("transform" == r) return this._.transform; for (var s = r.split(h), o = {}, l = 0, c = s.length; l < c; l++) r = s[l], r in this.attrs ? o[r] = this.attrs[r] : t.is(this.paper.customAttributes[r], "function") ? o[r] = this.paper.customAttributes[r].def : o[r] = t._availableAttrs[r]; return c - 1 ? o : o[s[0]] } if (null == i && t.is(r, "array")) { for (o = {}, l = 0, c = r.length; l < c; l++) o[r[l]] = this.attr(r[l]); return o } if (null != i) { var f = {}; f[r] = i } else null != r && t.is(r, "object") && (f = r); for (var p in f) u("raphael.attr." + p + "." + this.id, this, f[p]); for (p in this.paper.customAttributes) if (this.paper.customAttributes[e](p) && f[e](p) && t.is(this.paper.customAttributes[p], "function")) { var d = this.paper.customAttributes[p].apply(this, [].concat(f[p])); this.attrs[p] = f[p]; for (var g in d) d[e](g) && (f[g] = d[g]) } return B(this, f), this }, E.toFront = function () { if (this.removed) return this; var e = A(this.node); e.parentNode.appendChild(e); var r = this.paper; return r.top != this && t._tofront(this, r), this }, E.toBack = function () { if (this.removed) return this; var e = A(this.node), r = e.parentNode; r.insertBefore(e, r.firstChild), t._toback(this, this.paper); var i = this.paper; return this }, E.insertAfter = function (e) { if (this.removed || !e) return this; var r = A(this.node), i = A(e.node || e[e.length - 1].node); return i.nextSibling ? i.parentNode.insertBefore(r, i.nextSibling) : i.parentNode.appendChild(r), t._insertafter(this, e, this.paper), this }, E.insertBefore = function (e) { if (this.removed || !e) return this; var r = A(this.node), i = A(e.node || e[0].node); return i.parentNode.insertBefore(r, i), t._insertbefore(this, e, this.paper), this }, E.blur = function (e) { var r = this; if (0 !== +e) { var i = v("filter"), n = v("feGaussianBlur"); r.attrs.blur = e, i.id = t.createUUID(), v(n, { stdDeviation: +e || 1.5 }), i.appendChild(n), r.paper.defs.appendChild(i), r._blur = i, v(r.node, { filter: "url(#" + i.id + ")" }) } else r._blur && (r._blur.parentNode.removeChild(r._blur), delete r._blur, delete r.attrs.blur), r.node.removeAttribute("filter"); return r }, t._engine.circle = function (t, e, r, i) { var n = v("circle"); t.canvas && t.canvas.appendChild(n); var a = new T(n, t); return a.attrs = { cx: e, cy: r, r: i, fill: "none", stroke: "#000" }, a.type = "circle", v(n, a.attrs), a }, t._engine.rect = function (t, e, r, i, n, a) { var s = v("rect"); t.canvas && t.canvas.appendChild(s); var o = new T(s, t); return o.attrs = { x: e, y: r, width: i, height: n, rx: a || 0, ry: a || 0, fill: "none", stroke: "#000" }, o.type = "rect", v(s, o.attrs), o }, t._engine.ellipse = function (t, e, r, i, n) { var a = v("ellipse"); t.canvas && t.canvas.appendChild(a); var s = new T(a, t); return s.attrs = { cx: e, cy: r, rx: i, ry: n, fill: "none", stroke: "#000" }, s.type = "ellipse", v(a, s.attrs), s }, t._engine.image = function (t, e, r, i, n, a) { var s = v("image"); v(s, { x: r, y: i, width: n, height: a, preserveAspectRatio: "none" }), s.setAttributeNS(p, "href", e), t.canvas && t.canvas.appendChild(s); var o = new T(s, t); return o.attrs = { x: r, y: i, width: n, height: a, src: e }, o.type = "image", o }, t._engine.text = function (e, r, i, n) { var a = v("text"); e.canvas && e.canvas.appendChild(a); var s = new T(a, e); return s.attrs = { x: r, y: i, "text-anchor": "middle", text: n, "font-family": t._availableAttrs["font-family"], "font-size": t._availableAttrs["font-size"], stroke: "none", fill: "#000" }, s.type = "text", B(s, s.attrs), s }, t._engine.setSize = function (t, e) { return this.width = t || this.width, this.height = e || this.height, this.canvas.setAttribute("width", this.width), this.canvas.setAttribute("height", this.height), this._viewBox && this.setViewBox.apply(this, this._viewBox), this }, t._engine.create = function () { var e = t._getContainer.apply(0, arguments), r = e && e.container, i = e.x, n = e.y, a = e.width, s = e.height; if (!r) throw new Error("SVG container not found."); var o = v("svg"), l = "overflow:hidden;", h; return i = i || 0, n = n || 0, a = a || 512, s = s || 342, v(o, { height: s, version: 1.1, width: a, xmlns: "http://www.w3.org/2000/svg", "xmlns:xlink": "http://www.w3.org/1999/xlink" }), 1 == r ? (o.style.cssText = l + "position:absolute;left:" + i + "px;top:" + n + "px", t._g.doc.body.appendChild(o), h = 1) : (o.style.cssText = l + "position:relative", r.firstChild ? r.insertBefore(o, r.firstChild) : r.appendChild(o)), r = new t._Paper, r.width = a, r.height = s, r.canvas = o, r.clear(), r._left = r._top = 0, h && (r.renderfix = function () { }), r.renderfix(), r }, t._engine.setViewBox = function (t, e, r, i, n) { u("raphael.setViewBox", this, this._viewBox, [t, e, r, i, n]); var a = this.getSize(), o = s(r / a.width, i / a.height), l = this.top, h = n ? "xMidYMid meet" : "xMinYMin", c, p; for (null == t ? (this._vbSize && (o = 1), delete this._vbSize, c = "0 0 " + this.width + f + this.height) : (this._vbSize = o, c = t + f + e + f + r + f + i), v(this.canvas, { viewBox: c, preserveAspectRatio: h }) ; o && l;) p = "stroke-width" in l.attrs ? l.attrs["stroke-width"] : 1, l.attr({ "stroke-width": p }), l._.dirty = 1, l._.dirtyT = 1, l = l.prev; return this._viewBox = [t, e, r, i, !!n], this }, t.prototype.renderfix = function () { var t = this.canvas, e = t.style, r; try { r = t.getScreenCTM() || t.createSVGMatrix() } catch (i) { r = t.createSVGMatrix() } var n = -r.e % 1, a = -r.f % 1; (n || a) && (n && (this._left = (this._left + n) % 1, e.left = this._left + "px"), a && (this._top = (this._top + a) % 1, e.top = this._top + "px")) }, t.prototype.clear = function () { t.eve("raphael.clear", this); for (var e = this.canvas; e.firstChild;) e.removeChild(e.firstChild); this.bottom = this.top = null, (this.desc = v("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël " + t.version)), e.appendChild(this.desc), e.appendChild(this.defs = v("defs")) }, t.prototype.remove = function () { u("raphael.remove", this), this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas); for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null }; var M = t.st; for (var N in E) E[e](N) && !M[e](N) && (M[N] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t].apply(r, e) }) } }(N))
            }
        }.apply(e, i), !(void 0 !== n && (t.exports = n))
    }, function (t, e, r) { var i, n; i = [r(1)], n = function (t) { if (!t || t.vml) { var e = "hasOwnProperty", r = String, i = parseFloat, n = Math, a = n.round, s = n.max, o = n.min, l = n.abs, h = "fill", u = /[, ]+/, c = t.eve, f = " progid:DXImageTransform.Microsoft", p = " ", d = "", g = { M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x" }, v = /([clmz]),?([^clmz]*)/gi, x = / progid:\S+Blur\([^\)]+\)/g, y = /-?[^,\s-]+/g, m = "position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)", b = 21600, _ = { path: 1, rect: 1, image: 1 }, w = { circle: 1, ellipse: 1 }, k = function (e) { var i = /[ahqstv]/gi, n = t._pathToAbsolute; if (r(e).match(i) && (n = t._path2curve), i = /[clmz]/g, n == t._pathToAbsolute && !r(e).match(i)) { var s = r(e).replace(v, function (t, e, r) { var i = [], n = "m" == e.toLowerCase(), s = g[e]; return r.replace(y, function (t) { n && 2 == i.length && (s += i + g["m" == e ? "l" : "L"], i = []), i.push(a(t * b)) }), s + i }); return s } var o = n(e), l, h; s = []; for (var u = 0, c = o.length; u < c; u++) { l = o[u], h = o[u][0].toLowerCase(), "z" == h && (h = "x"); for (var f = 1, x = l.length; f < x; f++) h += a(l[f] * b) + (f != x - 1 ? "," : d); s.push(h) } return s.join(p) }, B = function (e, r, i) { var n = t.matrix(); return n.rotate(-e, .5, .5), { dx: n.x(r, i), dy: n.y(r, i) } }, C = function (t, e, r, i, n, a) { var s = t._, o = t.matrix, u = s.fillpos, c = t.node, f = c.style, d = 1, g = "", v, x = b / e, y = b / r; if (f.visibility = "hidden", e && r) { if (c.coordsize = l(x) + p + l(y), f.rotation = a * (e * r < 0 ? -1 : 1), a) { var m = B(a, i, n); i = m.dx, n = m.dy } if (e < 0 && (g += "x"), r < 0 && (g += " y") && (d = -1), f.flip = g, c.coordorigin = i * -x + p + n * -y, u || s.fillsize) { var _ = c.getElementsByTagName(h); _ = _ && _[0], c.removeChild(_), u && (m = B(a, o.x(u[0], u[1]), o.y(u[0], u[1])), _.position = m.dx * d + p + m.dy * d), s.fillsize && (_.size = s.fillsize[0] * l(e) + p + s.fillsize[1] * l(r)), c.appendChild(_) } f.visibility = "visible" } }; t.toString = function () { return "Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël " + this.version }; var S = function (t, e, i) { for (var n = r(e).toLowerCase().split("-"), a = i ? "end" : "start", s = n.length, o = "classic", l = "medium", h = "medium"; s--;) switch (n[s]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": o = n[s]; break; case "wide": case "narrow": h = n[s]; break; case "long": case "short": l = n[s] } var u = t.node.getElementsByTagName("stroke")[0]; u[a + "arrow"] = o, u[a + "arrowlength"] = l, u[a + "arrowwidth"] = h }, A = function (n, l) { n.attrs = n.attrs || {}; var c = n.node, f = n.attrs, g = c.style, v, x = _[n.type] && (l.x != f.x || l.y != f.y || l.width != f.width || l.height != f.height || l.cx != f.cx || l.cy != f.cy || l.rx != f.rx || l.ry != f.ry || l.r != f.r), y = w[n.type] && (f.cx != l.cx || f.cy != l.cy || f.r != l.r || f.rx != l.rx || f.ry != l.ry), m = n; for (var B in l) l[e](B) && (f[B] = l[B]); if (x && (f.path = t._getPath[n.type](n), n._.dirty = 1), l.href && (c.href = l.href), l.title && (c.title = l.title), l.target && (c.target = l.target), l.cursor && (g.cursor = l.cursor), "blur" in l && n.blur(l.blur), (l.path && "path" == n.type || x) && (c.path = k(~r(f.path).toLowerCase().indexOf("r") ? t._pathToAbsolute(f.path) : f.path), n._.dirty = 1, "image" == n.type && (n._.fillpos = [f.x, f.y], n._.fillsize = [f.width, f.height], C(n, 1, 1, 0, 0, 0))), "transform" in l && n.transform(l.transform), y) { var A = +f.cx, E = +f.cy, M = +f.rx || +f.r || 0, L = +f.ry || +f.r || 0; c.path = t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", a((A - M) * b), a((E - L) * b), a((A + M) * b), a((E + L) * b), a(A * b)), n._.dirty = 1 } if ("clip-rect" in l) { var z = r(l["clip-rect"]).split(u); if (4 == z.length) { z[2] = +z[2] + +z[0], z[3] = +z[3] + +z[1]; var P = c.clipRect || t._g.doc.createElement("div"), F = P.style; F.clip = t.format("rect({1}px {2}px {3}px {0}px)", z), c.clipRect || (F.position = "absolute", F.top = 0, F.left = 0, F.width = n.paper.width + "px", F.height = n.paper.height + "px", c.parentNode.insertBefore(P, c), P.appendChild(c), c.clipRect = P) } l["clip-rect"] || c.clipRect && (c.clipRect.style.clip = "auto") } if (n.textpath) { var R = n.textpath.style; l.font && (R.font = l.font), l["font-family"] && (R.fontFamily = '"' + l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, d) + '"'), l["font-size"] && (R.fontSize = l["font-size"]), l["font-weight"] && (R.fontWeight = l["font-weight"]), l["font-style"] && (R.fontStyle = l["font-style"]) } if ("arrow-start" in l && S(m, l["arrow-start"]), "arrow-end" in l && S(m, l["arrow-end"], 1), null != l.opacity || null != l.fill || null != l.src || null != l.stroke || null != l["stroke-width"] || null != l["stroke-opacity"] || null != l["fill-opacity"] || null != l["stroke-dasharray"] || null != l["stroke-miterlimit"] || null != l["stroke-linejoin"] || null != l["stroke-linecap"]) { var j = c.getElementsByTagName(h), I = !1; if (j = j && j[0], !j && (I = j = N(h)), "image" == n.type && l.src && (j.src = l.src), l.fill && (j.on = !0), null != j.on && "none" != l.fill && null !== l.fill || (j.on = !1), j.on && l.fill) { var q = r(l.fill).match(t._ISURL); if (q) { j.parentNode == c && c.removeChild(j), j.rotate = !0, j.src = q[1], j.type = "tile"; var D = n.getBBox(1); j.position = D.x + p + D.y, n._.fillpos = [D.x, D.y], t._preload(q[1], function () { n._.fillsize = [this.offsetWidth, this.offsetHeight] }) } else j.color = t.getRGB(l.fill).hex, j.src = d, j.type = "solid", t.getRGB(l.fill).error && (m.type in { circle: 1, ellipse: 1 } || "r" != r(l.fill).charAt()) && T(m, l.fill, j) && (f.fill = "none", f.gradient = l.fill, j.rotate = !1) } if ("fill-opacity" in l || "opacity" in l) { var V = ((+f["fill-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+t.getRGB(l.fill).o + 1 || 2) - 1); V = o(s(V, 0), 1), j.opacity = V, j.src && (j.color = "none") } c.appendChild(j); var O = c.getElementsByTagName("stroke") && c.getElementsByTagName("stroke")[0], Y = !1; !O && (Y = O = N("stroke")), (l.stroke && "none" != l.stroke || l["stroke-width"] || null != l["stroke-opacity"] || l["stroke-dasharray"] || l["stroke-miterlimit"] || l["stroke-linejoin"] || l["stroke-linecap"]) && (O.on = !0), ("none" == l.stroke || null === l.stroke || null == O.on || 0 == l.stroke || 0 == l["stroke-width"]) && (O.on = !1); var W = t.getRGB(l.stroke); O.on && l.stroke && (O.color = W.hex), V = ((+f["stroke-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+W.o + 1 || 2) - 1); var G = .75 * (i(l["stroke-width"]) || 1); if (V = o(s(V, 0), 1), null == l["stroke-width"] && (G = f["stroke-width"]), l["stroke-width"] && (O.weight = G), G && G < 1 && (V *= G) && (O.weight = 1), O.opacity = V, l["stroke-linejoin"] && (O.joinstyle = l["stroke-linejoin"] || "miter"), O.miterlimit = l["stroke-miterlimit"] || 8, l["stroke-linecap"] && (O.endcap = "butt" == l["stroke-linecap"] ? "flat" : "square" == l["stroke-linecap"] ? "square" : "round"), "stroke-dasharray" in l) { var H = { "-": "shortdash", ".": "shortdot", "-.": "shortdashdot", "-..": "shortdashdotdot", ". ": "dot", "- ": "dash", "--": "longdash", "- .": "dashdot", "--.": "longdashdot", "--..": "longdashdotdot" }; O.dashstyle = H[e](l["stroke-dasharray"]) ? H[l["stroke-dasharray"]] : d } Y && c.appendChild(O) } if ("text" == m.type) { m.paper.canvas.style.display = d; var X = m.paper.span, U = 100, $ = f.font && f.font.match(/\d+(?:\.\d*)?(?=px)/); g = X.style, f.font && (g.font = f.font), f["font-family"] && (g.fontFamily = f["font-family"]), f["font-weight"] && (g.fontWeight = f["font-weight"]), f["font-style"] && (g.fontStyle = f["font-style"]), $ = i(f["font-size"] || $ && $[0]) || 10, g.fontSize = $ * U + "px", m.textpath.string && (X.innerHTML = r(m.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>")); var Z = X.getBoundingClientRect(); m.W = f.w = (Z.right - Z.left) / U, m.H = f.h = (Z.bottom - Z.top) / U, m.X = f.x, m.Y = f.y + m.H / 2, ("x" in l || "y" in l) && (m.path.v = t.format("m{0},{1}l{2},{1}", a(f.x * b), a(f.y * b), a(f.x * b) + 1)); for (var Q = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"], J = 0, K = Q.length; J < K; J++) if (Q[J] in l) { m._.dirty = 1; break } switch (f["text-anchor"]) { case "start": m.textpath.style["v-text-align"] = "left", m.bbx = m.W / 2; break; case "end": m.textpath.style["v-text-align"] = "right", m.bbx = -m.W / 2; break; default: m.textpath.style["v-text-align"] = "center", m.bbx = 0 } m.textpath.style["v-text-kern"] = !0 } }, T = function (e, a, s) { e.attrs = e.attrs || {}; var o = e.attrs, l = Math.pow, h, u, c = "linear", f = ".5 .5"; if (e.attrs.gradient = a, a = r(a).replace(t._radial_gradient, function (t, e, r) { return c = "radial", e && r && (e = i(e), r = i(r), l(e - .5, 2) + l(r - .5, 2) > .25 && (r = n.sqrt(.25 - l(e - .5, 2)) * (2 * (r > .5) - 1) + .5), f = e + p + r), d }), a = a.split(/\s*\-\s*/), "linear" == c) { var g = a.shift(); if (g = -i(g), isNaN(g)) return null } var v = t._parseDots(a); if (!v) return null; if (e = e.shape || e.node, v.length) { e.removeChild(s), s.on = !0, s.method = "none", s.color = v[0].color, s.color2 = v[v.length - 1].color; for (var x = [], y = 0, m = v.length; y < m; y++) v[y].offset && x.push(v[y].offset + p + v[y].color); s.colors = x.length ? x.join() : "0% " + s.color, "radial" == c ? (s.type = "gradientTitle", s.focus = "100%", s.focussize = "0 0", s.focusposition = f, s.angle = 0) : (s.type = "gradient", s.angle = (270 - g) % 360), e.appendChild(s) } return 1 }, E = function (e, r) { this[0] = this.node = e, e.raphael = !0, this.id = t._oid++, e.raphaelid = this.id, this.X = 0, this.Y = 0, this.attrs = {}, this.paper = r, this.matrix = t.matrix(), this._ = { transform: [], sx: 1, sy: 1, dx: 0, dy: 0, deg: 0, dirty: 1, dirtyT: 1 }, !r.bottom && (r.bottom = this), this.prev = r.top, r.top && (r.top.next = this), r.top = this, this.next = null }, M = t.el; E.prototype = M, M.constructor = E, M.transform = function (e) { if (null == e) return this._.transform; var i = this.paper._viewBoxShift, n = i ? "s" + [i.scale, i.scale] + "-1-1t" + [i.dx, i.dy] : d, a; i && (a = e = r(e).replace(/\.{3}|\u2026/g, this._.transform || d)), t._extractTransform(this, n + e); var s = this.matrix.clone(), o = this.skew, l = this.node, h, u = ~r(this.attrs.fill).indexOf("-"), c = !r(this.attrs.fill).indexOf("url("); if (s.translate(1, 1), c || u || "image" == this.type) if (o.matrix = "1 0 0 1", o.offset = "0 0", h = s.split(), u && h.noRotation || !h.isSimple) { l.style.filter = s.toFilter(); var f = this.getBBox(), g = this.getBBox(1), v = f.x - g.x, x = f.y - g.y; l.coordorigin = v * -b + p + x * -b, C(this, 1, 1, v, x, 0) } else l.style.filter = d, C(this, h.scalex, h.scaley, h.dx, h.dy, h.rotate); else l.style.filter = d, o.matrix = r(s), o.offset = s.offset(); return null !== a && (this._.transform = a, t._extractTransform(this, a)), this }, M.rotate = function (t, e, n) { if (this.removed) return this; if (null != t) { if (t = r(t).split(u), t.length - 1 && (e = i(t[1]), n = i(t[2])), t = i(t[0]), null == n && (e = n), null == e || null == n) { var a = this.getBBox(1); e = a.x + a.width / 2, n = a.y + a.height / 2 } return this._.dirtyT = 1, this.transform(this._.transform.concat([["r", t, e, n]])), this } }, M.translate = function (t, e) { return this.removed ? this : (t = r(t).split(u), t.length - 1 && (e = i(t[1])), t = i(t[0]) || 0, e = +e || 0, this._.bbox && (this._.bbox.x += t, this._.bbox.y += e), this.transform(this._.transform.concat([["t", t, e]])), this) }, M.scale = function (t, e, n, a) { if (this.removed) return this; if (t = r(t).split(u), t.length - 1 && (e = i(t[1]), n = i(t[2]), a = i(t[3]), isNaN(n) && (n = null), isNaN(a) && (a = null)), t = i(t[0]), null == e && (e = t), null == a && (n = a), null == n || null == a) var s = this.getBBox(1); return n = null == n ? s.x + s.width / 2 : n, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([["s", t, e, n, a]])), this._.dirtyT = 1, this }, M.hide = function () { return !this.removed && (this.node.style.display = "none"), this }, M.show = function () { return !this.removed && (this.node.style.display = d), this }, M.auxGetBBox = t.el.getBBox, M.getBBox = function () { var t = this.auxGetBBox(); if (this.paper && this.paper._viewBoxShift) { var e = {}, r = 1 / this.paper._viewBoxShift.scale; return e.x = t.x - this.paper._viewBoxShift.dx, e.x *= r, e.y = t.y - this.paper._viewBoxShift.dy, e.y *= r, e.width = t.width * r, e.height = t.height * r, e.x2 = e.x + e.width, e.y2 = e.y + e.height, e } return t }, M._getBBox = function () { return this.removed ? {} : { x: this.X + (this.bbx || 0) - this.W / 2, y: this.Y - this.H, width: this.W, height: this.H } }, M.remove = function () { if (!this.removed && this.node.parentNode) { this.paper.__set__ && this.paper.__set__.exclude(this), t.eve.unbind("raphael.*.*." + this.id), t._tear(this, this.paper), this.node.parentNode.removeChild(this.node), this.shape && this.shape.parentNode.removeChild(this.shape); for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null; this.removed = !0 } }, M.attr = function (r, i) { if (this.removed) return this; if (null == r) { var n = {}; for (var a in this.attrs) this.attrs[e](a) && (n[a] = this.attrs[a]); return n.gradient && "none" == n.fill && (n.fill = n.gradient) && delete n.gradient, n.transform = this._.transform, n } if (null == i && t.is(r, "string")) { if (r == h && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; for (var s = r.split(u), o = {}, l = 0, f = s.length; l < f; l++) r = s[l], r in this.attrs ? o[r] = this.attrs[r] : t.is(this.paper.customAttributes[r], "function") ? o[r] = this.paper.customAttributes[r].def : o[r] = t._availableAttrs[r]; return f - 1 ? o : o[s[0]] } if (this.attrs && null == i && t.is(r, "array")) { for (o = {}, l = 0, f = r.length; l < f; l++) o[r[l]] = this.attr(r[l]); return o } var p; null != i && (p = {}, p[r] = i), null == i && t.is(r, "object") && (p = r); for (var d in p) c("raphael.attr." + d + "." + this.id, this, p[d]); if (p) { for (d in this.paper.customAttributes) if (this.paper.customAttributes[e](d) && p[e](d) && t.is(this.paper.customAttributes[d], "function")) { var g = this.paper.customAttributes[d].apply(this, [].concat(p[d])); this.attrs[d] = p[d]; for (var v in g) g[e](v) && (p[v] = g[v]) } p.text && "text" == this.type && (this.textpath.string = p.text), A(this, p) } return this }, M.toFront = function () { return !this.removed && this.node.parentNode.appendChild(this.node), this.paper && this.paper.top != this && t._tofront(this, this.paper), this }, M.toBack = function () { return this.removed ? this : (this.node.parentNode.firstChild != this.node && (this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild), t._toback(this, this.paper)), this) }, M.insertAfter = function (e) { return this.removed ? this : (e.constructor == t.st.constructor && (e = e[e.length - 1]), e.node.nextSibling ? e.node.parentNode.insertBefore(this.node, e.node.nextSibling) : e.node.parentNode.appendChild(this.node), t._insertafter(this, e, this.paper), this) }, M.insertBefore = function (e) { return this.removed ? this : (e.constructor == t.st.constructor && (e = e[0]), e.node.parentNode.insertBefore(this.node, e.node), t._insertbefore(this, e, this.paper), this) }, M.blur = function (e) { var r = this.node.runtimeStyle, i = r.filter; return i = i.replace(x, d), 0 !== +e ? (this.attrs.blur = e, r.filter = i + p + f + ".Blur(pixelradius=" + (+e || 1.5) + ")", r.margin = t.format("-{0}px 0 0 -{0}px", a(+e || 1.5))) : (r.filter = i, r.margin = 0, delete this.attrs.blur), this }, t._engine.path = function (t, e) { var r = N("shape"); r.style.cssText = m, r.coordsize = b + p + b, r.coordorigin = e.coordorigin; var i = new E(r, e), n = { fill: "none", stroke: "#000" }; t && (n.path = t), i.type = "path", i.path = [], i.Path = d, A(i, n), e.canvas && e.canvas.appendChild(r); var a = N("skew"); return a.on = !0, r.appendChild(a), i.skew = a, i.transform(d), i }, t._engine.rect = function (e, r, i, n, a, s) { var o = t._rectPath(r, i, n, a, s), l = e.path(o), h = l.attrs; return l.X = h.x = r, l.Y = h.y = i, l.W = h.width = n, l.H = h.height = a, h.r = s, h.path = o, l.type = "rect", l }, t._engine.ellipse = function (t, e, r, i, n) { var a = t.path(), s = a.attrs; return a.X = e - i, a.Y = r - n, a.W = 2 * i, a.H = 2 * n, a.type = "ellipse", A(a, { cx: e, cy: r, rx: i, ry: n }), a }, t._engine.circle = function (t, e, r, i) { var n = t.path(), a = n.attrs; return n.X = e - i, n.Y = r - i, n.W = n.H = 2 * i, n.type = "circle", A(n, { cx: e, cy: r, r: i }), n }, t._engine.image = function (e, r, i, n, a, s) { var o = t._rectPath(i, n, a, s), l = e.path(o).attr({ stroke: "none" }), u = l.attrs, c = l.node, f = c.getElementsByTagName(h)[0]; return u.src = r, l.X = u.x = i, l.Y = u.y = n, l.W = u.width = a, l.H = u.height = s, u.path = o, l.type = "image", f.parentNode == c && c.removeChild(f), f.rotate = !0, f.src = r, f.type = "tile", l._.fillpos = [i, n], l._.fillsize = [a, s], c.appendChild(f), C(l, 1, 1, 0, 0, 0), l }, t._engine.text = function (e, i, n, s) { var o = N("shape"), l = N("path"), h = N("textpath"); i = i || 0, n = n || 0, s = s || "", l.v = t.format("m{0},{1}l{2},{1}", a(i * b), a(n * b), a(i * b) + 1), l.textpathok = !0, h.string = r(s), h.on = !0, o.style.cssText = m, o.coordsize = b + p + b, o.coordorigin = "0 0"; var u = new E(o, e), c = { fill: "#000", stroke: "none", font: t._availableAttrs.font, text: s }; u.shape = o, u.path = l, u.textpath = h, u.type = "text", u.attrs.text = r(s), u.attrs.x = i, u.attrs.y = n, u.attrs.w = 1, u.attrs.h = 1, A(u, c), o.appendChild(h), o.appendChild(l), e.canvas.appendChild(o); var f = N("skew"); return f.on = !0, o.appendChild(f), u.skew = f, u.transform(d), u }, t._engine.setSize = function (e, r) { var i = this.canvas.style; return this.width = e, this.height = r, e == +e && (e += "px"), r == +r && (r += "px"), i.width = e, i.height = r, i.clip = "rect(0 " + e + " " + r + " 0)", this._viewBox && t._engine.setViewBox.apply(this, this._viewBox), this }, t._engine.setViewBox = function (e, r, i, n, a) { t.eve("raphael.setViewBox", this, this._viewBox, [e, r, i, n, a]); var s = this.getSize(), o = s.width, l = s.height, h, u; return a && (h = l / n, u = o / i, i * h < o && (e -= (o - i * h) / 2 / h), n * u < l && (r -= (l - n * u) / 2 / u)), this._viewBox = [e, r, i, n, !!a], this._viewBoxShift = { dx: -e, dy: -r, scale: s }, this.forEach(function (t) { t.transform("...") }), this }; var N; t._engine.initWin = function (t) { var e = t.document; e.styleSheets.length < 31 ? e.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)") : e.styleSheets[0].addRule(".rvml", "behavior:url(#default#VML)"); try { !e.namespaces.rvml && e.namespaces.add("rvml", "urn:schemas-microsoft-com:vml"), N = function (t) { return e.createElement("<rvml:" + t + ' class="rvml">') } } catch (r) { N = function (t) { return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">') } } }, t._engine.initWin(t._g.win), t._engine.create = function () { var e = t._getContainer.apply(0, arguments), r = e.container, i = e.height, n, a = e.width, s = e.x, o = e.y; if (!r) throw new Error("VML container not found."); var l = new t._Paper, h = l.canvas = t._g.doc.createElement("div"), u = h.style; return s = s || 0, o = o || 0, a = a || 512, i = i || 342, l.width = a, l.height = i, a == +a && (a += "px"), i == +i && (i += "px"), l.coordsize = 1e3 * b + p + 1e3 * b, l.coordorigin = "0 0", l.span = t._g.doc.createElement("span"), l.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;", h.appendChild(l.span), u.cssText = t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", a, i), 1 == r ? (t._g.doc.body.appendChild(h), u.left = s + "px", u.top = o + "px", u.position = "absolute") : r.firstChild ? r.insertBefore(h, r.firstChild) : r.appendChild(h), l.renderfix = function () { }, l }, t.prototype.clear = function () { t.eve("raphael.clear", this), this.canvas.innerHTML = d, this.span = t._g.doc.createElement("span"), this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;", this.canvas.appendChild(this.span), this.bottom = this.top = null }, t.prototype.remove = function () { t.eve("raphael.remove", this), this.canvas.parentNode.removeChild(this.canvas); for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null; return !0 }; var L = t.st; for (var z in M) M[e](z) && !L[e](z) && (L[z] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t].apply(r, e) }) } }(z)) } }.apply(e, i), !(void 0 !== n && (t.exports = n)) }])
});


// TinyColor v1.4.1
// https://github.com/bgrins/TinyColor
// 2016-07-07, Brian Grinstead, MIT License
!function (a) { function b(a, d) { if (a = a ? a : "", d = d || {}, a instanceof b) return a; if (!(this instanceof b)) return new b(a, d); var e = c(a); this._originalInput = a, this._r = e.r, this._g = e.g, this._b = e.b, this._a = e.a, this._roundA = P(100 * this._a) / 100, this._format = d.format || e.format, this._gradientType = d.gradientType, this._r < 1 && (this._r = P(this._r)), this._g < 1 && (this._g = P(this._g)), this._b < 1 && (this._b = P(this._b)), this._ok = e.ok, this._tc_id = O++ } function c(a) { var b = { r: 0, g: 0, b: 0 }, c = 1, e = null, g = null, i = null, j = !1, k = !1; return "string" == typeof a && (a = K(a)), "object" == typeof a && (J(a.r) && J(a.g) && J(a.b) ? (b = d(a.r, a.g, a.b), j = !0, k = "%" === String(a.r).substr(-1) ? "prgb" : "rgb") : J(a.h) && J(a.s) && J(a.v) ? (e = G(a.s), g = G(a.v), b = h(a.h, e, g), j = !0, k = "hsv") : J(a.h) && J(a.s) && J(a.l) && (e = G(a.s), i = G(a.l), b = f(a.h, e, i), j = !0, k = "hsl"), a.hasOwnProperty("a") && (c = a.a)), c = z(c), { ok: j, format: a.format || k, r: Q(255, R(b.r, 0)), g: Q(255, R(b.g, 0)), b: Q(255, R(b.b, 0)), a: c } } function d(a, b, c) { return { r: 255 * A(a, 255), g: 255 * A(b, 255), b: 255 * A(c, 255) } } function e(a, b, c) { a = A(a, 255), b = A(b, 255), c = A(c, 255); var d, e, f = R(a, b, c), g = Q(a, b, c), h = (f + g) / 2; if (f == g) d = e = 0; else { var i = f - g; switch (e = h > .5 ? i / (2 - f - g) : i / (f + g), f) { case a: d = (b - c) / i + (c > b ? 6 : 0); break; case b: d = (c - a) / i + 2; break; case c: d = (a - b) / i + 4 }d /= 6 } return { h: d, s: e, l: h } } function f(a, b, c) { function d(a, b, c) { return 0 > c && (c += 1), c > 1 && (c -= 1), 1 / 6 > c ? a + 6 * (b - a) * c : .5 > c ? b : 2 / 3 > c ? a + 6 * (b - a) * (2 / 3 - c) : a } var e, f, g; if (a = A(a, 360), b = A(b, 100), c = A(c, 100), 0 === b) e = f = g = c; else { var h = .5 > c ? c * (1 + b) : c + b - c * b, i = 2 * c - h; e = d(i, h, a + 1 / 3), f = d(i, h, a), g = d(i, h, a - 1 / 3) } return { r: 255 * e, g: 255 * f, b: 255 * g } } function g(a, b, c) { a = A(a, 255), b = A(b, 255), c = A(c, 255); var d, e, f = R(a, b, c), g = Q(a, b, c), h = f, i = f - g; if (e = 0 === f ? 0 : i / f, f == g) d = 0; else { switch (f) { case a: d = (b - c) / i + (c > b ? 6 : 0); break; case b: d = (c - a) / i + 2; break; case c: d = (a - b) / i + 4 }d /= 6 } return { h: d, s: e, v: h } } function h(b, c, d) { b = 6 * A(b, 360), c = A(c, 100), d = A(d, 100); var e = a.floor(b), f = b - e, g = d * (1 - c), h = d * (1 - f * c), i = d * (1 - (1 - f) * c), j = e % 6, k = [d, h, g, g, i, d][j], l = [i, d, d, h, g, g][j], m = [g, g, i, d, d, h][j]; return { r: 255 * k, g: 255 * l, b: 255 * m } } function i(a, b, c, d) { var e = [F(P(a).toString(16)), F(P(b).toString(16)), F(P(c).toString(16))]; return d && e[0].charAt(0) == e[0].charAt(1) && e[1].charAt(0) == e[1].charAt(1) && e[2].charAt(0) == e[2].charAt(1) ? e[0].charAt(0) + e[1].charAt(0) + e[2].charAt(0) : e.join("") } function j(a, b, c, d, e) { var f = [F(P(a).toString(16)), F(P(b).toString(16)), F(P(c).toString(16)), F(H(d))]; return e && f[0].charAt(0) == f[0].charAt(1) && f[1].charAt(0) == f[1].charAt(1) && f[2].charAt(0) == f[2].charAt(1) && f[3].charAt(0) == f[3].charAt(1) ? f[0].charAt(0) + f[1].charAt(0) + f[2].charAt(0) + f[3].charAt(0) : f.join("") } function k(a, b, c, d) { var e = [F(H(d)), F(P(a).toString(16)), F(P(b).toString(16)), F(P(c).toString(16))]; return e.join("") } function l(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.s -= c / 100, d.s = B(d.s), b(d) } function m(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.s += c / 100, d.s = B(d.s), b(d) } function n(a) { return b(a).desaturate(100) } function o(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.l += c / 100, d.l = B(d.l), b(d) } function p(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toRgb(); return d.r = R(0, Q(255, d.r - P(255 * -(c / 100)))), d.g = R(0, Q(255, d.g - P(255 * -(c / 100)))), d.b = R(0, Q(255, d.b - P(255 * -(c / 100)))), b(d) } function q(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.l -= c / 100, d.l = B(d.l), b(d) } function r(a, c) { var d = b(a).toHsl(), e = (d.h + c) % 360; return d.h = 0 > e ? 360 + e : e, b(d) } function s(a) { var c = b(a).toHsl(); return c.h = (c.h + 180) % 360, b(c) } function t(a) { var c = b(a).toHsl(), d = c.h; return [b(a), b({ h: (d + 120) % 360, s: c.s, l: c.l }), b({ h: (d + 240) % 360, s: c.s, l: c.l })] } function u(a) { var c = b(a).toHsl(), d = c.h; return [b(a), b({ h: (d + 90) % 360, s: c.s, l: c.l }), b({ h: (d + 180) % 360, s: c.s, l: c.l }), b({ h: (d + 270) % 360, s: c.s, l: c.l })] } function v(a) { var c = b(a).toHsl(), d = c.h; return [b(a), b({ h: (d + 72) % 360, s: c.s, l: c.l }), b({ h: (d + 216) % 360, s: c.s, l: c.l })] } function w(a, c, d) { c = c || 6, d = d || 30; var e = b(a).toHsl(), f = 360 / d, g = [b(a)]; for (e.h = (e.h - (f * c >> 1) + 720) % 360; --c;)e.h = (e.h + f) % 360, g.push(b(e)); return g } function x(a, c) { c = c || 6; for (var d = b(a).toHsv(), e = d.h, f = d.s, g = d.v, h = [], i = 1 / c; c--;)h.push(b({ h: e, s: f, v: g })), g = (g + i) % 1; return h } function y(a) { var b = {}; for (var c in a) a.hasOwnProperty(c) && (b[a[c]] = c); return b } function z(a) { return a = parseFloat(a), (isNaN(a) || 0 > a || a > 1) && (a = 1), a } function A(b, c) { D(b) && (b = "100%"); var d = E(b); return b = Q(c, R(0, parseFloat(b))), d && (b = parseInt(b * c, 10) / 100), a.abs(b - c) < 1e-6 ? 1 : b % c / parseFloat(c) } function B(a) { return Q(1, R(0, a)) } function C(a) { return parseInt(a, 16) } function D(a) { return "string" == typeof a && -1 != a.indexOf(".") && 1 === parseFloat(a) } function E(a) { return "string" == typeof a && -1 != a.indexOf("%") } function F(a) { return 1 == a.length ? "0" + a : "" + a } function G(a) { return 1 >= a && (a = 100 * a + "%"), a } function H(b) { return a.round(255 * parseFloat(b)).toString(16) } function I(a) { return C(a) / 255 } function J(a) { return !!V.CSS_UNIT.exec(a) } function K(a) { a = a.replace(M, "").replace(N, "").toLowerCase(); var b = !1; if (T[a]) a = T[a], b = !0; else if ("transparent" == a) return { r: 0, g: 0, b: 0, a: 0, format: "name" }; var c; return (c = V.rgb.exec(a)) ? { r: c[1], g: c[2], b: c[3] } : (c = V.rgba.exec(a)) ? { r: c[1], g: c[2], b: c[3], a: c[4] } : (c = V.hsl.exec(a)) ? { h: c[1], s: c[2], l: c[3] } : (c = V.hsla.exec(a)) ? { h: c[1], s: c[2], l: c[3], a: c[4] } : (c = V.hsv.exec(a)) ? { h: c[1], s: c[2], v: c[3] } : (c = V.hsva.exec(a)) ? { h: c[1], s: c[2], v: c[3], a: c[4] } : (c = V.hex8.exec(a)) ? { r: C(c[1]), g: C(c[2]), b: C(c[3]), a: I(c[4]), format: b ? "name" : "hex8" } : (c = V.hex6.exec(a)) ? { r: C(c[1]), g: C(c[2]), b: C(c[3]), format: b ? "name" : "hex" } : (c = V.hex4.exec(a)) ? { r: C(c[1] + "" + c[1]), g: C(c[2] + "" + c[2]), b: C(c[3] + "" + c[3]), a: I(c[4] + "" + c[4]), format: b ? "name" : "hex8" } : (c = V.hex3.exec(a)) ? { r: C(c[1] + "" + c[1]), g: C(c[2] + "" + c[2]), b: C(c[3] + "" + c[3]), format: b ? "name" : "hex" } : !1 } function L(a) { var b, c; return a = a || { level: "AA", size: "small" }, b = (a.level || "AA").toUpperCase(), c = (a.size || "small").toLowerCase(), "AA" !== b && "AAA" !== b && (b = "AA"), "small" !== c && "large" !== c && (c = "small"), { level: b, size: c } } var M = /^\s+/, N = /\s+$/, O = 0, P = a.round, Q = a.min, R = a.max, S = a.random; b.prototype = { isDark: function () { return this.getBrightness() < 128 }, isLight: function () { return !this.isDark() }, isValid: function () { return this._ok }, getOriginalInput: function () { return this._originalInput }, getFormat: function () { return this._format }, getAlpha: function () { return this._a }, getBrightness: function () { var a = this.toRgb(); return (299 * a.r + 587 * a.g + 114 * a.b) / 1e3 }, getLuminance: function () { var b, c, d, e, f, g, h = this.toRgb(); return b = h.r / 255, c = h.g / 255, d = h.b / 255, e = .03928 >= b ? b / 12.92 : a.pow((b + .055) / 1.055, 2.4), f = .03928 >= c ? c / 12.92 : a.pow((c + .055) / 1.055, 2.4), g = .03928 >= d ? d / 12.92 : a.pow((d + .055) / 1.055, 2.4), .2126 * e + .7152 * f + .0722 * g }, setAlpha: function (a) { return this._a = z(a), this._roundA = P(100 * this._a) / 100, this }, toHsv: function () { var a = g(this._r, this._g, this._b); return { h: 360 * a.h, s: a.s, v: a.v, a: this._a } }, toHsvString: function () { var a = g(this._r, this._g, this._b), b = P(360 * a.h), c = P(100 * a.s), d = P(100 * a.v); return 1 == this._a ? "hsv(" + b + ", " + c + "%, " + d + "%)" : "hsva(" + b + ", " + c + "%, " + d + "%, " + this._roundA + ")" }, toHsl: function () { var a = e(this._r, this._g, this._b); return { h: 360 * a.h, s: a.s, l: a.l, a: this._a } }, toHslString: function () { var a = e(this._r, this._g, this._b), b = P(360 * a.h), c = P(100 * a.s), d = P(100 * a.l); return 1 == this._a ? "hsl(" + b + ", " + c + "%, " + d + "%)" : "hsla(" + b + ", " + c + "%, " + d + "%, " + this._roundA + ")" }, toHex: function (a) { return i(this._r, this._g, this._b, a) }, toHexString: function (a) { return "#" + this.toHex(a) }, toHex8: function (a) { return j(this._r, this._g, this._b, this._a, a) }, toHex8String: function (a) { return "#" + this.toHex8(a) }, toRgb: function () { return { r: P(this._r), g: P(this._g), b: P(this._b), a: this._a } }, toRgbString: function () { return 1 == this._a ? "rgb(" + P(this._r) + ", " + P(this._g) + ", " + P(this._b) + ")" : "rgba(" + P(this._r) + ", " + P(this._g) + ", " + P(this._b) + ", " + this._roundA + ")" }, toPercentageRgb: function () { return { r: P(100 * A(this._r, 255)) + "%", g: P(100 * A(this._g, 255)) + "%", b: P(100 * A(this._b, 255)) + "%", a: this._a } }, toPercentageRgbString: function () { return 1 == this._a ? "rgb(" + P(100 * A(this._r, 255)) + "%, " + P(100 * A(this._g, 255)) + "%, " + P(100 * A(this._b, 255)) + "%)" : "rgba(" + P(100 * A(this._r, 255)) + "%, " + P(100 * A(this._g, 255)) + "%, " + P(100 * A(this._b, 255)) + "%, " + this._roundA + ")" }, toName: function () { return 0 === this._a ? "transparent" : this._a < 1 ? !1 : U[i(this._r, this._g, this._b, !0)] || !1 }, toFilter: function (a) { var c = "#" + k(this._r, this._g, this._b, this._a), d = c, e = this._gradientType ? "GradientType = 1, " : ""; if (a) { var f = b(a); d = "#" + k(f._r, f._g, f._b, f._a) } return "progid:DXImageTransform.Microsoft.gradient(" + e + "startColorstr=" + c + ",endColorstr=" + d + ")" }, toString: function (a) { var b = !!a; a = a || this._format; var c = !1, d = this._a < 1 && this._a >= 0, e = !b && d && ("hex" === a || "hex6" === a || "hex3" === a || "hex4" === a || "hex8" === a || "name" === a); return e ? "name" === a && 0 === this._a ? this.toName() : this.toRgbString() : ("rgb" === a && (c = this.toRgbString()), "prgb" === a && (c = this.toPercentageRgbString()), ("hex" === a || "hex6" === a) && (c = this.toHexString()), "hex3" === a && (c = this.toHexString(!0)), "hex4" === a && (c = this.toHex8String(!0)), "hex8" === a && (c = this.toHex8String()), "name" === a && (c = this.toName()), "hsl" === a && (c = this.toHslString()), "hsv" === a && (c = this.toHsvString()), c || this.toHexString()) }, clone: function () { return b(this.toString()) }, _applyModification: function (a, b) { var c = a.apply(null, [this].concat([].slice.call(b))); return this._r = c._r, this._g = c._g, this._b = c._b, this.setAlpha(c._a), this }, lighten: function () { return this._applyModification(o, arguments) }, brighten: function () { return this._applyModification(p, arguments) }, darken: function () { return this._applyModification(q, arguments) }, desaturate: function () { return this._applyModification(l, arguments) }, saturate: function () { return this._applyModification(m, arguments) }, greyscale: function () { return this._applyModification(n, arguments) }, spin: function () { return this._applyModification(r, arguments) }, _applyCombination: function (a, b) { return a.apply(null, [this].concat([].slice.call(b))) }, analogous: function () { return this._applyCombination(w, arguments) }, complement: function () { return this._applyCombination(s, arguments) }, monochromatic: function () { return this._applyCombination(x, arguments) }, splitcomplement: function () { return this._applyCombination(v, arguments) }, triad: function () { return this._applyCombination(t, arguments) }, tetrad: function () { return this._applyCombination(u, arguments) } }, b.fromRatio = function (a, c) { if ("object" == typeof a) { var d = {}; for (var e in a) a.hasOwnProperty(e) && (d[e] = "a" === e ? a[e] : G(a[e])); a = d } return b(a, c) }, b.equals = function (a, c) { return a && c ? b(a).toRgbString() == b(c).toRgbString() : !1 }, b.random = function () { return b.fromRatio({ r: S(), g: S(), b: S() }) }, b.mix = function (a, c, d) { d = 0 === d ? 0 : d || 50; var e = b(a).toRgb(), f = b(c).toRgb(), g = d / 100, h = { r: (f.r - e.r) * g + e.r, g: (f.g - e.g) * g + e.g, b: (f.b - e.b) * g + e.b, a: (f.a - e.a) * g + e.a }; return b(h) }, b.readability = function (c, d) { var e = b(c), f = b(d); return (a.max(e.getLuminance(), f.getLuminance()) + .05) / (a.min(e.getLuminance(), f.getLuminance()) + .05) }, b.isReadable = function (a, c, d) { var e, f, g = b.readability(a, c); switch (f = !1, e = L(d), e.level + e.size) { case "AAsmall": case "AAAlarge": f = g >= 4.5; break; case "AAlarge": f = g >= 3; break; case "AAAsmall": f = g >= 7 }return f }, b.mostReadable = function (a, c, d) { var e, f, g, h, i = null, j = 0; d = d || {}, f = d.includeFallbackColors, g = d.level, h = d.size; for (var k = 0; k < c.length; k++)e = b.readability(a, c[k]), e > j && (j = e, i = b(c[k])); return b.isReadable(a, i, { level: g, size: h }) || !f ? i : (d.includeFallbackColors = !1, b.mostReadable(a, ["#fff", "#000"], d)) }; var T = b.names = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "0ff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000", blanchedalmond: "ffebcd", blue: "00f", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", burntsienna: "ea7e5d", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "0ff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgreen: "006400", darkgrey: "a9a9a9", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkslategrey: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dimgrey: "696969", dodgerblue: "1e90ff", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "f0f", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", grey: "808080", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgray: "d3d3d3", lightgreen: "90ee90", lightgrey: "d3d3d3", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslategray: "789", lightslategrey: "789", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "0f0", limegreen: "32cd32", linen: "faf0e6", magenta: "f0f", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370db", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "db7093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", rebeccapurple: "663399", red: "f00", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", slategrey: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", wheat: "f5deb3", white: "fff", whitesmoke: "f5f5f5", yellow: "ff0", yellowgreen: "9acd32" }, U = b.hexNames = y(T), V = function () { var a = "[-\\+]?\\d+%?", b = "[-\\+]?\\d*\\.\\d+%?", c = "(?:" + b + ")|(?:" + a + ")", d = "[\\s|\\(]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")\\s*\\)?", e = "[\\s|\\(]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")\\s*\\)?"; return { CSS_UNIT: new RegExp(c), rgb: new RegExp("rgb" + d), rgba: new RegExp("rgba" + e), hsl: new RegExp("hsl" + d), hsla: new RegExp("hsla" + e), hsv: new RegExp("hsv" + d), hsva: new RegExp("hsva" + e), hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/ } }(); "undefined" != typeof module && module.exports ? module.exports = b : "function" == typeof define && define.amd ? define(function () { return b }) : window.tinycolor = b }(Math);

/*End of Document helper.min.js*/

/*Document Viewer Control*/

var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var gnostice;(function(b){var a=(function(){function c(){}c.click=function(d,f,e){if(d!=null){$(d).on("click",e,f)}};c.change=function(d,f,e){if(d!=null){$(d).on("change",e,f)}};c.scroll=function(d,f,e){if(d!=null){$(d).on("scroll",e,f)}};c.blur=function(d,f,e){if(d!=null){$(d).on("blur",e,f)}};c.keydown=function(d,f,e){if(d!=null){$(d).on("keydown",e,f)}};return c}());b.UIEvents=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(){this._eventHandlers={}}c.prototype.addEventListener=function(d,e){this._eventHandlers[d]=this._eventHandlers[d]||[];this._eventHandlers[d].push({eventHandler:e})};c.prototype.addFormsEventListener=function(d,e,f){this._eventHandlers[d]=this._eventHandlers[d]||[];this._eventHandlers[d].push({eventHandler:f,formFieldSpec:e})};c.prototype.removeEventListener=function(e,g){if(this._eventHandlers[e]==null){return}var d=this._eventHandlers[e];var f=0;while(f<d.length){if(g==d[f].eventHandler){d.splice(f,1);break}else{++f}}};c.prototype.removeAllListeners=function(d){if(this._eventHandlers[d]==null){return}this._eventHandlers[d]=[]};c.prototype.dispatchAll=function(e,g){var d=this._eventHandlers[e];if(d){for(var f=0;f<d.length;f++){this.dispatch(d[f].eventHandler,g)}}};c.prototype.dispatchAllFormEvents=function(e,j,k){var d=this._eventHandlers[e];var g=null;if(d){for(var h=0;h<d.length;++h){var f=d[h].formFieldSpec;if(f==null||f==""||f=="*"||f==j){g=this.dispatch(d[h].eventHandler,k)}}}return g};c.prototype.dispatch=function(d,e){if(e===void 0){e=null}if(d!=null){return d(e)}return null};c.prototype.dispatchAllAsync=function(f,j){if(j===void 0){j=null}var e=jQuery.Deferred();var d=this._eventHandlers[f];var g=new Array();if(d){for(var h=0;h<d.length;h++){g.push(this.dispatchAsync(d[h].eventHandler,j))}}$.when.apply($,g).done(function(){e.resolve()}).fail(function(){e.reject()});return e.promise()};c.prototype.dispatchAsync=function(f,h){if(h===void 0){h=null}var d=jQuery.Deferred();var e=false;var g=f(h);if(g!=null){var i=g;if(i!=null){e=true;i.done(function(j){d.resolve(j)}).fail(function(j){d.reject(j)})}}if(!e){d.resolve(g)}return d.promise()};return c}());b.EventDispatcher=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(g,i,f,t,l,r,q,u,o,j,y,C,v,x,D,s,A,k,B,G,n,e,w,E,h,z,d,m,H,p,F,I){this.viewer=g;this.viewableArea=i;this.sidePaneToggleBtn=f;this.openDoc=t;this.printBtn=l;this.saveBtn=r;this.downloadBtn=q;this.downloadAsCmbBox=u;this.firstPage=o;this.prevPage=j;this.nextPage=y;this.lastPage=C;this.uploader=v;this.pageIndicator=x;this.zoomIn=D;this.zoomOut=s;this.zoomDropdown=A;this.rotatePagesClockwise=k;this.rotatePagesCounterClockwise=B;this.invertBtn=G;this.fullScreenBtn=n;this.addSignatureBtn=e;this.redactBtn=w;this.bookmarkBtn=E;this.bookmarkContent=h;this.thumbanailBtn=z;this.thumbnailContent=d;this.progressAnimation=m;this.passwordDialog=H;this.messageBox=p;this.yesNoCancelDialog=F;this.warningBox=I}return c}());b.ViewerDOM=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(){}c.prototype.ApplyDigitizationSettings=function(e,g,h,f,d){return null};c.prototype.uploadDocument=function(e,f,d){return null};c.prototype.uploadDocumentFromBuffer=function(d,e){return null};c.prototype.uploadDocumentFromUri=function(d,e){return null};c.prototype.loadDocumentFromServer=function(d,e){return null};c.prototype.getDocInfo=function(g,d,f,e){return null};c.prototype.getDocumentPageCount=function(g,d,f,e){return null};c.prototype.getDocBookmarks=function(d){return null};c.prototype.getDocumentDownloadURL=function(e,d){return null};c.prototype.getDownloadDocumentAsURL=function(f,e,d){return null};c.prototype.getPage=function(h,d,f,g,e){if(e===void 0){e=false}return null};c.prototype.getPrintPageURLs=function(f,e,d){return null};c.prototype.getPageText=function(e,d){return null};c.prototype.getPageFormFields=function(e,d){return null};c.prototype.getPageThumbnail=function(f,d,e){return null};c.prototype.getPageAnnots=function(e,d){return null};c.prototype.disposeDocument=function(d){return null};c.prototype.saveDocumentChanges=function(e,d){return null};c.prototype.getDocumentAbsolutePath=function(d){return null};return c}());a.ServerCom=b})(gnostice||(gnostice={}));var gnostice;(function(c){var b=(function(){function d(g,e,f,h){this.enableDigitization=g;this.textRecognitionLanguage=e;this.enableFormFilling=f;this.enableAnnotation=h}return d}());var a=(function(e){__extends(d,e);function d(){e.call(this);this.pollInterval=2000;this.pollRetryMaxCount=10}d.prototype.ApplyDigitizationSettings=function(h,j,g,i,f){var k=new b(h,j,g,i);c.logger.logInfo("Request - Action : ApplyDigitizationSettings, type: Post, Url: "+f+"/viewersettings");$.ajax({url:f+"/viewersettings",type:"POST",data:JSON.stringify(k),cache:false,dataType:"json",processData:false,contentType:false}).then(function(m,n,l){return $.Deferred().resolve()})};d.prototype.uploadDocument=function(g,h,f){var i=new FormData();i.append("document",g);c.logger.logInfo("Request - Action: uploadDocument, type: Post, Url: "+f+"/docs");return $.ajax({url:f+"/docs",type:"POST",data:i,cache:false,dataType:"json",processData:false,contentType:false}).then(function(k,l,j){return $.Deferred().resolve(k).promise()},function(j,l,k){return $.Deferred().reject(j.status,k,j.responseJSON).promise()})};d.prototype.loadDocumentFromServer=function(f,h){var g={};if(f.length>0){g.ServerFileName=f}c.logger.logInfo("Request - Action : uploadDocumentFromUri, type: Post, Url: "+h+"/docs");return $.ajax({url:h+"/docs",type:"POST",data:g,cache:false}).then(function(j,k,i){return $.Deferred().resolve(j).promise()},function(i,k,j){return $.Deferred().reject(i.status,j,i.responseJSON).promise()})};d.prototype.uploadDocumentFromBuffer=function(f,h){var g={};if(f.length>0){g.documentBase64=f}c.logger.logInfo("Request - Action : uploadDocumentFromBuffer, type: Post, Url: "+h+"/docs");return $.ajax({url:h+"/docs",type:"POST",data:g,cache:false}).then(function(j,k,i){return $.Deferred().resolve(j).promise()},function(i,k,j){return $.Deferred().reject(i.status,j,i.responseJSON).promise()})};d.prototype.uploadDocumentFromUri=function(f,h){var g={};if(f.length>0){g.documentUrl=f}c.logger.logInfo("Request - Action : uploadDocumentFromUri, type: Post, Url: "+h+"/docs");return $.ajax({url:h+"/docs",type:"POST",data:g,cache:false}).then(function(j,k,i){return $.Deferred().resolve(j).promise()},function(i,k,j){return $.Deferred().reject(i.status,j,i.responseJSON).promise()})};d.prototype.getDocInfo=function(j,g,i,h){var f=j+"/info?viewDPI="+i+"&printDPI="+h;c.logger.logInfo("Request - Action : getDocInfo, type: GET, Url: "+f);return this.doAjaxAndPoll("GET",f.toString())};d.prototype.getDocBookmarks=function(g){var f=g+"/bookmarks";c.logger.logInfo("Request - Action : getDocBookmarks, type: GET, Url: "+f);return $.ajax({type:"GET",url:f,contentType:"json"})};d.prototype.getDocumentDownloadURL=function(i,g){var h="";if(g!=""){h="&filename="+g}var f=jQuery.Deferred();f.resolve({url:i+"/download?"+h});return f.promise()};d.prototype.getDownloadDocumentAsURL=function(j,i,g){var h="";if(g!=""){h="&filename="+g}var f=jQuery.Deferred();f.resolve({url:j+"/download?&format="+i+h});return f.promise()};d.prototype.getPage=function(k,f,h,j,g){if(g===void 0){g=false}c.logger.logInfo("Request - Action : getPage, type: GET, Url: "+k+"/pages/"+f+"?dpi="+h);var i=k+"/pages/"+f+"?dpi="+h+"&render-form-fields="+j+"&annotations-interactive-mode="+g;return this.doAjaxAndPoll("GET",i.toString())};d.prototype.getPrintPageURLs=function(k,j,h){var i=new Array();var f=k+"/status";var g=jQuery.Deferred();this.IsDocumentReadyForPrint(f).done(function(l){for(var m=1;m<=l.pageCount;m++){var n=k+"/pages/"+m+"/image?dpi=96&render-form-fields=true&annotations-interactive-mode=false";i.push(n)}g.resolve({urls:i})}).fail(function(l,n,m){g.reject(l,n,m)});return g.promise()};d.prototype.IsDocumentReadyForPrint=function(f){return this.doAjaxAndPollForPrintPageCount("GET",f.toString())};d.prototype.getPageText=function(g,f){c.logger.logInfo("Request - Action : getPageText, type: GET, Url: "+g+"/pages/"+f+"/text/");return $.ajax({type:"GET",url:g+"/pages/"+f+"/text/",data:{includeBoundingRect:true},contentType:"json"}).then(function(i,j,h){return $.Deferred().resolve(i).promise()},function(h,j,i){return $.Deferred().reject(h.status,i,h.responseJSON).promise()})};d.prototype.getPageFormFields=function(g,f){c.logger.logInfo("Request - Action : getPageFormFields, type: GET, Url: "+g+"/pages/"+f+"/formFields/");return $.ajax({type:"GET",url:g+"/pages/"+f+"/formFields/",contentType:"json"}).then(function(i,j,h){return $.Deferred().resolve(i).promise()},function(h,j,i){return $.Deferred().reject(h.status,i,h.responseJSON).promise()})};d.prototype.getPageThumbnail=function(i,f,h){c.logger.logInfo("Request - Action : getThumbnailPage, type: GET, Url: "+i+"/pages/"+f+"/thumbnail");var g=i+"/pages/"+f+"/thumbnail";return this.doAjaxAndPoll("GET",g.toString())};d.prototype.getPageAnnots=function(g,f){c.logger.logInfo("Request - Action : getPageAnnots, type: GET, Url: "+g+"/pages/"+f+"/annots/");return $.ajax({type:"GET",url:g+"/pages/"+f+"/annots/",contentType:"json"}).then(function(i,j,h){return $.Deferred().resolve(i).promise()},function(h,j,i){return $.Deferred().reject(h.status,i,h.responseJSON).promise()})};d.prototype.saveDocumentChanges=function(g,f){c.logger.logInfo("Request - Action : saveDocumentChanges, type: Post, Url: "+g+"/save");return $.ajax({url:g+"/save",type:"PUT",data:JSON.stringify(f),cache:false,dataType:"json",processData:false,contentType:false})};d.prototype.getDocumentAbsolutePath=function(f){return $.ajax({type:"GET",url:f,contentType:"json"})};d.prototype.disposeDocument=function(f){c.logger.logInfo("Request - Action : disposeDocument, type: GET, Url: "+f+"/dispose");return $.ajax({type:"GET",url:f+"/dispose",contentType:"json"}).then(function(h,i,g){return $.Deferred().resolve(h).promise()},function(g,i,h){return $.Deferred().reject(g.status,h,g.responseJSON).promise()})};d.prototype.doAjax=function(i,h,f){var g=this;return $.ajax({url:h,type:i,dataType:f||"json",contentType:false,cache:false,processData:false})};d.prototype.doAjaxWithBody=function(k,i,g,j,f){var h=this;return $.ajax({url:i,type:k,dataType:f||"json",data:g,contentType:j||false,cache:false,processData:false})};d.prototype.doAjaxAndPoll=function(j,h,f){c.logger.logInfo("Action: doAjaxAndPoll, Requesting URL : "+h);var g=this.doAjax(j,h,f);var i=this;return g.then(function(k,n,l){if(l.status===200){c.logger.logInfo("Action: doAjaxAndPoll, successfull response, Requesting URL : "+h);return $.Deferred().resolve(k).promise()}else{if(l.status===202){c.logger.logInfo("Action: doAjaxAndPoll, Result is not ready so we need to poll, Requesting URL : "+h);var m=$.Deferred();setTimeout(i.doPoll,i.pollInterval,h.toString(),m,i,1);return m.promise()}else{c.logger.logInfo("Action: doAjaxAndPoll, Unexpected response, "+l.responseJSON+" Requesting URL : "+h);return $.Deferred().reject(l.status,n,l.responseJSON).promise()}}},function(k,m,l){return $.Deferred().reject(k.status,l,k.responseJSON).promise()})};d.prototype.doAjaxWithBodyAndPoll=function(l,i,g,k,f){var h=this.doAjaxWithBody(l,i,g,k,f);var j=this;return h.then(function(m,p,n){if(n.status===201){c.logger.logInfo("Action: doAjaxWithBodyAndPoll, successfull response, Requesting URL : "+i);return $.Deferred().resolve(m).promise()}else{if(n.status===202){var o=$.Deferred();c.logger.logInfo("Action: doAjaxWithBodyAndPoll, status-202, retry after : "+j.pollInterval+", Requesting URL : "+i);setTimeout(j.doPoll,j.pollInterval,i,o,j,1);return o.promise()}else{c.logger.logInfo("Action: doAjaxWithBodyAndPoll, Unexpected response, "+n.responseJSON+" Requesting URL : "+i);return $.Deferred().reject(n.status,p,n.responseJSON).promise()}}},function(m,o,n){return $.Deferred().reject(m.status,n,m.responseJSON).promise()})};d.prototype.doPoll=function(g,f,h,i){var j=h.doAjax("GET",g);return j.then(function(k,m,l){if(l.status===200||l.status===201){c.logger.logInfo("Action: doPoll, successfull response, Requesting URL : "+g);f.resolve(k)}else{if(l.status===202){++i;c.logger.logInfo("Action: doPoll, Result is not ready so we need to poll, re-try : "+i+" of "+h.pollRetryMaxCount+" Requesting URL : "+g);if(i>=h.pollRetryMaxCount){c.logger.logInfo("Action: doPoll, Result is not ready and Server taking too long, Requesting URL : "+g);f.reject(k,"Timeout",0,"Exceeded poll retry count.");return}setTimeout(h.doPoll,h.pollInterval,g,f,h,i)}else{c.logger.logInfo("Action: doPoll, Unexpected response, "+l.responseJSON+" Requesting URL : "+g);f.reject(l.status,m,l.responseJSON)}}},function(k,m,l){return f.reject(k.status,l,k.responseJSON)})};d.prototype.doAjaxAndPollForPrintPageCount=function(j,h,f){c.logger.logInfo("Action: doAjaxAndPoll, Requesting URL : "+h);var g=this.doAjax(j,h,f);var i=this;return g.then(function(k,n,l){if(k.renderingCompleted){c.logger.logInfo("Action: doAjaxAndPoll, successfull response, Requesting URL : "+h);return $.Deferred().resolve(k).promise()}else{c.logger.logInfo("Action: doAjaxAndPoll, Result is not ready so we need to poll, Requesting URL : "+h);var m=$.Deferred();setTimeout(i.doPollForPrintPageCount,i.pollInterval,h.toString(),m,i,1);return m.promise()}},function(k,m,l){return $.Deferred().reject(k.status,l,k.responseJSON).promise()})};d.prototype.doPollForPrintPageCount=function(g,f,h,i){var j=h.doAjax("GET",g);return j.then(function(k,m,l){if(k.renderingCompleted){c.logger.logInfo("Action: doPoll, successfull response, Requesting URL : "+g);f.resolve(k)}else{++i;c.logger.logInfo("Action: doPoll, Result is not ready so we need to poll, re-try : "+i+" of "+h.pollRetryMaxCount+" Requesting URL : "+g);if(i>=h.pollRetryMaxCount){c.logger.logInfo("Action: doPoll, Result is not ready and Server taking too long, Requesting URL : "+g);f.reject(504,"Timeout",0,"Exceeded poll retry count.");return}setTimeout(h.doPollForPrintPageCount,h.pollInterval,g,f,h,i)}},function(k,m,l){return f.reject(k.status,l,k.responseJSON)})};return d}(c.ServerCom));c.DOTNETServerCom=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments)}c.prototype.uploadDocument=function(g,h,e){var f=window;return f.stardocs.storage.upload(g,null,true)};c.prototype.uploadDocumentFromBuffer=function(e,f){return $.Deferred().reject(null,"Method not implemented",null).promise()};c.prototype.loadDocumentFromServer=function(e,f){return $.Deferred().reject(null,"Method not implemented",null).promise()};c.prototype.uploadDocumentFromUri=function(g,e){var f=window;return f.stardocs.storage.uploadFromURL(g,null,true)};c.prototype.getDocInfo=function(i,f,h,g){var e=window;return e.stardocs.docOperations.getDocInfo(i)};c.prototype.getDocBookmarks=function(f){var e=window;return e.stardocs.docOperations.getDocBookmarks(f)};c.prototype.getDocumentDownloadURL=function(h,g){var f=window;var e=$.Deferred();f.stardocs.storage.getDownloadUrl(h).done(function(i){e.resolve({url:i})}).fail(function(i,k,j){e.reject(i,k,j)});return e.promise()};c.prototype.getDownloadDocumentAsURL=function(j,i,g){var f=window;i=i.toLowerCase();var e=$.Deferred();var h=null;if(i==="bmp"){h=f.stardocs.docOperations.convertToBMP([j])}else{if(i==="gif"){h=f.stardocs.docOperations.convertToGIF([j])}else{if(i==="jpg"){h=f.stardocs.docOperations.convertToJPEG([j])}else{if(i==="png"){h=f.stardocs.docOperations.convertToPNG([j])}else{if(i==="tif"){h=f.stardocs.docOperations.convertToTIFF([j])}else{if(i==="mtif"){h=f.stardocs.docOperations.convertToMTIFF("convertToSeparateFiles",[j])}else{if(i==="pdf"){h=f.stardocs.docOperations.convertToPDF("convertToSeparateFiles",[j])}else{return f.stardocs.docOperations.getDocInfo(j)}}}}}}}h.done(function(k){var l=k.documents[0].url;f.stardocs.storage.getDownloadUrl(l).done(function(m){e.resolve({url:m})}).fail(function(m,o,n){e.reject(m,o,n)});return $.Deferred().reject(null,"Method not implemented",null).promise()}).fail(function(k,m,l){e.reject(k,m,l)});return e.promise()};c.prototype.getPage=function(j,e,g,h){var f=window;var i={dpi:g,renderFormFields:h};return f.stardocs.docOperations.getPageImage(j+"/pages/"+e,i)};c.prototype.getPrintPageURLs=function(i,h,g){var f=window;var e=$.Deferred();f.stardocs.docOperations.getDocumentPrintImageURLs(i).done(function(j){e.resolve({urls:j})}).fail(function(j,l,k){e.reject(j,l,k)});return e.promise()};c.prototype.getPageText=function(g,e){var f=window;return f.stardocs.docOperations.getPageText(g+"/pages/"+e)};c.prototype.getPageFormFields=function(g,e){var f=window;return f.stardocs.docOperations.getPageFormFields(g+"/pages/"+e)};c.prototype.getPageThumbnail=function(i,e,g){var f=window;var h={renderFormFields:g};return f.stardocs.docOperations.getPageThumbnail(i+"/pages/"+e,h)};c.prototype.disposeDocument=function(e){return $.Deferred().resolve({}).promise()};c.prototype.saveDocumentChanges=function(h,g){var e=window;var f=g.formFields;return e.stardocs.docOperations.fillForm(h,null,f,false)};return c}(b.ServerCom));b.StarDocsServerCom=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.call(this);this.viewerManager=null;this.serverCom=null;this.onBindRedactEvents=function(e){};this.onUnBindRedactEvents=function(e){};this.onAfterFormSubmit=function(e){};this.onBeforeFormSubmit=function(e){};this.onDocumentInfoRetrived=function(e){};this.onReflow=function(e){};this.onPageCreated=function(e){};this.onPageRendered=function(e){};this.onPageReRendered=function(e){};this.onZoomChanged=function(e){};this.onRotationChanged=function(e){};this.onAfterDocumentLoad=function(e){};this.onBeforeSave=function(e){return null};this.onAfterSave=function(e,f){return null}}c.prototype.initialize=function(e,f){this.viewerManager=e;this.serverCom=f;this.viewerManager.events.addEventListener(b.EventNames.docInfoRetrieved,this.onDocumentInfoRetrived);this.viewerManager.events.addEventListener(b.EventNames.blankPageCreated,this.onPageCreated);this.viewerManager.events.addEventListener(b.EventNames.pageRendered,this.onPageRendered);this.viewerManager.events.addEventListener(b.EventNames.pageReRendered,this.onPageReRendered);this.viewerManager.events.addEventListener(b.EventNames.afterZoomChange,this.onZoomChanged);this.viewerManager.events.addEventListener(b.EventNames.afterPageRotate,this.onRotationChanged);this.viewerManager.events.addEventListener(b.EventNames.afterDocumentLoad,this.onAfterDocumentLoad);this.viewerManager.events.addEventListener(b.EventNames.reflow,this.onReflow);this.viewerManager.events.addFormsEventListener(b.EventNames.beforeFormSubmit,null,this.onBeforeFormSubmit);this.viewerManager.events.addFormsEventListener(b.EventNames.afterFormSubmit,null,this.onAfterFormSubmit)};c.prototype.hasPaneToolbar=function(){return false};c.prototype.createPaneToolbarView=function(){return null};c.prototype.registerPaneEvents=function(e){};return c}(b.EventDispatcher));b.PluggableModule=a})(gnostice||(gnostice={}));var gnostice;(function(d){var b=(function(){function e(i,h,g,f){this.left=i;this.top=h;this.width=g;this.height=f}return e}());var a=(function(){function e(){}e.searchProgressChanged="searchProgressChanged";e.searchCompleted="searchCompleted";e.searchStarted="searchStarted";return e}());var c=(function(f){__extends(e,f);function e(g){var h=this;f.call(this);this.description="SearchModule";this.searchDeferred=null;this.supportsQuickFind=false;this.searchHolder=null;this.findInputTextControl=null;this.findInstanceProgressMessage=null;this.findPageProgressMessage=null;this.findUpButton=null;this.findDownButton=null;this.findCloseButton=null;this.searchBubble=null;this.searchHighlightColor="Yellow";this.searchData=new Array();this.currentSearchResCount=0;this.overallSearchResCount=0;this.searchFirstPage=0;this.searchFirstIndex=0;this.searchPageNumber=-1;this.searchCurrentIndex=0;this.pageTextData=new Array();this.searchCancelled=false;this.searchKeyword="";this.pageTexDataRetrivedCount=0;this.pageDataStates=new Array();this.searchCurrentPage=1;this.searchYPos=0;this.onAfterDocumentLoad=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}if(j!=null){j.findClose();$(h.searchBtn).removeClass("git-docviewer-quickFind_clicked");$(h.findInputTextControl).val("")}if(j.findInstanceProgressMessage!=null){$(j.findInstanceProgressMessage).html("")}};this.onDocumentInfoRetrived=function(m){h.supportsQuickFind=false;var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}j.supportsQuickFind=false;j.resetModule(j);j.supportsQuickFind=true;j.updateSearchState()};this.onPageCreated=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}j.pageDataStates[m.pageNumber]=d.RENDERINGSTATE.BLANK;j.searchData[m.pageNumber]=null};this.onPageRendered=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}if(j.highLightPending&&(j.pendingSearchPageNumber==m.pageNumber)){j.highLightPending=false;j.clientHighLightQuickSearch(j.searchKeyword,j.pendingSearchPageNumber,j.pendingSearchIndex,false,false,false)}};this.onReflow=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}if(j.searchPageNumber!=-1){j.clientHighLightQuickSearch(j.searchKeyword,j.searchPageNumber,j.searchCurrentIndex,false,false,false)}};this.onPageReRendered=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}};this.onZoomChanged=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}};this.onRotationChanged=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}};this.addEventListener(a.searchCompleted,this.onSearchCompleted);this.addEventListener(a.searchStarted,this.onSearchStarted);this.addEventListener(a.searchProgressChanged,this.onSearchProgressChanged);this.searchHighlightColor=g;this.searchBtn=document.createElement("div");$(this.searchBtn).addClass("git-docviewer-controlcontainer");$(this.searchBtn).addClass("git-docviewer-quickFind");$(this.searchBtn).addClass("git-docviewer-mob-quickFind");$(this.searchBtn).attr("title",d.LocalizedStrings.tooltip_quick_find)}e.prototype.initialize=function(i,k){var j=this;f.prototype.initialize.call(this,i,k);if(this.viewerManager.preferences.search.visibleQuickSearchControls){d.UIEvents.click(this.searchBtn,this.onSearchBtnClick,this);this.searchHolder=document.createElement("span");$(this.searchHolder).attr({"class":"git-docviewer-quick-find-panel",id:"git_xdoc_docviewer_quick_find_id"});$(this.searchHolder).css({position:"absolute",right:"20px",top:"36px","z-index":"4000",display:"none"});this.findInputTextControl=document.createElement("input");$(this.findInputTextControl).attr({title:d.LocalizedStrings.tooltip_quick_find,type:"text","class":"git-docviewer-find git-docviewer-mob-find git-quick-find git-quick-find",id:"git_xdoc_docviewer_toolbar_id_find",value:""});$(this.findInputTextControl).css({"text-align":"left","min-height":"24px",width:"226px","float":"left"});var g=this;$(this.findInputTextControl).on("keydown",function(l){if(l.keyCode==13||l.keyCode==9){g.clientSearch($(this).val(),true);l.preventDefault()}else{if(l.keyCode!=27){g.disableNoSearchResultsState()}g.clearLastPageHighlight()}});this.findPageProgressMessage=document.createElement("div");$(this.findPageProgressMessage).attr({"class":"git-docviewer-findStatus git-quick-findStatus",id:"git_xdoc_docviewer_toolbar_id_findProgress",title:d.LocalizedStrings.tooltip_find_prev});$(this.findPageProgressMessage).css({opacity:"0.4",position:"absolute",right:"4px",height:"14px","float":"left",color:"#F2F2F2","font-size":"12px",top:"32px"});this.findUpButton=document.createElement("div");$(this.findUpButton).attr({"class":"git-docviewer-findup git-quick-find git-docviewer-findControls",title:d.LocalizedStrings.tooltip_find_prev});$(this.findUpButton).css({height:"34px",width:"24px","float":"left"});$(this.findUpButton).click(function(){g.clientSearch($(j.findInputTextControl).val(),false)});this.findDownButton=document.createElement("div");$(this.findDownButton).attr({"class":"git-docviewer-finddown git-quick-find git-docviewer-findControls",title:d.LocalizedStrings.tooltip_find_next});$(this.findDownButton).css({height:"34px",width:"24px","float":"left"});$(this.findDownButton).click(function(){g.clientSearch($(j.findInputTextControl).val(),true)});this.findCloseButton=document.createElement("div");$(this.findCloseButton).attr({"class":"git-docviewer-findclose git-docviewer-findControls",title:d.LocalizedStrings.close});$(this.findCloseButton).css({height:"34px",width:"24px","float":"left"});$(this.findCloseButton).click(function(){g.findClose();$(j.searchBtn).removeClass("git-docviewer-quickFind_clicked")});$(this.searchHolder).append(this.findInputTextControl);$(this.searchHolder).append(this.findUpButton);$(this.searchHolder).append(this.findDownButton);$(this.searchHolder).append(this.findCloseButton);$(this.searchHolder).append(this.findInstanceProgressMessage);$(this.searchHolder).append(this.findPageProgressMessage);this.searchBubble=document.createElement("span");$(this.searchBubble).attr({"class":"git-docviewer-quick-find-bubble-panel",id:"git_xdoc_quick_find_bubble_panel_id"});$(this.searchBubble).css({position:"absolute",right:"311px",height:"16px",top:"27px","z-index":"4016",display:"none"});var h=document.createElement("div");$(h).attr("class","git-docviewer-quick-find-bubble git-docviewer-quick-find-bubble-id");$(h).css({height:"16px",width:"16px","float":"left"});$(this.searchBubble).append(h);$(this.viewerManager.viewerDOM.viewer).append(this.searchHolder);$(document).keyup(function(l){if(l.keyCode==27){g.disableSearchControls();g.findClose();$(j.searchBtn).removeClass("git-docviewer-quickFind_clicked")}})}};e.prototype.applyLocalization=function(){$(this.findUpButton).attr("title",d.LocalizedStrings.tooltip_find_prev);$(this.findDownButton).attr("title",d.LocalizedStrings.tooltip_find_next);$(this.findCloseButton).attr("title",d.LocalizedStrings.close);$(this.findInputTextControl).attr("title",d.LocalizedStrings.tooltip_quick_find);$(this.searchBtn).attr("title",d.LocalizedStrings.tooltip_quick_find)};e.prototype.onSearchStarted=function(h){var g=h.searchModule;$(g.findInputTextControl).addClass("searchBusy");$(g.findPageProgressMessage).html("");d.logger.logInfo("Search started: Keyword "+g.searchKeyword)};e.prototype.onSearchProgressChanged=function(h){var g=h.searchModule;if(g.searchStarted){$(g.searchHolder).height("50px");$(g.findPageProgressMessage).html("Searching in page "+g.searchCurrentPage+" of "+g.viewerManager.pageCount);d.logger.logInfo("Searching in page "+g.searchCurrentPage+" of "+g.viewerManager.pageCount);if(g.searchProgressCallback!=null){g.searchProgressCallback({keyword:g.searchKeyword,currentPage:g.searchCurrentPage,pageCount:g.viewerManager.pageCount})}}};e.prototype.onSearchCompleted=function(h){var g=h.searchModule;g.searchStarted=false;$(g.findInputTextControl).removeClass("searchBusy");$(g.findPageProgressMessage).html("");$(g.searchHolder).height("34px");if(g.searchDeferred!=null){g.searchDeferred.resolve({keyword:g.searchKeyword,isSearchSuccessful:h.searchSuccessful,pageNumber:h.pageNumber,isSearchCancelled:h.searchCancelled})}g.searchProgressCallback=null;if(h.searchSuccessful){d.logger.logInfo("Search completed successfully.")}else{d.logger.logInfo("Search completed unsuccessfully.")}};e.prototype.resetModule=function(){this.pageDataStates.length=0;this.searchData.length=0;this.pageDataStates.length=0;this.supportsQuickFind=false;this.searchStarted=false;this.searchKeyword="";this.disableNoSearchResultsState();$(this.findInputTextControl).removeClass("searchBusy");$(this.findPageProgressMessage).html("");$(this.searchHolder).height("34px")};e.prototype.getQuickFindUIBtn=function(){return this.searchBtn};e.prototype.updateSearchState=function(){if(this.supportsQuickFind){}else{this.disableSearchControls()}};e.prototype.onSearchBtnClick=function(h){if(h.data!=null){var g=h.data;if(($(g.searchHolder).css("display"))==="block"){g.disableSearchControls();$(g.searchBtn).removeClass("git-docviewer-quickFind_clicked")}else{if((g.viewerManager.documentLoaded)&&(g.supportsQuickFind)){g.enableSeachControls();$(g.searchBtn).addClass("git-docviewer-quickFind_clicked");setTimeout(function(){$(g.findInputTextControl).focus()},10);$(g.findInputTextControl).focus();$(g.findInputTextControl).select()}}}};e.prototype.scrollTo=function(t,n,h,j,v){var p=this.viewerManager.viewerDOM.viewableArea;var i=$("#"+this.viewerManager.documentid+t);if(i!=null){var o=i[0].offsetTop+n+v;var w=i[0].offsetLeft+h+j;var q=Number(p.scrollTop);var s=$(p).outerHeight(true)-20;var g=q+s;var r=Number(p.scrollLeft);var m=r+$(p).outerWidth(true)-20;var u=r+m;if((o>=q&&o<=g)){}else{var k=o-s/2;if(i[0].offsetTop>k){k=i[0].offsetTop}$(p).scrollTop(k-v)}if((w>=r&&w<=u)){$(p).scrollLeft(0)}else{var l=w-m/2;$(p).scrollLeft(l-j)}}};e.prototype.getPageNumber=function(m){var k=this.viewerManager.viewerDOM.viewableArea;var h=$(k).outerHeight(true);var l=0;for(var j=1;j<=Number(this.viewerManager.pageCount);j++){var g=$("#"+this.viewerManager.documentid+j);l=Number(g[0].offsetTop);if((Number(l)<=Number(m)&&(Number(l+g[0].clientHeight)>=Number(m)))&&((l+g[0].clientHeight-m)>20)){break}else{if(Number(l)>Number(m)){break}}}return j};e.prototype.getStartCursorPage=function(k,n){var m=this.viewerManager.viewerDOM.viewableArea;var i=m.scrollTop;var o=$(m).outerHeight(true);if(k&&this.searchPageNumber>-1){var j=this.getPageNumber(i);var h=$("#"+this.viewerManager.documentid+this.searchPageNumber);if(h!=null){var g=h[0].offsetTop+this.searchYPos;var l=false;if(g>=i&&g<=i+o){l=true}if(l&&g>i&&n){return this.searchPageNumber}else{if(l&&g<i&&!n){return this.searchPageNumber}else{return j}}}else{return j}}else{return this.getPageNumber(i)}};e.prototype.getNextPage=function(h,g,i){if(i){if(h<g){return h+1}else{return 1}}else{if(h>1){return h-1}else{return g}}};e.prototype.isPageTextNotRetrieved=function(g){var h=false;if(this.pageDataStates[g]==d.RENDERINGSTATE.BLANK){h=true}return h};e.prototype.getPageData=function(q,o,u,s,j,t,h,n){var m=this;n++;if(this.searchCancelled){j=false}if(q==null){return}if((!j)&&(this.pageTexDataRetrivedCount>=this.viewerManager.pageCount)){return}if(n>this.viewerManager.pageCount){if(j){var g=true;for(var k=1;k<=this.viewerManager.pageCount;k++){if(this.searchData[q]!=null){if(this.searchData[q].length>0){g=false;break}}}if(g){this.clientSearchNoRes=true;this.enableNoSearchResultsState()}}this.searchStarted=false;this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1});return}var r=this.getNextPage(q,this.viewerManager.pageCount,t);if(!this.isPageTextNotRetrieved(q)){if((j)&&(this.searchStarted)){if(this.searchData[q]==null){this.searchLocal(q,o,u,s,false,t)}if(this.searchData[q]!=null){if(this.searchData[q].length>0){j=false;var p=0;if(!t){p=this.searchData[q].length-1}this.clientHighLightQuickSearch(o,q,p,u,s)}}}if((r!=null)&&(h)){this.getPageData(r,o,u,s,j,t,true,n)}return}var l=this.viewerManager.documentUri;this.pageDataStates[q]=d.RENDERINGSTATE.RUNNING;d.logger.logInfo("Requesting server to get search page text "+q);this.serverCom.getPageText(l,q).done(function(v){d.logger.logInfo("Successfully retrieved search page text "+v.pageNumber);m.pageTexDataRetrivedCount++;if(v!=null){m.pageDataStates[v.pageNumber]=d.RENDERINGSTATE.FINISHED}else{m.pageDataStates[q]=d.RENDERINGSTATE.FINISHED}if(m.searchCancelled){j=false}if((v!=null)){m.pageTextData[v.pageNumber]=v;if(v.text==null){m.pageTextData[v.pageNumber].Text=""}else{m.pageTextData[v.pageNumber].Text=v.text.toLowerCase()}if(v.charBoundingRects!=null){v.charBoundingRects="|"+v.charBoundingRects+"|"}}if((v!=null)&&(v.text!=null&&v.text.length>0)&&(j)&&(m.searchStarted)){m.searchLocal(q,o,u,s,false,t);if(m.searchData[q].length>0){j=false;var i=0;if(!t){i=m.searchData[q].length-1}m.clientHighLightQuickSearch(o,q,i,u,s)}}if((r!=null)&&(h)){m.getPageData(r,o,u,s,j,t,h,n)}}).fail(function(i){d.logger.logError("Failed to retrieve search page text "+q);m.pageTextData[i.pageNumber]=null;m.pageDataStates[q]=d.RENDERINGSTATE.FINISHED;if((r!=null)&&(h)){m.getPageData(r,o,u,s,j,t,h,n)}})};e.prototype.findFirst=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.searchKeyword="";this.clearLastPageHighlight();this.clientSearch(h,true,1);return this.searchDeferred};e.prototype.findNext=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.clientSearch(h,true);return this.searchDeferred};e.prototype.findLast=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.searchKeyword="";this.clearLastPageHighlight();this.clientSearch(h,false,1);return this.searchDeferred};e.prototype.findPrevious=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.clientSearch(h,false);return this.searchDeferred};e.prototype.checkIfSupportsQuickFind=function(g){if(!this.viewerManager.documentLoaded){return false}if(!this.supportsQuickFind){return false}if(g.length<1){return false}return true};e.prototype.clientSearch=function(l,q,m){if(m===void 0){m=-1}if(!this.checkIfSupportsQuickFind(l)){return false}if(this.searchStarted){return}this.searchStarted=true;l=l.toLowerCase();var s=false;var p=false;var r=this.viewerManager.zoomfactor;var n=m;if(n==-1){n=this.getStartCursorPage(l==this.searchKeyword,q)}var j=this.searchPageNumber;var g=this.viewerManager.pageCount;this.searchCancelled=false;this.highLightPending=false;this.disableNoSearchResultsState();if(l!=this.searchKeyword){this.dispatchAll(a.searchStarted,{searchModule:this});for(var h=1;h<=g;h++){this.searchData[h]=null}this.clientSearchNoRes=false;this.searchKeyword=l;this.searchPageNumber=n;this.searchCurrentIndex=0;this.searchFirstPage=0;this.searchFirstIndex=-1;this.overallSearchResCount=0;this.currentSearchResCount=0;var o=this.getNextPage(n,g,q);if(!q){n=o}this.getPageData(n,l,s,p,true,q,true,0)}else{if(!this.clientSearchNoRes){this.dispatchAll(a.searchStarted,{searchModule:this});var k=this.searchCurrentIndex+1;if(!q){k=this.searchCurrentIndex-1}if(n==j){if(this.searchData[n]!=null){if((this.searchData[n].length<=k)||(k<0)){n=this.getNextPage(n,g,q);k=0}else{this.clientHighLightQuickSearch(l,n,k,s,p);return}}}k=0;this.getPageData(n,l,s,p,true,q,true,0)}else{this.enableNoSearchResultsState();this.searchStarted=false}}};e.prototype.searchLocal=function(q,o,t,r,g,s){if(o.length>=1){this.searchCurrentPage=q;this.dispatchAll(a.searchProgressChanged,{searchModule:this});if(this.searchData[q]==null){var l=[];var k=0;if((this.pageDataStates[q]==d.RENDERINGSTATE.FINISHED)){var n=0;n=this.pageTextData[q].Text.indexOf(o,n);while(n!=-1){l[k]=n;k++;n=this.pageTextData[q].Text.indexOf(o,n+1)}var j=true;var h=true;var m=0;for(var k=1;k<=this.viewerManager.pageCount;k++){if(this.searchData[k]==null){j=false;break}if((this.searchData[k]!=null)&&(this.searchData[k].length>0)){j=false;break}}this.overallSearchResCount+=l.length;this.clientSearchNoRes=j;this.searchData[q]=l;if(g){if(l.length>0){var p=0;if(!s){p=l.length-1}this.clientHighLightQuickSearch(o,q,p,t,r)}}}else{if((this.pageDataStates[q]==d.RENDERINGSTATE.BLANK)){this.getPageData(q,o,t,r,true,s,false,0)}}}}};e.prototype.disableNoSearchResultsState=function(){$(this.findInputTextControl).addClass("git-docviewer-find");$(this.findInputTextControl).removeClass("git-docviewer-find-notFound")};e.prototype.clearLastPageHighlight=function(){var g=this.searchPageNumber;if(this.searchPageNumber!=-1){this.viewerManager.reRenderPage(g)}this.searchPageNumber=-1};e.prototype.findClose=function(){$(this.searchHolder).css("display","none");$(this.searchBubble).css("display","none");$(this.findInputTextControl).removeClass("git-docviewer-quickFind_clicked");this.searchCancelled=true;this.searchStarted=false;this.clearLastPageHighlight();this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1,searchCancelled:true})};e.prototype.disableSearchControls=function(){if($(this.findInputTextControl).hasClass("git-docviewer-quickFind_clicked")){$(this.findInputTextControl).removeClass("git-docviewer-quickFind_clicked");$(this.searchHolder).slideToggle("fast");$(this.searchBubble).slideToggle("fast")}};e.prototype.enableSeachControls=function(){if((this.viewerManager.documentLoaded)&&(this.supportsQuickFind)){$(this.findInputTextControl).addClass("git-docviewer-quickFind_clicked");$(this.searchHolder).slideToggle("fast");$(this.searchBubble).slideToggle("fast");$(this.findInputTextControl).focus()}};e.prototype.enableNoSearchResultsState=function(){$(this.findInputTextControl).addClass("git-docviewer-find-notFound");$(this.findInputTextControl).removeClass("git-docviewer-find");this.searchStarted=false;this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1})};e.prototype.getRadianAngle=function(g){return g*Math.PI/180};e.prototype.nthIndex=function(k,g,l){var j=k.length,h=-1;while(l--&&h++<j){h=k.indexOf(g,h);if(h<0){break}}return h};e.prototype.getRectAtCharIndex=function(j,h){j+=1;var k=this.pageTextData[h];var g=this.nthIndex(k.charBoundingRects,"|",j);var m=this.nthIndex(k.charBoundingRects,"|",j+1);var i=k.charBoundingRects.substring(g+1,m);var l=i.split(",");return new b(parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]))};e.prototype.clientHighLightQuickSearch=function(h,x,J,F,Q,n){if(n===void 0){n=true}d.logger.logInfo("Highlighting search keyword. page number "+x+" keyword "+h);try{if(this.clientSearchNoRes){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1});return}if(x>this.viewerManager.pageCount){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1});return}var C=this.viewerManager.zoomfactor;var m=this.viewerManager.documentid;if(n){this.clearLastPageHighlight()}var H=$("#"+m+x);var R=$(H).find("canvas")[0];if(R!=null){var j=R.height;var A=R.width;var B=R.getContext("2d");if(this.searchData[x]!=null){this.searchStarted=false;this.currentSearchResCount++;if(this.currentSearchResCount>this.overallSearchResCount){this.currentSearchResCount=1}if((this.searchFirstPage==x)&&(this.searchFirstIndex==J)){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:true,pageNumber:x});this.searchFirstPage=0;this.searchFirstIndex=-1;this.currentSearchResCount=0;this.scrollTo(x,0,0,0,0)}if((this.searchFirstPage==0)&&(this.searchFirstIndex==-1)){this.searchFirstPage=x;this.searchFirstIndex=J}this.searchPageNumber=x;this.searchCurrentIndex=J;var s=this.searchData[x];var u=this.pageTextData[x];if((s!=null)&&(s.length>0)&&(s.length>J)){var v=s[J];var G=this.getRectAtCharIndex(v,x);var l=G.left;var o=G.top;var g=G.width;var k=G.height;var D=g;var E=k;var N=Math.sqrt((D*D)+(E*E))/2;var z=Math.asin(E/(2*N));var S=u.skewAngle/180*Math.PI;var t=(N*Math.cos(z))-(N*Math.cos(z+S));var K=(N*Math.sin(z+S))-(N*Math.sin(z));var L=l*Math.cos(u.skewAngle)-o*Math.sin(u.skewAngle);var p=o*Math.cos(u.skewAngle)+l*Math.sin(u.skewAngle);var I=l;var M=o;B.save();B.translate(t+l*C,K+o*C);B.rotate(this.getRadianAngle(u.skewAngle));var q=B.globalAlpha;var y=B.fillStyle;B.globalAlpha=0.4;B.fillStyle=this.searchHighlightColor;var w=G;var O=null;for(var P=v+1;P<v+h.length;P++){O=this.getRectAtCharIndex(P,x);if(w.left<O.left){g=O.left+O.width-l;if(o<O.top){o=O.top}if(k<O.height){k=O.height}}else{B.fillRect((l-I)*C,(o-M)*C,g*C,k*C);l=O.left;o=O.top;g=O.left+O.width-l;k=O.height}w=O}if(o<0){o=0}if(this.viewerManager.rotationAngle==0){this.scrollTo(x,o*C,l*C,g*C,k*C)}else{if(this.viewerManager.rotationAngle==180){this.scrollTo(x,j-o*C-k*C,l*C,g*C,k*C)}else{if(this.viewerManager.rotationAngle==90){this.scrollTo(x,l*C,o*C,g*C,k*C)}else{this.scrollTo(x,j-(l*C)-(g*C),o*C,g*C,k*C)}}}B.fillRect((l-I)*C,(o-M)*C,g*C,k*C);B.globalAlpha=q;B.fillStyle=y;B.restore();this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:true,pageNumber:x});this.searchYPos=o}}}else{this.highLightPending=true;this.pendingSearchPageNumber=x;this.pendingSearchIndex=J;this.viewerManager.setCurrentPage(x);this.viewerManager.scrolToPage(x)}}catch(r){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1})}};return e}(d.PluggableModule));d.SearchModule=c})(gnostice||(gnostice={}));var gnostice;(function(d){var b=(function(){function e(f){var g=this;this.parentContainer=f;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"git_xdoc_viewer_class_overlay"});$(this.overlayLayout).addClass("messageBox");this._messageTextDiv=document.createElement("div");$(this._messageTextDiv).attr({"class":"white_content_messagebox"});$(this._messageTextDiv).css({display:"none"});this.child=document.createElement("div");$(this.child).css({position:"relative",padding:"15px"});this.txt=document.createElement("span");$(this.txt).attr({"class":"message"});$(this.child).append(this.txt);$(this._messageTextDiv).append(this.child);this._okBtn=document.createElement("button");$(this._okBtn).attr({"class":"okBtn"});$(this._okBtn).css({position:"absolute",right:26});$(this._okBtn).text(d.LocalizedStrings.msgdlg_btnCaption_OK);$(this._okBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide("fast",function(){if(g._callbackFunction!=null){g._callbackFunction()}});return false});$(this._messageTextDiv).append(this._okBtn);$(f).append(this._messageTextDiv);$(f).append(this.overlayLayout);$(f).keyup(function(h){if(h.keyCode==27){g.hide()}})}e.prototype.setWidth=function(f){$(this._messageTextDiv).width(f)};e.prototype.show=function(g,f){$(this._okBtn).text(d.LocalizedStrings.msgdlg_btnCaption_OK);this._callbackFunction=f;$(this.txt).html(g);$(this.overlayLayout).show();$(this._messageTextDiv).show();this._okBtn.focus()};e.prototype.hide=function(){var f=this;$(this.overlayLayout).hide();$(this._messageTextDiv).hide(function(){if(f._callbackFunction!=null){f._callbackFunction()}})};return e}());d.MessageBox=b;var c=(function(){function e(g){var h=this;this.parentContainer=g;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"git_xdoc_viewer_class_overlay"});$(this.overlayLayout).addClass("messageBox");this._messageTextDiv=document.createElement("div");$(this._messageTextDiv).attr({"class":"white-content-messagebox"});$(this._messageTextDiv).css({display:"none"});this.child=document.createElement("div");$(this.child).css({position:"relative",padding:"15px"});this.txt=document.createElement("div");$(this.txt).attr({"class":"message"});$(this.child).append(this.txt);$(this._messageTextDiv).append(this.child);var f=document.createElement("div");$(f).css({height:"40px",position:"relative"});this._cancelBtn=document.createElement("button");$(this._cancelBtn).attr({"class":"okBtn"});$(this._cancelBtn).css({position:"absolute",right:26,width:65});$(this._cancelBtn).text("Cancel");$(this._cancelBtn).click(function(){h.hide();return false});$(f).append(this._cancelBtn);this._okBtn=document.createElement("button");$(this._okBtn).attr({"class":"okBtn"});$(this._okBtn).css({position:"absolute",right:100,width:65});$(this._okBtn).text("Allow");$(this._okBtn).click(function(){$(h.overlayLayout).hide();$(h._messageTextDiv).hide("fast",function(){if(h._callbackFunction!=null){h._callbackFunction()}});return false});$(f).append(this._okBtn);$(this._messageTextDiv).append(f);$(g).append(this._messageTextDiv);$(g).append(this.overlayLayout);$(g).keyup(function(i){if(i.keyCode==27){h.hide();return false}})}e.prototype.setWidth=function(f){$(this._messageTextDiv).width(f)};e.prototype.show=function(g,f){this._callbackFunction=f;$(this.txt).html(g);$(this.overlayLayout).show();$(this._messageTextDiv).show();this._okBtn.focus()};e.prototype.hide=function(){$(this.overlayLayout).hide();$(this._messageTextDiv).hide();return false};return e}());d.WarningBox=c;var a=(function(){function e(f){var g=this;this.parentContainer=f;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"git_xdoc_viewer_class_overlay"});$(this.overlayLayout).addClass("messageBox");this._messageTextDiv=document.createElement("div");$(this._messageTextDiv).attr({"class":"messageboxyesnocancel"});$(this._messageTextDiv).css({display:"none"});this.child=document.createElement("div");$(this.child).css({position:"relative",padding:"15px"});this.txt=document.createElement("span");$(this.txt).attr({"class":"message"});$(this.child).append(this.txt);$(this._messageTextDiv).append(this.child);$(f).append(this._messageTextDiv);$(f).append(this.overlayLayout);this._cancelBtn=document.createElement("button");$(this._cancelBtn).addClass("git-messagebox-botton");$(this._cancelBtn).css({width:"77px","float":"right"});$(this._cancelBtn).text(d.LocalizedStrings.msgdlg_btnCaption_Cancel);$(this._cancelBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide("fast",function(){if(g._cancelCallbackFunction!=null){g._cancelCallbackFunction()}});return false});$(this._messageTextDiv).append(this._cancelBtn);this._noBtn=document.createElement("button");$(this._noBtn).attr({"class":"git-messagebox-botton"});$(this._noBtn).text(d.LocalizedStrings.msgdlg_btnCaption_No);$(this._noBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide("fast",function(){if(this._noCallbackFunction!=null){this._noCallbackFunction()}});return false});$(this._messageTextDiv).append(this._noBtn);this._yesBtn=document.createElement("button");$(this._yesBtn).attr({"class":"git-messagebox-botton"});$(this._yesBtn).text(d.LocalizedStrings.msgdlg_btnCaption_Yes);$(this._yesBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide("fast",function(){if(this._yesCallbackFunction!=null){this._yesCallbackFunction()}});return false});$(this._messageTextDiv).append(this._yesBtn);$(f).keyup(function(h){if(h.keyCode==27){g.hide()}})}e.prototype.show=function(k,l,j,h){var i=($(this.parentContainer).innerHeight()/2)-$(this._messageTextDiv).innerHeight()/2;var f=($(this.parentContainer).innerWidth()/2)-$(this._messageTextDiv).innerWidth()/2;$(this._messageTextDiv).css({top:i+"px",left:f+"px"});$(this.overlayLayout).show();$(this._messageTextDiv).show();var g=29+$(this._cancelBtn).innerWidth();$(this._noBtn).css({width:"77px","float":"right"});g=26+$(this._cancelBtn).innerWidth()+$(this._noBtn).innerWidth()+10;$(this._yesBtn).attr({"class":"git-messagebox-botton"});$(this._yesBtn).css({width:"77px","float":"right"});this._yesCallbackFunction=l;this._noCallbackFunction=j;this._cancelCallbackFunction=h;$(this.txt).text(k);this._yesBtn.focus()};e.prototype.hide=function(){var f=this;$(this.overlayLayout).hide();$(this._messageTextDiv).hide(function(){if(f._cancelCallbackFunction!=null){f._cancelCallbackFunction()}})};return e}());d.YesNoCancelDialog=a})(gnostice||(gnostice={}));var gnostice;(function(b){var c=(function(){function d(){}d.prototype.RightClickMenuManager=function(){};d.getRightClickMenuManager=function(){if(d.rightClickMenuManager==null){d.rightClickMenuManager=new d()}return d.rightClickMenuManager};d.prototype.getRightClickMenu=function(e){if(e===void 0){e=null}if(e!=null){d.closeActionHandlersList.push(e)}return new a(this)};d.prototype.closeAllRightClickMenus=function(){for(var e=0;e<d.closeActionHandlersList.length;e++){d.closeActionHandlersList[e]()}$(".git-right-click-menu").hide()};d.closeActionHandlersList=new Array();return d}());b.RightClickMenuManager=c;var a=(function(){function d(e){this.rightClickMenuManager=e;this.menu=null;this.container=null;this.menuItemsActionMap={};this.menuItemsUIMap={};this.actions=new Array();this.constructView()}d.prototype.AddContextMenuItem=function(f,e){var g=this._addMenuItem(f);this.menuItemsActionMap[f]=e;this.menuItemsUIMap[f]=g;this.actions.push(f);this.addClickHandlerForActionItem(f);$(this.menu).append(g)};d.prototype.show=function(f,k,j,h){this.rightClickMenuManager.closeAllRightClickMenus();this.container=f;this.x=k;this.y=j;this.parentModule=h;$(f).append(this.menu);$(this.menu).css({left:k,top:j,display:"block"});for(var g=0;g<this.actions.length;g++){var e=this.actions[g];this.addClickHandlerForActionItem(e)}};d.prototype.hide=function(){$(this.menu).hide()};d.prototype.clearAllMenuItems=function(){};d.prototype.removeMenuItem=function(e){};d.prototype.addClickHandlerForActionItem=function(e){var f=this;$(this.menuItemsUIMap[e]).off("click");$(this.menuItemsUIMap[e]).on("click",function(g){f.menuItemsActionMap[e](f.container,f.x,f.y,f.parentModule);$(f.menu).css({display:"none"});f.rightClickMenuManager.closeAllRightClickMenus();g.preventDefault()})};d.prototype.constructView=function(){this.menu=document.createElement("ul");$(this.menu).addClass("git-right-click-menu")};d.prototype._addMenuItem=function(e){var f=document.createElement("li");$(f).addClass("git-rightclick-menu-item");$(f).text(e);return f};return d}());b.RightClickMenu=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(d){this.parentContainer=d;this.transparentLayer=document.createElement("div");$(this.transparentLayer).attr({"class":"transparentoverlay"});this.messageContentDiv=document.createElement("div");$(this.messageContentDiv).attr({"class":"progressmessage"});$(d).append(this.messageContentDiv);$(d).append(this.transparentLayer)}c.prototype.showAnimation=function(f){$(this.messageContentDiv).empty();$(this.messageContentDiv).append("<div id='loader' style='text-align: center;line-height:40px'><span>"+f+"</span></br><div class='git-docviewer-loading' ></div>");var e=($(this.parentContainer).innerHeight()/2)-58;var d=($(this.parentContainer).innerWidth()/2)-127;$(this.messageContentDiv).css({top:e+"px",left:d+"px"});$(this.transparentLayer).show();$(this.messageContentDiv).show()};c.prototype.hideAnimation=function(){$(this.messageContentDiv).empty();$(this.transparentLayer).hide();$(this.messageContentDiv).hide()};return c}());a.ProgressAnimation=b})(gnostice||(gnostice={}));var gnostice;(function(gnostice){var FormField=(function(){function FormField(_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed){this._formsModule=_formsModule;this._widget=_widget;this.type=type;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed}FormField.prototype.focus=function(){this._widget.setFocus(false,true)};FormField.createFormField=function(_formsModule,formField,_widget){switch(formField.fieldType){case 1:return new TextFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.isComb,formField.isMultiline,formField.isPassword,formField.isNoScroll,formField.maxLength,formField.defaultValue,formField.fieldValue);case 2:var radioButtons=new Array();for(var _i=0,_a=formField.radioItems;_i<_a.length;_i++){var radioItem=_a[_i];radioButtons.push(new RadioButtonFormField(_formsModule,_widget,radioItem.fieldName,radioItem.fullyQualifiedFieldName,radioItem.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,radioItem.exportValue))}return new RadioGroupFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.isRadioNoToggleToOff,formField.isRadioInUnison,formField.defaultSelectedItemIndex,formField.selectedItemIndex,radioButtons);case 4:return new ComboBoxFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.defaultSelectedItemIndices,formField.selectedItemIndices,formField.displayValues,formField.exportValues,formField.isEditable,formField.fieldValue);case 8:return new CheckBoxFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.exportValue,formField.isChecked);case 16:return new ListBoxFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.defaultSelectedItemIndices,formField.selectedItemIndices,formField.displayValues,formField.exportValues,formField.isMultiselect);case 32:if(formField.actionType==1&&formField.hasOwnProperty("submitActionType")){var submitActionType=(formField.submitActionType==1)?"httpGet":"httpPost";return new SubmitPushButtonFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,submitActionType,formField.submitUrl,formField.submitActionFields,formField.submitActionFieldsInclude)}else{if(formField.actionType==0){return new ResetPushButtonFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isValidationFailed,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.resetActionFields,formField.resetActionFieldsInclude)}else{return new SimplePushButtonFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isValidationFailed,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck)}}}return null};return FormField}());gnostice.FormField=FormField;var TextFormField=(function(_super){__extends(TextFormField,_super);function TextFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,isComb,isMultiline,isPassword,isNoScroll,maxLength,defaultValue,value){_super.call(this,_formsModule,_widget,"text",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.isComb=isComb;this.isMultiline=isMultiline;this.isPassword=isPassword;this.isNoScroll=isNoScroll;this.maxLength=maxLength;this.defaultValue=defaultValue;this.value=value}TextFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};TextFormField.prototype.setValueAsString=function(newValue){this._widget.setValue(newValue)};return TextFormField}(FormField));gnostice.TextFormField=TextFormField;var RadioButtonFormField=(function(_super){__extends(RadioButtonFormField,_super);function RadioButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,exportValue){_super.call(this,_formsModule,_widget,"radioButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.exportValue=exportValue}RadioButtonFormField.prototype.getValueAsString=function(){return""};RadioButtonFormField.prototype.setValueAsString=function(newValue){};return RadioButtonFormField}(FormField));gnostice.RadioButtonFormField=RadioButtonFormField;var RadioGroupFormField=(function(_super){__extends(RadioGroupFormField,_super);function RadioGroupFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,isRadioNoToggleToOff,isRadioInUnison,defaultSelectedRadioButtonIndex,selectedRadioButtonIndex,radioButtons){_super.call(this,_formsModule,_widget,"radioGroup",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.isRadioNoToggleToOff=isRadioNoToggleToOff;this.isRadioInUnison=isRadioInUnison;this.defaultSelectedRadioButtonIndex=defaultSelectedRadioButtonIndex;this.selectedRadioButtonIndex=selectedRadioButtonIndex;this.radioButtons=radioButtons}RadioGroupFormField.prototype.getValueAsString=function(){if(this.selectedRadioButtonIndex<0){return null}var exportValue=this.radioButtons[this.selectedRadioButtonIndex].exportValue;return(exportValue!=null)?exportValue:this.name};RadioGroupFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};RadioGroupFormField.prototype.setSelectedRadioButtonIndex=function(newIndex){this._widget.setSelectedRadioButton(newIndex)};return RadioGroupFormField}(FormField));gnostice.RadioGroupFormField=RadioGroupFormField;var ComboBoxListBoxFormField=(function(_super){__extends(ComboBoxListBoxFormField,_super);function ComboBoxListBoxFormField(_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues){_super.call(this,_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.type=type;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.defaultSelectedItemIndices=defaultSelectedItemIndices;this.selectedItemIndices=selectedItemIndices;this.displayValues=displayValues;this.exportValues=exportValues}return ComboBoxListBoxFormField}(FormField));gnostice.ComboBoxListBoxFormField=ComboBoxListBoxFormField;var ComboBoxFormField=(function(_super){__extends(ComboBoxFormField,_super);function ComboBoxFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues,isEditable,value){_super.call(this,_formsModule,_widget,"comboBox",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.defaultSelectedItemIndices=defaultSelectedItemIndices;this.selectedItemIndices=selectedItemIndices;this.displayValues=displayValues;this.exportValues=exportValues;this.isEditable=isEditable;this.value=value}ComboBoxFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};ComboBoxFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};ComboBoxFormField.prototype.setSelectedItemIndices=function(newIndices){this._widget.setSelectedItemIndices(newIndices)};return ComboBoxFormField}(ComboBoxListBoxFormField));gnostice.ComboBoxFormField=ComboBoxFormField;var ListBoxFormField=(function(_super){__extends(ListBoxFormField,_super);function ListBoxFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues,isMultiSelect){_super.call(this,_formsModule,_widget,"listBox",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.defaultSelectedItemIndices=defaultSelectedItemIndices;this.selectedItemIndices=selectedItemIndices;this.displayValues=displayValues;this.exportValues=exportValues;this.isMultiSelect=isMultiSelect}ListBoxFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};ListBoxFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};ListBoxFormField.prototype.setSelectedItemIndices=function(newIndices){this._widget.setSelectedItemIndices(newIndices)};return ListBoxFormField}(ComboBoxListBoxFormField));gnostice.ListBoxFormField=ListBoxFormField;var CheckBoxFormField=(function(_super){__extends(CheckBoxFormField,_super);function CheckBoxFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,exportValue,isChecked){_super.call(this,_formsModule,_widget,"checkBox",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.exportValue=exportValue;this.isChecked=isChecked}CheckBoxFormField.prototype.setChecked=function(checked){this._widget.setChecked(checked)};CheckBoxFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};CheckBoxFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};return CheckBoxFormField}(FormField));gnostice.CheckBoxFormField=CheckBoxFormField;var PushButtonFormField=(function(_super){__extends(PushButtonFormField,_super);function PushButtonFormField(_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed){_super.call(this,_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.type=type;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed}PushButtonFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};PushButtonFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};return PushButtonFormField}(FormField));gnostice.PushButtonFormField=PushButtonFormField;var SubmitPushButtonFormField=(function(_super){__extends(SubmitPushButtonFormField,_super);function SubmitPushButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,submitActionType,submitUrl,submitActionFieldsInclude,isSubmitActionFieldsInclude){_super.call(this,_formsModule,_widget,"submitPushButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.submitActionType=submitActionType;this.submitUrl=submitUrl;this.submitActionFieldsInclude=submitActionFieldsInclude;this.isSubmitActionFieldsInclude=isSubmitActionFieldsInclude}return SubmitPushButtonFormField}(PushButtonFormField));gnostice.SubmitPushButtonFormField=SubmitPushButtonFormField;var ResetPushButtonFormField=(function(_super){__extends(ResetPushButtonFormField,_super);function ResetPushButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,resetActionFieldsInclude,isResetActionFieldsInclude){_super.call(this,_formsModule,_widget,"resetPushButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed;this.resetActionFieldsInclude=resetActionFieldsInclude;this.isResetActionFieldsInclude=isResetActionFieldsInclude}return ResetPushButtonFormField}(PushButtonFormField));gnostice.ResetPushButtonFormField=ResetPushButtonFormField;var SimplePushButtonFormField=(function(_super){__extends(SimplePushButtonFormField,_super);function SimplePushButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed){_super.call(this,_formsModule,_widget,"simplePushButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed);this._formsModule=_formsModule;this._widget=_widget;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed}return SimplePushButtonFormField}(PushButtonFormField));gnostice.SimplePushButtonFormField=SimplePushButtonFormField;var FdViewState=(function(){function FdViewState(){this.zoomFactor=1;this.rotationAngle=0}return FdViewState}());(function(SubmitMethod){SubmitMethod[SubmitMethod.GET=0]="GET";SubmitMethod[SubmitMethod.POST=1]="POST"})(gnostice.SubmitMethod||(gnostice.SubmitMethod={}));var SubmitMethod=gnostice.SubmitMethod;var FieldKeyValuePair=(function(){function FieldKeyValuePair(fieldName,fieldValue){this.fieldName=fieldName;this.fieldValue=fieldValue}return FieldKeyValuePair}());gnostice.FieldKeyValuePair=FieldKeyValuePair;var FormsModule=(function(_super){__extends(FormsModule,_super);function FormsModule(fieldHighlightColor,fieldReadonlyColor,fieldFocusColor,listContainerBackgroundColor,listItemHoverBackgroundColor){var _this=this;_super.call(this);this.cancelPostingFormData={Value:false};this.description="FormsModule";this.isDirty=false;this.fieldHighlightColor="rgba(204, 215, 255, 0.5)";this.fieldReadonlyColor="rgba(246, 246, 246, 0.5)";this.fieldFocusColor="";this.listContainerBackgroundColor="rgba(255, 255, 255, 1)";this.listItemHoverBackgroundColor="";this.supportsFormsLayer=false;this.formsData=new Array();this.fdViewState=new Array();this.fdRenderingState=new Array();this.formWidgets=new Array();this.containsFormData=false;this.focusRectLeft=null;this.focusRectTop=null;this.focusRectRight=null;this.focusRectBottom=null;this.lastFocusedFieldWidget=null;this.lastFocusedFieldRadioIndex=0;this.curTabIndex=0;this.curTabFocused=0;this.curTabFocusedPage=1;this.prevFocusedFieldWidget=null;this.formFieldsByPage=new Array();this.formFieldsRenderedByPage=null;this.onBeforeSave=function(vm){if(!_this.supportsFormsLayer){return}if(!_this.isDirty){return}var keyValArray=new Array();for(var pageNumber=1;pageNumber<=_this.viewerManager.pageCount;++pageNumber){var data=_this.formsData[pageNumber];var widgets=_this.formWidgets[pageNumber];if(widgets!=null){for(var i=0;i<widgets.length;++i){var widget=widgets[i];var keyValPair=widget.getKeyValuePair(true,true);if(keyValPair!=null){keyValArray.push(keyValPair)}}}}_this.isDirty=false;if(keyValArray!=null){return{module:"formFields",value:keyValArray}}return null};this.onAfterSave=function(vm,updatedInteractiveElements){};this.onAfterDocumentLoad=function(data){_this.resetModule()};this.onDocumentInfoRetrived=function(data){_this.supportsFormsLayer=false;if(data.mimeType==gnostice.MimeTypes.PDF&&data.containsForm==true){_this.supportsFormsLayer=true}_this.focusRectLeft=document.createElement("div");$(_this.focusRectLeft).attr({"class":"git_formField, git_focusRectLeft"});$(_this.focusRectLeft).css({display:"none"});_this.focusRectTop=document.createElement("div");$(_this.focusRectTop).attr({"class":"git_formField, git_focusRectTop"});$(_this.focusRectTop).css({display:"none"});_this.focusRectRight=document.createElement("div");$(_this.focusRectRight).attr({"class":"git_formField, git_focusRectRight"});$(_this.focusRectRight).css({display:"none"});_this.focusRectBottom=document.createElement("div");$(_this.focusRectBottom).attr({"class":"git_formField, git_focusRectBottom"});$(_this.focusRectBottom).css({display:"none"});_this.resetModule()};this.onPageCreated=function(data){_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};this.onPageRendered=function(data){var vm=_this.viewerManager;if(!_this.supportsFormsLayer){return}var docUri=vm.documentUri;if(_this.formsData[data.pageNumber]==null){_this.serverCom.getPageFormFields(docUri,data.pageNumber).done(function(response){_this.formsData[data.pageNumber]=response;_this.fdViewState[data.pageNumber]=new FdViewState();_this.fdViewState[data.pageNumber].rotationAngle=vm.rotationAngle;_this.fdViewState[data.pageNumber].zoomFactor=vm.zoomfactor;_this.fdRenderingState[data.pageNumber]=false;_this.processFields(response,data.pageNumber);if(_this.formFieldsRenderedByPage==null){_this.formFieldsRenderedByPage=new Array();for(var pageNum=1;pageNum<=vm.pageCount;++pageNum){_this.formFieldsRenderedByPage[pageNum]=false}}_this.formFieldsRenderedByPage[data.pageNumber]=true;var formsLoaded=true;for(var pageNum=1;pageNum<=vm.pageCount;++pageNum){if(_this.formFieldsRenderedByPage[pageNum]==false){formsLoaded=false;break}}if(formsLoaded){vm.events.dispatchAllFormEvents(gnostice.EventNames.onFormLoaded,null,{viewerManager:vm})}})}else{_this.processFields(_this.formsData[data.pageNumber],data.pageNumber)}};this.onPageReRendered=function(data){if(!_this.supportsFormsLayer){return}_this.onPageRendered(data);_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};this.onZoomChanged=function(data){_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};this.onRotationChanged=function(data){if(_this.viewerManager.rotationAngle==360){_this.viewerManager.rotationAngle=0}if(_this.viewerManager.rotationAngle!=0){_this.lastFocusedFieldWidget=null}_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};this.fieldHighlightColor=fieldHighlightColor;this.fieldReadonlyColor=fieldReadonlyColor;this.fieldFocusColor=fieldFocusColor;this.listContainerBackgroundColor=listContainerBackgroundColor;this.listItemHoverBackgroundColor=listItemHoverBackgroundColor}FormsModule.prototype.setDirtyFlag=function(isDirty){this.isDirty=isDirty};FormsModule.prototype.getNextWidgetInPage=function(pageNumber,startIndex){var widgets=this.formWidgets[pageNumber];if(widgets!=null){if(startIndex==-1){startIndex=0}for(var i=startIndex;i<widgets.length;i++){var widget=this.formWidgets[pageNumber][i];if(!widget.isReadonly()&&!widget.isHidden()){return this.formWidgets[pageNumber][i]}}}return null};FormsModule.prototype.getPrevWidgetInPage=function(pageNumber,startIndex){var widgets=this.formWidgets[pageNumber];if(widgets!=null){if(startIndex==-2){startIndex=widgets.length-1}for(var i=startIndex;i>=0;i--){var widget=this.formWidgets[pageNumber][i];if(!widget.isReadonly()&&!widget.isHidden()){return this.formWidgets[pageNumber][i]}}}return null};FormsModule.prototype.initialize=function(viewerManager,serverCom){var _this=this;_super.prototype.initialize.call(this,viewerManager,serverCom);$(viewerManager.viewerDOM.viewer).keydown(function(e){if(!_this.supportsFormsLayer){return}if(!e.shiftKey&&e.keyCode==9){e.preventDefault();var curPage=1;var curTabIndex=-1;if(_this.prevFocusedFieldWidget!=null){curPage=_this.prevFocusedFieldWidget.getPageNumber();curTabIndex=_this.formWidgets[curPage].indexOf(_this.prevFocusedFieldWidget)}var found=false;curTabIndex+=1;for(var i=curPage;i<=_this.viewerManager.pageCount;++i){var widget=_this.getNextWidgetInPage(i,curTabIndex);if(widget!=null){widget.setFocus();_this.prevFocusedFieldWidget=widget;found=true;break}curTabIndex=0}if(!found){curTabIndex=0;for(var i=1;i<=curPage;++i){var widget=_this.getNextWidgetInPage(i,curTabIndex);if(widget!=null){widget.setFocus();_this.prevFocusedFieldWidget=widget;found=true;break}curTabIndex=0}}}if(e.shiftKey&&e.keyCode==9){e.preventDefault();var curPage=1;var curTabIndex=-2;if(_this.prevFocusedFieldWidget!=null){curPage=_this.prevFocusedFieldWidget.getPageNumber();curTabIndex=_this.formWidgets[curPage].indexOf(_this.prevFocusedFieldWidget)}var found=false;curTabIndex-=1;for(var i=curPage;i>=1;--i){var widget_1=_this.getPrevWidgetInPage(i,curTabIndex);if(widget_1!=null){widget_1.setFocus();_this.prevFocusedFieldWidget=widget_1;found=true;break}curTabIndex=-2}if(!found){curTabIndex=-2;for(var i=_this.viewerManager.pageCount;i>=curPage;--i){var widget=_this.getPrevWidgetInPage(i,curTabIndex);if(widget!=null){widget.setFocus();_this.prevFocusedFieldWidget=widget;found=true;break}curTabIndex=-2}}}});$(document).on("click",function(e){for(var i=1;i<=_this.viewerManager.pageCount;++i){_this.OnWidgetSelectionChanged(null,i);var container=$("#"+_this.viewerManager.documentid+i);_this.focusOut(container)}})};FormsModule.prototype.submitForm=function(submitUrl,submitMethod,includeFields,isIncludeList,includeNoValueFields){if(submitMethod===void 0){submitMethod=SubmitMethod.POST}if(includeFields===void 0){includeFields=null}if(isIncludeList===void 0){isIncludeList=true}if(includeNoValueFields===void 0){includeNoValueFields=false}var keyValArray=this.prepareFormDataforSubmit(includeFields,includeNoValueFields,isIncludeList);var data={};if(keyValArray==null){return null}this.viewerManager.events.dispatchAllFormEvents(gnostice.EventNames.beforeFormSubmit,null,{data:keyValArray,viewerManager:this.viewerManager,cancelPosting:this.cancelPostingFormData});if(submitMethod==SubmitMethod.POST){for(var i=0;i<keyValArray.length;++i){data[keyValArray[i].fieldName]=keyValArray[i].fieldValue}if(!this.cancelPostingFormData.Value){return $.ajax({url:submitUrl,type:"POST",data:data,cache:false})}}else{var str="";for(var i=0;i<keyValArray.length;++i){if(str!=""){str+="&"}str+=keyValArray[i].fieldName+"="+keyValArray[i].fieldValue}if(str!=""){return $.ajax({type:"GET",url:submitUrl+"?"+str})}}return null};FormsModule.prototype.resetModule=function(){this.fdViewState.length=0;this.formsData.length=0;this.fdRenderingState.length=0;this.formWidgets.length=0;this.containsFormData=false;this.isDirty=false;this.formFieldsRenderedByPage=null};FormsModule.prototype.rotate=function(element,degrees){$(element).css({"-webkit-transform":"rotate("+degrees+"deg)","-moz-transform":"rotate("+degrees+"deg)","-ms-transform":"rotate("+degrees+"deg)",transform:"rotate("+degrees+"deg)"})};FormsModule.prototype.clearFields=function(pageNumber){var _this=this;var docuId=this.viewerManager.documentid;var container=$("#"+docuId+pageNumber);$(container).find(".git_formField").remove();$(container).find(".git_formField_pushButton").remove();$(container).on("click",function(e){if($(event.target).attr("class")=="canvas_image"){_this.OnWidgetSelectionChanged(null,pageNumber);_this.focusOut(container)}})};FormsModule.prototype.processFields=function(data,pageNumber,force){var _this=this;if(force===void 0){force=false}if(this.viewerManager.rotationAngle!=0){this.clearFields(pageNumber);this.fdRenderingState[pageNumber]=false;return}if(!force){if(this.fdViewState[pageNumber]!=null){if((this.fdRenderingState[pageNumber]==true)&&(this.fdViewState[pageNumber].rotationAngle==this.viewerManager.rotationAngle)&&(this.fdViewState[pageNumber].zoomFactor==this.viewerManager.zoomfactor)){return}}}this.fdViewState[pageNumber].rotationAngle=this.viewerManager.rotationAngle;this.fdViewState[pageNumber].zoomFactor=this.viewerManager.zoomfactor;this.fdRenderingState[pageNumber]=true;var docuId=this.viewerManager.documentid;var container=$("#"+docuId+pageNumber);$(container).find(".git_formField").remove();$(container).find(".git_formField_pushButton").remove();$(container).on("click",function(e){if($(e.target).attr("class")=="canvas_image"){_this.OnWidgetSelectionChanged(null,pageNumber)}});var unitConverter=1.3334;var zoomFactor=this.viewerManager.zoomfactor*unitConverter;if(this.formWidgets[pageNumber]==null){this.formWidgets[pageNumber]=new Array()}this.formWidgets[pageNumber].length=0;if(data.length>0){this.containsFormData=true}if(this.formFieldsByPage[pageNumber]==null){this.formFieldsByPage[pageNumber]=new Array()}this.formFieldsByPage[pageNumber].length=0;for(var i=0;i<data.length;++i){var field=data[i];var fdWidget=this.createWidget(container,pageNumber,field);this.formWidgets[pageNumber].push(fdWidget);var formField=FormField.createFormField(this,field,fdWidget);this.formFieldsByPage[pageNumber].push(formField);fdWidget.setFormField(formField);fdWidget.render()}};FormsModule.prototype.resetFields=function(fieldsToReset,isIncludeList){if(fieldsToReset===void 0){fieldsToReset=null}if(isIncludeList===void 0){isIncludeList=true}if(!this.containsFormData){return}var resetAll=(fieldsToReset==null||fieldsToReset.length==0);for(var pageNumber=1;pageNumber<=this.viewerManager.pageCount;++pageNumber){var widgets=this.formWidgets[pageNumber];if(widgets==null){return}for(var i=0;i<widgets.length;++i){var widget=widgets[i];if(!resetAll){var index=fieldsToReset.indexOf(widget.getFullyQualifiedFieldName());if(index==-1&&isIncludeList){continue}else{if(index>=0&&!isIncludeList){continue}}}widget.reset()}}};FormsModule.prototype.focusForm=function(){var smallestTab=Number.MAX_VALUE;var firstWidget=null;for(var pageNum=1;pageNum<=this.viewerManager.pageCount;++pageNum){var widgets=this.formWidgets[pageNum];for(var index=0;index<widgets.length;++index){if(widgets[index].getTabIndex()<smallestTab){smallestTab=widgets[index].getTabIndex();firstWidget=widgets[index]}}}if(firstWidget!=null){firstWidget.setFocus()}};FormsModule.prototype.reDrawFields=function(pageNumber,tabIndex){var data=this.formsData[pageNumber];var widgets=this.formWidgets[pageNumber];if(widgets==null){return}var docuId=this.viewerManager.documentid;var container=$("#"+docuId+pageNumber);$(container).find(".git_formField").remove();$(container).find(".git_formField_pushButton").remove();for(var i=0;i<widgets.length;++i){var widget=widgets[i];widget.render()}};FormsModule.prototype.prepareFormDataforSubmit=function(includeFields,includeNoValueFields,isIncludeList){var keyValArray=new Array();var includeAll=(includeFields==null||includeFields.length==0);for(var pageNumber=1;pageNumber<=this.viewerManager.pageCount;++pageNumber){var widgets=this.formWidgets[pageNumber];if(widgets==null){continue}var data=this.formsData[pageNumber];for(var i=0;i<widgets.length;++i){var widget=widgets[i];if(!includeAll){var index=includeFields.indexOf(widget.getFullyQualifiedFieldName());if(index==-1){index=includeFields.indexOf(widget.getFieldMappingName())}if(index==-1){index=includeFields.indexOf(widget.getFieldName())}if(index==-1&&isIncludeList){continue}else{if(index>=0&&!isIncludeList){continue}}}var keyValPair=widget.getKeyValuePair(includeNoValueFields);if(keyValPair!=null){keyValArray.push(keyValPair)}if(keyValPair==null&&widget.isRequired()&&!widget.isReadonly()&&widget.getFieldType()!=8){var str=gnostice.LocalizedStrings.msgdlg_alert_formFieldsRequired;this.viewerManager.showMessageBox(str);return null}}}return keyValArray};FormsModule.prototype.getStringOfPattern=function(fdName){if(fdName[fdName.length-1]=="]"){var ind=fdName.indexOf("[");if(ind>0){fdName=fdName.substring(0,ind)}}return fdName};FormsModule.prototype.updateOtherFields=function(fieldWidget){var tabIndex=0;for(var i=1;i<=this.viewerManager.pageCount;++i){var widgets=this.formWidgets[i];if(widgets==null){continue}var modified=false;for(var k=0;k<widgets.length;++k){var widget=widgets[k];if((widget.getFieldType()==fieldWidget.getFieldType())&&(fieldWidget.getField()!=widget.getField())){if(widget.getFullyQualifiedFieldName()==fieldWidget.getFullyQualifiedFieldName()){widget.getField().fieldValue=fieldWidget.getField().fieldValue;modified=true}}}if(modified){this.reDrawFields(i,tabIndex)}}};FormsModule.prototype.calculateOtherFields=function(fieldWidget){for(var i=1;i<=this.viewerManager.pageCount;++i){var widgets=this.formWidgets[i];if(widgets==null){return}for(var k=0;k<widgets.length;++k){var widget=widgets[k];widget.recalculate()}}};FormsModule.prototype.getWidgetByName=function(fieldName){for(var i=1;i<=this.viewerManager.pageCount;++i){var widgets=this.formWidgets[i];if(widgets==null){return}for(var k=0;k<widgets.length;++k){var widget=widgets[k];if(widget.getFullyQualifiedFieldName()==fieldName){return widget}}}return null};FormsModule.prototype.focusGained=function(fieldWidget,radioIndex){if(radioIndex===void 0){radioIndex=0}if(fieldWidget==null){return}var container=fieldWidget.getContainer();var zoomFactor=this.viewerManager.zoomfactor;this.lastFocusedFieldWidget=fieldWidget;this.prevFocusedFieldWidget=fieldWidget;var top=0;var left=0;var width=0;var height=0;var field=fieldWidget.getField();if(fieldWidget instanceof gnostice.FormRadioGroupWidget){top=(field.radioItems[radioIndex].rectangle.top-1)*zoomFactor;left=(field.radioItems[radioIndex].rectangle.left-1)*zoomFactor;width=(field.radioItems[radioIndex].rectangle.width+1)*zoomFactor;height=(field.radioItems[radioIndex].rectangle.height+1)*zoomFactor}else{top=(field.rectangle.top-1)*zoomFactor;left=(field.rectangle.left-1)*zoomFactor;width=(field.rectangle.width+1)*zoomFactor;height=(field.rectangle.height+1)*zoomFactor}if(fieldWidget instanceof gnostice.FormRadioGroupWidget||fieldWidget instanceof gnostice.FormCheckBoxWidget||fieldWidget instanceof gnostice.FormPushButtonWidget){$(this.focusRectLeft).css({position:"absolute",left:left,top:top,width:1,height:height,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"0px 0px 0px 1px","border-style":"none none none dotted","border-color":"white white white black"});$(this.focusRectTop).css({position:"absolute",left:left,top:top,width:width,height:1,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"1px 0px 0px","border-style":"dotted none none","border-color":"black white white"});$(this.focusRectRight).css({position:"absolute",left:left+width,top:top,width:1,height:height,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"0px 1px 0px 0px","border-style":"none dotted none none","border-color":"white black white white"});$(this.focusRectBottom).css({position:"absolute",left:left,top:top+height,width:width,height:1,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"0px 0px 1px","border-style":"none none dotted","border-color":"white white black"});$(container).append(this.focusRectLeft);$(container).append(this.focusRectTop);$(container).append(this.focusRectRight);$(container).append(this.focusRectBottom)}};FormsModule.prototype.focusOut=function(container){$(".git_focusRectLeft").remove();$(".git_focusRectTop").remove();$(".git_focusRectRight").remove();$(".git_focusRectBottom").remove();this.lastFocusedFieldWidget=null;this.prevFocusedFieldWidget=null};FormsModule.prototype.OnWidgetSelectionChanged=function(widget,pageNumber){var widgets=this.formWidgets[pageNumber];if(widgets!=null){for(var i=0;i<widgets.length;++i){widgets[i].OnWidgetSelectionChanged(widget,pageNumber)}}};FormsModule.prototype.getAllFormFields=function(){var formFields=new Array();for(var pageNum=1;pageNum<this.formFieldsByPage.length;++pageNum){for(var index=0;index<this.formFieldsByPage[pageNum].length;++index){formFields.push(this.formFieldsByPage[pageNum][index])}}return formFields};FormsModule.prototype.getFormField=function(formFieldName){for(var pageNum=1;pageNum<this.formFieldsByPage.length;++pageNum){for(var _i=0,_a=this.formFieldsByPage[pageNum];_i<_a.length;_i++){var formField=_a[_i];if(formField.fullyQualifiedName==formFieldName){return formField}}}for(var pageNum=1;pageNum<this.formFieldsByPage.length;++pageNum){for(var _b=0,_c=this.formFieldsByPage[pageNum];_b<_c.length;_b++){var formField=_c[_b];if(formField.name==formFieldName){return formField}}}return null};FormsModule.prototype.createWidget=function(container,pageNumber,field){var fdWidget=null;this.curTabIndex++;switch(field.fieldType){case 1:fdWidget=new gnostice.FormTextWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 4:fdWidget=new gnostice.FormComboBoxWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 16:fdWidget=new gnostice.FormListBoxWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 2:fdWidget=new gnostice.FormRadioGroupWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 8:fdWidget=new gnostice.FormCheckBoxWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 32:fdWidget=new gnostice.FormPushButtonWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break}return fdWidget};FormsModule.prototype.executeJavaScript=function(javaScript){var contextObj={formsModule:this,getField:function(fieldName){var srcWidget=this.formsModule.getWidgetByName(fieldName);if(srcWidget!=null){var field=srcWidget.field;return{value:field.fieldValue}}return{}},submitForm:function(){if(arguments.length<1){return}var url=null;var submitEmptyFields=false;var fieldList=null;var httpGet=false;if(arguments.length==1&&(typeof arguments[0]==="object")){var arg=arguments[0];url=arg.cURL;submitEmptyFields=arg.bEmpty;fieldList=arg.aFields;httpGet=arg.bGet}else{if(arguments.length>1){url=arguments[0]}if(arguments.length>3){submitEmptyFields=arguments[2]}if(arguments.length>4){fieldList=arguments[3]}if(arguments.length>5){httpGet=arguments[4]}}if(url==null){return}var includeFields=null;if(fieldList!=null){includeFields=new Array();if(typeof fieldList==="string"){includeFields.push(fieldList)}else{if(Array.isArray(fieldList)){for(var i=0;i<fieldList.length;++i){includeFields.push(fieldList[i])}}}}var submitMethod=SubmitMethod.POST;if(httpGet){submitMethod=SubmitMethod.GET}return this.formsModule.submitForm(url,submitMethod,includeFields,true,submitEmptyFields)},resetForm:function(){var includeFields=null;if(arguments.length>0&&Array.isArray(arguments[0])){var fieldList=arguments[0];includeFields=new Array();for(var i=0;i<fieldList.length;++i){includeFields.push(fieldList[i])}}this.formsModule.resetFields(includeFields)}};var event={value:0};var calcFn={};var calcFnStr="var calcFn = function(event) { "+javaScript+" };";eval(calcFnStr);var returnValue=calcFn.call(contextObj,event);return{returnValue:returnValue,argument:event}};return FormsModule}(gnostice.PluggableModule));gnostice.FormsModule=FormsModule})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(g,f,e,h,d,i){this.container=g;this.pageNumber=f;this.tabIndex=e;this.field=h;this.formsModule=d;this.viewerManager=i;this.validationFailed=false;this.suppressInFocusEvent=false;this.readonly=h.isReadonly;this.hidden=h.isHidden;this.required=h.isRequired;this.fieldType=h.fiedlType;this.fieldName=h.fieldName;this.fullyQualifiedFieldName=h.fullyQualifiedFieldName;this.fieldMappingName=h.fieldMappingName;if(h.isReadonly){e=0}}c.prototype.isReadonly=function(){return this.readonly};c.prototype.isHidden=function(){return this.hidden};c.prototype.isRequired=function(){return this.required};c.prototype.getFieldType=function(){return this.fieldType};c.prototype.getPageNumber=function(){return this.pageNumber};c.prototype.getFieldName=function(){return this.fieldName};c.prototype.getFullyQualifiedFieldName=function(){return this.fullyQualifiedFieldName};c.prototype.getFieldMappingName=function(){return this.fieldMappingName};c.prototype.getField=function(){return this.field};c.prototype.getContainer=function(){return this.container};c.prototype.getTabIndex=function(){return this.tabIndex};c.prototype.isValidationFailed=function(){return this.validationFailed};c.prototype.render=function(){var d=this.field;this.zoomFactor=this.viewerManager.zoomfactor;this.field.font=this.field.font||{fallbackFontName:"Arial",sizeInPoints:9.2,style:{bold:true,italic:false,underline:false}};this.field.font.style=this.field.font.style||{bold:false,italic:false,underline:false};var f=tinycolor(this.formsModule.fieldHighlightColor);this.fieldHighlightColor=f.toRgbString();var e=f.getAlpha();this.listItemHoverBackgroundColor=f.setAlpha(1).toRgbString();this.fieldFocusColor=d.backgroundColor;f=tinycolor(this.formsModule.fieldFocusColor);if(f.isValid()){this.fieldFocusColor=f.toRgbString()}if(this.fieldFocusColor==null){this.fieldFocusColor="rgb(255, 255, 255)"}this.fieldReadOnlyColor=d.backgroundColor;f=tinycolor(this.formsModule.fieldReadonlyColor);if(f.isValid()){this.fieldReadOnlyColor=f.toRgbString()}this.listContainerBackgroundColor="rgb(255, 255, 255);";f=tinycolor(this.formsModule.listContainerBackgroundColor);if(f.isValid()){this.listContainerBackgroundColor=f.toRgbString()}f=tinycolor(this.formsModule.listItemHoverBackgroundColor);if(f.isValid()){this.listItemHoverBackgroundColor=f.toRgbString()}this.borderColor=d.borderColor;if(d.borderColor==null){if(e<1){this.borderColor="rgba(255, 255, 255,"+e+")"}else{this.borderColor="#FFFFFF"}}this.borderWidth=d.borderWidth;if(d.isRequired&&!d.isReadonly){this.borderColor="#FF0000";if(this.borderWidth<1){this.borderWidth=1}}};c.prototype.setFormField=function(d){this.formField=d};c.prototype.updateField=function(){};c.prototype.recalculate=function(){};c.prototype.getAlignment=function(d){if(d.alignment==0){return"left"}else{if(d.alignment==1){return"center"}else{if(d.alignment==2){return"right"}}}return"left"};c.prototype.reset=function(){this.field.fieldValue=this.field.defaultValue};c.prototype.getTextWidth=function(g,d){if(this.canvas==null){this.canvas=document.createElement("canvas")}var e=this.canvas.getContext("2d");e.font=d;var f=e.measureText(g);return f.width};c.prototype.escapeComma=function(h){if(h!=null){var i=h.indexOf(",",-1);var f="";while(i>-1){var g=h.slice(0,i);var e=h.slice(i+1,h.length);var d="%2C";h=g+d+e;var i=h.indexOf(",",i+3)}}return h};c.prototype.OnWidgetSelectionChanged=function(e,d){};c.prototype.isPrintableKeyPressed=function(d){var e=(d>47&&d<58)||d==32||d==13||(d>64&&d<91)||(d>95&&d<112)||(d>185&&d<193)||(d>218&&d<223);return e};c.prototype.drawTick=function(g,d,f){var e=f.getContext("2d");e.scale(g/100,d/100);e.save();e.save();e.beginPath();e.moveTo(39.363,79);e.lineTo(16,55.49);e.lineTo(27.347,44.071);e.lineTo(39.694,56.49);e.lineTo(72.983,23);e.lineTo(84,34.085);e.lineTo(39.363,79);e.closePath();e.fill();e.stroke();e.restore();e.restore();e.scale(1,1)};c.prototype.drawCircle=function(h,e,i,g){var k=h/2;var j=e/2;var d=(Math.min(h,e)/2)-(2*i);var f=g.getContext("2d");f.beginPath();f.arc(k,j,d*0.8,0,2*Math.PI,false);f.fillStyle="black";f.fill()};c.prototype.validateField=function(e,h,g){if(g==null||g.length<=0){return null}var f="";switch(e){case"date":f=h.pattern;if(f!=null&&!this.validDateTime(g,f)){return a.LocalizedStrings.form_validation_error_date+" "+f}break;case"time":f=h.pattern;if(f!=null&&!this.validDateTime(g,f)){return a.LocalizedStrings.form_validation_error_time+" "+f}break;case"dateTime":f=h.pattern;if(f!=null&&!this.validDateTime(g,f)){return a.LocalizedStrings.form_validation_error_datetime+" "+f}break;case"customMask":var d=h.mask;if(d!=null&&!this.validInput(g,d)){return a.LocalizedStrings.form_validation_error_input+" "+d}break}return null};c.prototype.validInput=function(h,g){if(h.length!=g.length){return false}for(var d=0;d<g.length;++d){var f=g.charAt(d);var e=h.charAt(d);switch(f){case"A":if(/^[A-Z]$/i.test(e)==false){return false}break;case"X":if(e<" "||e=="\127"){return false}break;case"O":if((/^[A-Z]$/i.test(e)==false)||(/^[0-9]$/.test(e)==false)){return false}break;case"9":if(/^[0-9]$/.test(e)==false){return false}break;default:if(f!=e){return false}break}}return true};c.prototype.validDateTime=function(v,g){v=v.toLowerCase();var B=null,L=null;var k="",O="";var M=/[-\/dy]/.test(g);var x=/[hH]/.test(g);if(M&&x){var D=g.indexOf(" ");if(D==-1){return false}B=g.substr(0,D);L=g.substr(D+1);D=v.indexOf(" ");if(D==-1){return false}k=v.substr(0,D);O=v.substr(D+1)}else{if(M){B=g;k=v}else{if(x){L=g;O=v}else{return false}}}var s=1,e=1,f=2016;var q=0,h=0,u=0;var N=false;var p=true;var y="";if(M){var n="/";if(B.indexOf("-")!=-1){n="-"}else{if(B.indexOf("/")!=-1){n="/"}else{if(B.indexOf(" ")!=-1){n=" ";k=k.replace(",","");B=B.replace(",","")}else{n=""}}}var r=[];if(n!=""){r=B.split(n)}else{if(B.length>0){var o=B.charAt(0);var l=o;for(var z=1;z<B.length;++z){var w=B.charAt(z);if(w!=o){r.push(l);l="";o=w}l+=w}r.push(l)}}var I=-1,J=-1,K=-1;var E="^";for(var z=0;z<r.length;++z){var l=r[z];switch(l){case"d":if(n==""){E+="(\\d{1})"}else{E+="(\\d{1,2})"}I=z+1;break;case"dd":if(n==""){E+="(\\d{2})"}else{E+="(\\d{1,2})"}I=z+1;break;case"m":if(n==""){E+="(\\d{1})"}else{E+="(\\d{1,2})"}J=z+1;break;case"mm":if(n==""){E+="(\\d{2})"}else{E+="(\\d{1,2})"}J=z+1;break;case"mmm":E+="([a-z]{3})";J=z+1;N=true;break;case"mmmm":if(n==""){E+="([a-z]{4})"}else{E+="([a-z]{3,4})"}J=z+1;N=true;break;case"yy":E+="(\\d{2})";K=z+1;p=false;break;case"yyyy":E+="(\\d{4})";K=z+1;break;default:return false}if(z<(r.length-1)&&n!=""){E+=("["+n+"]")}}E+="$";var d=new RegExp(E).exec(k);if(d==null){return false}s=(I!=-1)?Number(d[I]):s;if(J!=-1){if(N){var G=d[J];switch(G){case"jan":e=0;break;case"feb":e=1;break;case"mar":e=2;break;case"apr":e=3;break;case"may":e=4;break;case"jun":case"june":e=5;break;case"jul":case"july":e=6;break;case"aug":e=7;break;case"sep":e=8;break;case"oct":e=9;break;case"nov":e=10;break;case"dec":e=11;break;default:return false}}else{e=Number(d[J])-1}}f=(K!=-1)?Number(d[K]):f}if(x){var F=":";if(L.indexOf(" ")!=-1){L=L.replace(" ",":");O=O.replace(" ",":")}var r=L.split(F);var t=-1,i=-1,m=-1,C=-1;var E="^";for(var z=0;z<r.length;++z){var l=r[z];switch(l){case"h":E+="([1-9]|1[0-2])";t=z+1;break;case"H":E+="([0-9]|1[0-9]|2[0-3])";t=z+1;break;case"m":E+="([0-9]|[1-5][0-9])";i=z+1;break;case"s":E+="([0-9]|[1-5][0-9])";m=z+1;break;case"tt":E+="(am|pm)";C=z+1;break;default:return false}if(z<(r.length-1)){E+=("["+F+"]")}}E+="$";if(t==-1||i==-1){return false}var d=new RegExp(E).exec(O);if(d==null){return false}q=Number(d[t]);h=Number(d[i]);u=(m!=-1)?Number(d[m]):u;if(C!=-1){q+=11}}var A=new Date(f,e,s,q,h,u);var H;if(p){H=A.getFullYear()}else{var j=A.getFullYear()+"";H=Number(j.substr(2))}return((A.getSeconds()==u)&&(A.getMinutes()==h)&&(A.getHours()==q)&&(A.getDate()==s)&&(A.getMonth()==e)&&(H==f))};c.prototype.formatField=function(n,o,p,l){var g=p;var f=l;switch(n){case"number":case"percent":var q=o.decPlaces||0;var j=o.negStyle||"minusBlack";var d=o.currSymbol||"";var m=o.currPrepend||true;var k=o.currStyle||"0";var i=o.separator||"";var h=parseFloat(p);if(isNaN(h)){break}var e=(h<0);h=Math.abs(h);g=h.format(q,3,i,".");if(d!=""){if(m){g=d+g}else{g+=d}}if(e){if(j=="red"){f="red"}else{if(j=="minusBlack"){g="-"+g}else{if(j=="parensRed"){f="red";g="("+g+")"}else{if(j=="parensBlack"){g="("+g+")"}}}}}break}return{value:g,color:f}};c.prototype.valueToSelectedIndices=function(j,h,k){var g=new Array();var e=j.split(",");for(var f=0;f<e.length;++f){var i=e[f];var d=-1;if(h!=null){d=h.indexOf(i)}if(d==-1&&k!=null){d=k.indexOf(i)}if(d!=-1){g.push(d)}}return g};return c}());a.FormWidget=b})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(c){__extends(d,c);function d(){c.apply(this,arguments);this.fdContainer=null;this.autoCompleteItems=null;this.isValidateField=false}d.prototype.showFocus=function(e){if(e){$(this.fdContainer).css({"background-color":this.fieldFocusColor})}else{$(this.fdContainer).css({"background-color":(this.field.isReadonly)?this.fieldReadOnlyColor:this.fieldHighlightColor})}};d.prototype.getCombValue=function(){var e="";for(var f=0;f<this.field.maxLength;++f){e+=$($(this.fdContainer).children("div").children("input").get(f)).val()}return e};d.prototype.setCombValue=function(e,f){if(f===void 0){f=null}var h=$(this.fdContainer).children();for(var g=0;g<this.field.maxLength;++g){var i=$(h.children("input").get(g));if(g<e.length){i.val(e.charAt(g))}else{i.val("")}if(f!=null){i.css({color:f})}}};d.prototype.render=function(){var t=this;if(this.field.isHidden){return}c.prototype.render.call(this);var e=this.field;this.isValidateField=true;var h=this.zoomFactor;var x=e.rectangle.top*h;var l=e.rectangle.left*h;var k=(e.rectangle.width-this.borderWidth-2)*h;var g=(e.rectangle.height-this.borderWidth)*h;var p="";if(e.font.style.bold){p+="bold "}if(e.font.style.italic){p+="italic "}p+=(e.font.sizeInPoints*h)+"pt "+e.font.fallbackFontName;this.fdContainer=document.createElement("div");$(this.fdContainer).attr({"class":"git_formField"});$(this.fdContainer).css({position:"absolute","float":"top",left:l,top:x,width:k,height:g,"z-index":"20",display:"block",color:e.fontColor,"background-color":(e.isReadonly)?this.fieldReadOnlyColor:this.fieldHighlightColor,"text-align":"center",border:Math.floor(this.borderWidth*h)+"px solid "+this.borderColor});this.formField.value=e.fieldValue;if(e.isComb){var s=document.createElement("div");$(s).attr({"class":"git_formField"});$(s).css({position:"absolute",left:0,top:0,width:k,height:g,overflow:"none"});$(this.fdContainer).append(s);if(e.alternateName!=null&&e.alternateName!=""){$(s).attr({title:e.alternateName})}if(this.isValidateField){var r=document.createElement("input");$(r).attr({tabindex:this.tabIndex,maxlength:e.maxLength,"class":"git_formField_edit"});if(e.isReadonly){$(r).attr({readonly:"true"})}$(r).css({position:"absolute",left:0,top:0,width:k,height:g,"z-index":"100",display:"none",color:e.fontColor,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":e.font.fallbackFontName,"font-size":(e.font.sizeInPoints*h)+"pt","font-weight":e.font.style.bold?"bold":"normal","font-style":e.font.style.italic?"italic":"normal","text-decoration":e.font.style.underline?"underline":"none","text-align":"center",outline:"none"});$(r).focusout(function(C){var B;var A=$(C.target);B=t.validateField(t.field.dataType,t.field.dataFormat,A.val());if(B!=null){t.field.fieldValue=t.field.fieldOldValue;t.viewerManager.showMessageBox(B,function(){A.val(t.field.fieldValue);A.focus()});C.preventDefault();return false}var D=t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField});if(D==false){C.preventDefault();return false}t.formsModule.updateOtherFields(t);t.formsModule.calculateOtherFields(t);t.formsModule.focusOut(t.container);t.setCombValue(A.val());A.hide();$(t.fdContainer).children("div").show()});$(r).on("click",function(A){A.stopPropagation()});$(r).on("input",function(B){var A=$(B.target);t.field.fieldValue=A.val();t.formsModule.setDirtyFlag(true);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,t.formField.name,{formField:t.formField});t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})});$(r).keyup(function(C){var A=t.field.fieldValue;var B=$(C.target);t.field.fieldValue=B.val();t.formField.value=B.val();if(A!=t.field.fieldValue){t.formsModule.setDirtyFlag(true);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,t.formField.name,{formField:t.formField});t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}});$(this.fdContainer).append(r)}var i=0;var u=k/e.maxLength;var w=function(A){q=document.createElement("div");v=z.borderWidth;o=z.borderWidth;y=z.borderWidth;if(A!=e.maxLength-1){y=0}$(q).css({position:"absolute",left:i,top:0,width:u,height:g,"text-align":"center","border-width":o+"px "+y+"px "+o+"px "+v+"px ","border-style":"solid","border-color":"gray"});$(s).append(q);n=document.createElement("input");if(A==0){z.focusControl=n}$(n).focusin(function(){t.formsModule.OnWidgetSelectionChanged(t,t.pageNumber);t.formsModule.focusGained(t);t.showFocus(true);if(!t.suppressInFocusEvent){t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField})}t.suppressInFocusEvent=false;if(t.isValidateField){var B=t.getCombValue();t.field.fieldOldValue=B;var C=$(t.fdContainer).children("input");C.val(B);$(t.fdContainer).children("div").hide();C.show().focus()}});$(n).focusout(function(B){});if(e.isPassword){$(n).attr("type","password")}if(e.isReadonly){$(n).attr({readonly:"true"})}$(n).attr({tabindex:z.tabIndex,value:e.fieldValue.charAt(A),maxlength:"1","class":"comb_inputs, .git_formField_edit"});$(n).css({position:"absolute",left:i,top:0,width:u,height:g,"z-index":"100",display:"block",color:e.fontColor,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":e.font.fallbackFontName,"font-size":(e.font.sizeInPoints*h)+"pt","font-weight":e.font.style.bold?"bold":"normal","font-style":e.font.style.italic?"italic":"normal","text-decoration":e.font.style.underline?"underline":"none","text-align":"center",outline:"none"});$(n).on("click",function(B){t.formsModule.OnWidgetSelectionChanged(t,t.pageNumber);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField});B.stopPropagation()});$(n).on("keyup",function(G){if(t.field.isReadonly){return}var E=t.field.fieldValue;var F=$(G.target);var D=t.getCombValue();t.field.fieldValue=D;t.formField.value=D;if(E!=t.field.fieldValue){t.formsModule.setDirtyFlag(true);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,t.formField.name,{formField:t.formField});t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}var C=G.keyCode;if(t.isPrintableKeyPressed(C)&&(F.val().length==1)&&(A<e.maxLength-1)){var B=$(F.parent().children("input").get(A+1));B.focus();B.select()}});$(n).on("keydown",function(C){if(t.field.isReadonly){return}var B=$(C.target);if(!C.shiftKey&&C.keyCode==37){if(A>0){$(B.parent().children("input").get(A-1)).focus()}C.preventDefault()}else{if(!C.shiftKey&&C.keyCode==39){if(A<e.maxLength-1){$(B.parent().children("input").get(A+1)).focus()}C.preventDefault()}}});$(s).append(n);i=i+u};var z=this;var q,v,o,y,n;for(var j=0;j<e.maxLength;j++){w(j)}}else{if(!e.isMultiline){var n=document.createElement("input");this.focusControl=n;if(e.isPassword){$(n).attr("type","password")}$(n).attr("class",".git_formField_edit");if(!e.isNoSpellCheck){$(n).attr("spellcheck","true")}else{$(n).attr("spellcheck","false")}if(e.isReadonly){$(n).attr({readonly:"true"})}if(e.alternateName!=null&&e.alternateName!=""){$(n).attr({title:e.alternateName})}var m=this.formatField(e.dataType,e.dataFormat,e.fieldValue,e.fontColor);$(n).attr({value:m.value,tabindex:this.tabIndex});if(e.maxLength>0){$(n).attr({maxlength:e.maxLength})}$(n).css({position:"absolute",left:0,top:0,width:k,height:g,"z-index":"100",display:"block",color:m.color,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px","padding-left":"1px","font-family":e.font.fallbackFontName,"font-size":(e.font.sizeInPoints*h)+"pt","font-weight":e.font.style.bold?"bold":"normal","font-style":e.font.style.italic?"italic":"normal","text-decoration":e.font.style.underline?"underline":"none","text-align":this.getAlignment(e),outline:"none"});$(n).on("click",function(A){t.formsModule.OnWidgetSelectionChanged(t,t.pageNumber);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField});A.stopPropagation()});$(n).keypress(function(D){if(!t.field.isReadonly&&t.field.isNoScroll){var C=$(D.target);var B=t.getTextWidth(e.fieldValue+String.fromCharCode(D.which),p);var A=k*h;if(B>(A*1.1)){C.attr({maxlength:e.fieldValue.length})}else{C.attr({maxlength:e.fieldValue.length+3})}}});$(n).on("input",function(B){if(!t.field.isReadonly){var A=$(B.target);t.field.fieldValue=A.val();t.formsModule.setDirtyFlag(true);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,t.formField.name,{formField:t.formField});t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}});$(n).keyup(function(C){if(!t.field.isReadonly){var A=t.field.fieldValue;var B=$(C.target);t.field.fieldValue=B.val();t.formField.value=B.val();if(A!=t.field.fieldValue){t.formsModule.setDirtyFlag(true);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,t.formField.name,{formField:t.formField});t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}});$(n).focusin(function(B){t.formsModule.OnWidgetSelectionChanged(t,t.pageNumber);t.showFocus(true);t.formsModule.focusGained(t);var A=$(B.target);t.field.fieldOldValue=t.field.fieldValue;A.val(t.field.fieldValue);if(!t.suppressInFocusEvent){t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField})}t.suppressInFocusEvent=false});$(n).focusout(function(D){var C;var B=$(D.target);C=t.validateField(t.field.dataType,t.field.dataFormat,B.val());if(C!=null){t.field.fieldValue=t.field.fieldOldValue;t.viewerManager.showMessageBox(C,function(){var F=t.formatField(t.field.dataType,t.field.dataFormat,t.field.fieldValue,t.field.fontColor);B.val(F.value);B.css({color:t.field.fontColor});B.focus()});D.preventDefault();return false}var E=t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField});if(E==false){D.preventDefault();return false}var A=t.formatField(t.field.dataType,t.field.dataFormat,t.field.fieldValue,t.field.fontColor);B.val(A.value);B.css({color:t.field.fontColor});t.formsModule.updateOtherFields(t);t.formsModule.calculateOtherFields(t);t.formsModule.focusOut(t.container)});$(this.fdContainer).append(n)}else{var f=document.createElement("textarea");this.focusControl=f;$(f).css({position:"absolute",left:0,top:0,width:k,height:g,"z-index":"100",display:"block",color:e.fontColor,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":e.font.fallbackFontName,"font-size":(e.font.sizeInPoints*h)+"pt","font-weight":e.font.style.bold?"bold":"normal","font-style":e.font.style.italic?"italic":"normal","text-decoration":e.font.style.underline?"underline":"none","text-align":this.getAlignment(e),outline:"none",resize:"none"});$(f).attr("tabindex",this.tabIndex);$(f).attr("class",".git_formField_edit");if(!e.isNoSpellCheck){$(f).attr("spellcheck","true")}else{$(f).attr("spellcheck","false")}if(e.maxLength>0){$(f).attr({maxlength:e.maxLength})}if(e.alternateName!=null&&e.alternateName!=""){$(f).attr({title:e.alternateName})}if(e.isReadonly){$(f).attr({readonly:"true"})}$(f).val(e.fieldValue);$(this.fdContainer).append(f);$(f).on("click",function(A){t.formsModule.OnWidgetSelectionChanged(t,t.pageNumber);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField});A.stopPropagation()});$(f).on("keyup",function(C){if(!t.field.isReadonly){var A=t.field.fieldValue;var B=$(C.target);t.field.fieldValue=B.val();t.formField.value=B.val();if(A!=t.field.fieldValue){t.formsModule.setDirtyFlag(true);t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,t.formField.name,{formField:t.formField});t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}});$(f).focusin(function(){t.formsModule.OnWidgetSelectionChanged(t,t.pageNumber);t.showFocus(true);t.formsModule.focusGained(t);if(!t.suppressInFocusEvent){t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField})}t.suppressInFocusEvent=false});$(f).focusout(function(B){var A=$(B.target);if(!t.field.isReadonly){t.formsModule.setDirtyFlag(true);t.field.fieldValue=A.val()}var C=t.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,t.field.fieldName,{viewerManager:t.viewerManager,formField:t.formField});if(C==false){B.preventDefault();return false}t.formsModule.updateOtherFields(t);t.formsModule.focusOut(t.container)});jQuery.data(f,"field",e)}}$(this.container).append(this.fdContainer)};d.prototype.getAutoCompleteItemDisplayValue=function(e){return this.autoCompleteItems[e]};d.prototype.getAutoCompleteItemSubmitValue=function(e){return this.autoCompleteItems[e]};d.prototype.recalculate=function(){var q=this.field;if(q.calculate==null||q.calculate.func==null){return}var s=0;var g=q.calculate.func;if(g=="avg"||g=="sum"||g=="prd"||g=="min"||g=="max"){var o=q.calculate.params;var m=[];for(var k=0;k<o.length;++k){var n=this.formsModule.getWidgetByName(o[k]);if(n!=null){var h=parseFloat(n.getField().fieldValue);if(!isNaN(h)){m.push(h)}}}switch(g){case"sum":case"avg":for(var k=0;k<m.length;++k){s+=m[k]}if(g=="avg"){s=s/m.length}break;case"prd":s=1;for(var k=0;k<m.length;++k){s*=m[k]}break;case"min":s=Math.min.apply(null,m);break;case"max":s=Math.max.apply(null,m);break}}else{if(g=="javaScript"&&this.viewerManager.preferences.interactiveElements.formFields.allowJavaScriptExecution){var e=q.calculate.customScript;var l=this.formsModule.executeJavaScript(e);s=l.argument.value}}var p=s+"";var f=$(this.focusControl);var r=this.validateField(this.field.dataType,this.field.dataFormat,p);if(r!=null){this.viewerManager.showMessageBox(r);return}this.field.fieldValue=p;this.formsModule.setDirtyFlag(true);this.formField.value=p;var j=this.formatField(this.field.dataType,this.field.dataFormat,this.field.fieldValue,this.field.fontColor);f.val(j.value);f.css({color:this.field.fontColor});this.formsModule.updateOtherFields(this)};d.prototype.setValue=function(h){this.field.fieldValue=h;this.formField.value=h;var f=this.formatField(this.field.dataType,this.field.dataFormat,this.field.fieldValue,this.field.fontColor);if(this.field.isComb){var g=f.value;this.setCombValue(g,f.color)}else{var e=$(this.focusControl);e.val(f.value);e.css({color:this.field.fontColor})}this.formsModule.setDirtyFlag(true);this.formsModule.updateOtherFields(this)};d.prototype.setValueAsString=function(e){this.setValue(e)};d.prototype.getValueAsString=function(){var e=this.field.fieldValue;e=e.replace(/\n/g,"\r\n");return e};d.prototype.getKeyValuePair=function(f,g){if(f===void 0){f=false}if(g===void 0){g=false}var e=true;if(this.field.isNoExport&&!g){return null}if(g){e=true}else{if(!f){e=false}}var h=this.field.fullyQualifiedFieldName;var i=this.getValueAsString();if(!g){h=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){h=this.field.fieldMappingName}}if(e||(!e&&(i!=""))){return new a.FieldKeyValuePair(h,i)}return null};d.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.focusControl).focus();if(f&&!this.field.isMultiline&&!this.field.isComb){$(this.focusControl).select()}};d.prototype.reset=function(){if(this.field.isHidden){return}this.setValue(this.field.defaultValue)};d.prototype.OnWidgetSelectionChanged=function(f,e){if(this.field.isHidden){return}if((f!=null&&f.getField()!=this.field)||(f==null)){this.showFocus(false)}};return d}(a.FormWidget));a.FormTextWidget=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.editBoxContainer=null;this.editBox=null;this.listBoxContainer=null}c.prototype.render=function(){var n=this;if(this.field.isHidden){return}d.prototype.render.call(this);var o=this.field;var g=this.zoomFactor;var s=o.rectangle.top*g;var e=o.rectangle.left*g;var l=o.rectangle.width*g;var h=o.rectangle.height*g;var p=17*g;this.formField.selectedItemIndices=o.selectedItemIndices;this.formField.value=o.value;this.editBoxContainer=document.createElement("div");$(this.editBoxContainer).attr({"class":"git_formField"});$(this.editBoxContainer).css({position:"absolute","float":"top",top:s,left:e,width:l,height:h,"z-index":"20",display:"block","background-color":(o.isReadonly)?this.fieldReadOnlyColor:this.fieldHighlightColor,color:o.fontColor,outline:this.borderWidth*g+"px solid "+this.borderColor});$(this.container).append(this.editBoxContainer);this.listBoxContainer=document.createElement("div");$(this.listBoxContainer).attr({"class":"git_childContainer, git_formField"});$(this.listBoxContainer).css({position:"absolute","float":"top",top:s+h,left:e,width:l,height:145*g,"z-index":"2001",display:"none","background-color":this.listContainerBackgroundColor,color:o.fontColor,overflow:"scroll",outline:1*g+"px solid black",cursor:"default"});$(this.container).append(this.listBoxContainer);if(o.alternateName!=null&&o.alternateName!=""){$(this.listBoxContainer).attr({title:o.alternateName})}this.editBox=document.createElement("input");$(this.editBox).css({position:"absolute",top:0,left:0,width:l-p,height:h,display:"block",color:o.fontColor,"background-color":"transparent","z-index":"20",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":o.font.fallbackFontName,"font-size":Math.floor(o.font.sizeInPoints*g)+"pt","text-align":this.getAlignment(o),outline:"none"});$(this.editBox).attr({value:o.fieldValue,tabindex:this.tabIndex});if(!o.isEditable||o.isReadonly){$(this.editBox).attr("readonly","true")}if(o.isEditable&&!o.isNoSpellCheck){$(this.editBox).attr("spellcheck","true")}else{$(this.editBox).attr("spellcheck","false")}if(o.alternateName!=null&&o.alternateName!=""){$(this.editBox).attr("title",o.alternateName)}this.focusControl=this.editBox;$(this.editBoxContainer).append(this.editBox);$(this.editBox).focusin(function(){$(n.editBoxContainer).css({"background-color":n.fieldFocusColor});n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);n.formsModule.focusGained(n);if(!n.suppressInFocusEvent){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,n.formField.fullyQualifiedName,{formField:n.formField})}n.suppressInFocusEvent=false});$(this.editBox).focusout(function(){$(n.editBoxContainer).css({"background-color":(o.isReadonly)?n.fieldReadOnlyColor:n.fieldHighlightColor});n.formsModule.focusOut(n.container);n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,n.formField.fullyQualifiedName,{formField:n.formField})});$(this.editBox).on("click",function(i){n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,n.formField.fullyQualifiedName,{formField:n.formField});i.stopPropagation()});$(this.editBox).on("keydown",function(u){if(n.field.isReadonly){return}var t=n.field.selectedItemIndices.length;var i=(t>0)?n.field.selectedItemIndices[t-1]:-1;if(u.keyCode==40){if(i<o.displayValues.length-1){n.updateSelectedItem(i+1);if(i!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}else{if(o.displayValues.length>0){n.updateSelectedItem(0);if(i!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}}u.preventDefault()}else{if(u.keyCode==38){if(i>0){n.updateSelectedItem(i-1);if(i!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}u.preventDefault()}}});$(this.editBox).on("keyup",function(t){if(!o.isReadonly){var i=n.field.fieldValue;n.setValue($(t.target).val());if(n.field.fieldValue!=i){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}});var j=h*0.8;var m=document.createElement("div");$(m).addClass("git-docviewer-forms-comboBoxDownArrow");$(m).css({position:"absolute",top:(h-j)/2-1,left:l-p-2,width:p,height:j,"z-index":"21",display:"block","background-color":"rgb(212,208, 200)",cursor:"default",border:"1px solid #AAA","background-position":"center","border-radius":"2px","box-shadow":"0px 1px 3px rgba(0, 0, 0, 0.1)"});$(this.editBoxContainer).append(m);$(m).on("click",function(i){n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);if(!n.field.isReadonly){$(n.listBoxContainer).toggle();n.highlightItem(n.field.selectedItemIndices[0],n.listItemHoverBackgroundColor,"transparent")}i.stopPropagation()});if(o.displayValues!=null){var f=function(u){var t=document.createElement("div");$(t).css({width:"100%","white-space":"pre","z-index":"10",overflow:"hidden",display:"block","text-align":"left","font-size":Math.floor(o.font.sizeInPoints*g)+"pt"});$(t).on("click",function(v){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,n.formField.fullyQualifiedName,{formField:n.formField});var i=n.field.selectedItemIndices.length;var w=(i>0)?n.field.selectedItemIndices[i-1]:-1;n.updateSelectedItem(u);$(n.listBoxContainer).toggle();if(w!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}v.stopPropagation()});q=o.displayValues[u];$(t).text(q);if(o.selectedItemIndices[0]==u){$(r.editBox).val(q)}$(r.listBoxContainer).append(t);$(t).hover(function(){n.highlightItem(u,n.listItemHoverBackgroundColor,"transparent")})};var r=this;var q;for(var k=0;k<o.displayValues.length;++k){f(k)}}if(this.field.isEditable&&this.field.fieldValue!=""){$(this.editBox).val(this.field.fieldValue)}};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.focusControl).focus();if(f&&this.field.isEditable){$(this.focusControl).select()}};c.prototype.OnWidgetSelectionChanged=function(f,e){if(this.field.isHidden){return}if((f!=null&&f.getField()!=this.field)||(f==null)){$(this.listBoxContainer).css({display:"none"})}};c.prototype.reset=function(){if(this.field.isHidden){return}if(this.field.isEditable){this.setValue(this.field.defaultValue)}else{if(this.field.defaultSelectedItemIndices!=null){this.setSelectedItemIndices(this.field.defaultSelectedItemIndices)}}};c.prototype.getKeyValuePair=function(f,g){if(f===void 0){f=false}if(g===void 0){g=false}var e=true;if(this.field.isNoExport&&!g){return null}if(g){e=true}else{if(!f){e=false}}var i=this.field.fullyQualifiedFieldName;if(!g){i=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){i=this.field.fieldMappingName}}var h=this.getValueAsString();if(e||(!e&&(h!=""))){return new b.FieldKeyValuePair(i,h)}return null};c.prototype.getValueAsString=function(){var h="";if(this.field.selectedItemIndices.length>0){for(var f=0;f<this.field.selectedItemIndices.length;f++){var e=this.field.selectedItemIndices[f];if(e>=0){if(h!=""){h+=","}if(this.field.exportValues!=null&&this.field.exportValues[e]!=null){var g=this.escapeComma(this.field.exportValues[e]);h+=g}else{if(this.field.displayValues!=null&&this.field.displayValues[e]!=null){var g=this.escapeComma(this.field.displayValues[e])}h+=g}}}}else{h=this.field.fieldValue}return h};c.prototype.setValueAsString=function(f){var e=this.valueToSelectedIndices(f,this.field.exportValues,this.field.displayValues);if(e.length>0){this.setSelectedItemIndices(e)}else{this.setValue(f)}};c.prototype.highlightItem=function(g,j,h){for(var f=0;f<this.field.displayValues.length;++f){var e=$(this.listBoxContainer).children(":nth-child("+(f+1)+")");if(e==null){continue}if(g==f){$(e).css({"background-color":j})}else{if(h!=null){$(e).css({"background-color":h})}}}};c.prototype.setSelectedItemIndices=function(e){this.updateSelectedItem(e[0])};c.prototype.setValue=function(f){this.field.fieldValue=f;this.formField.value=f;this.field.selectedItemIndices.length=0;var e=this.field.displayValues.indexOf(f);if(e>-1){this.field.selectedItemIndices.push(e)}this.formField.selectedItemIndices=this.field.selectedItemIndices;$(this.editBox).val(f);this.formsModule.setDirtyFlag(true)};c.prototype.updateSelectedItem=function(e){var f=this.field.displayValues[e];this.formsModule.setDirtyFlag(true);this.formsModule.OnWidgetSelectionChanged(this,this.pageNumber);$(this.editBox).val(f);this.field.selectedItemIndices.length=0;this.field.selectedItemIndices.push(e);this.formField.selectedItemIndices=this.field.selectedItemIndices;this.formField.value=this.field.fieldValue};return c}(b.FormWidget));b.FormComboBoxWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.fdContainer=null}c.prototype.render=function(){var h=this;if(this.field.isHidden){return}d.prototype.render.call(this);var k=this.field;var f=this.zoomFactor;var e=(k.rectangle.width)*f;var l=(k.rectangle.height)*f;var g=k.rectangle.left*f;var j=k.rectangle.top*f;this.fdContainer=document.createElement("div");this.focusControl=this.fdContainer;this.resCV=document.createElement("canvas");$(this.fdContainer).attr({"class":"git_formField",tabindex:this.tabIndex});$(this.fdContainer).css({position:"absolute","float":"top",left:g,top:j,width:e,height:l,"z-index":"20",display:"block","background-color":(k.isReadonly)?this.fieldReadOnlyColor:this.fieldHighlightColor,padding:0,margin:0,color:"black",cursor:"default",outline:this.borderWidth*f+"px solid "+this.borderColor});$(this.focusControl).focusin(function(){h.formsModule.OnWidgetSelectionChanged(h,h.pageNumber);$(h.fdContainer).css({"background-color":h.fieldFocusColor});h.formsModule.focusGained(h);if(!h.suppressInFocusEvent){h.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,h.formField.fullyQualifiedName,{formField:h.formField})}h.suppressInFocusEvent=false});$(this.focusControl).focusout(function(){h.formsModule.focusOut(h.container);h.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,h.formField.fullyQualifiedName,{formField:h.formField})});$(this.fdContainer).keypress(function(o){if(!h.field.isReadonly){var n=o.keyCode?o.keyCode:o.which;if(n==13||n==32){h.toggleState();o.preventDefault()}}});var m=document.createElement("div");$(m).css({position:"absolute",left:0,top:0,width:e,height:l,display:"block",overflow:"hidden"});$(this.fdContainer).append(m);$(this.container).append(this.fdContainer);var i=Math.min(e,l);$(this.resCV).addClass("git_check_canvas");this.resCV.width=e;this.resCV.height=l;$(this.resCV).css({position:"absolute","float":"top",left:0,top:0,padding:"0","z-index":"2021",display:"none"});if(k.isChecked){$(this.resCV).css({display:"block"})}this.drawTick(e,l,this.resCV);$(m).append(this.resCV);$(this.fdContainer).on("click",function(n){h.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,h.formField.fullyQualifiedName,{formField:h.formField});if(!h.field.isReadonly){h.toggleState()}h.formsModule.focusGained(h);n.preventDefault();n.stopPropagation()});if(k.alternateName!=null&&k.alternateName!=""){$(m).attr({title:k.alternateName})}};c.prototype.getValueAsString=function(){if(!this.field.isChecked){return"Off"}if(this.field.exportValue!=null){return this.field.exportValue}return this.field.fieldName};c.prototype.setValueAsString=function(f){var e=(this.field.exportValue!=null&&this.field.exportValue==f);if(!e){e=(this.field.fieldName==f)}this.setChecked(e)};c.prototype.getKeyValuePair=function(e,f){if(e===void 0){e=false}if(f===void 0){f=false}if(this.field.isNoExport&&!f){return null}if(!f&&!this.field.isChecked){return null}var g=this.field.fullyQualifiedFieldName;var h=this.getValueAsString();if(!f){g=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){g=this.field.fieldMappingName}}return new b.FieldKeyValuePair(g,h)};c.prototype.reset=function(){if(this.field.isHidden){return}this.field.fieldValue=this.field.defaultValue;if(this.field.defaultValue==null||this.field.defaultValue.trim()==""||this.field.defaultValue.toUpperCase()=="FALSE"||this.field.defaultValue.toUpperCase()=="OFF"){this.setChecked(false)}else{this.setChecked(true)}};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.focusControl).focus()};c.prototype.OnWidgetSelectionChanged=function(f,e){if(this.field.isHidden){return}if((f!=null&&f.getField()!=this.field)||(f==null)){$(this.fdContainer).css({"background-color":(this.field.isReadonly)?this.fieldReadOnlyColor:this.fieldHighlightColor})}};c.prototype.setChecked=function(e){if(this.field.isChecked==e){return}var f=$(this.resCV);if(e){f.css({display:"block"});this.field.isChecked=true;this.formField.isChecked=true}else{f.css({display:"none"});this.field.isChecked=false;this.formField.isChecked=false}this.formsModule.setDirtyFlag(true);this.formsModule.updateOtherFields(this)};c.prototype.toggleState=function(){this.setChecked(!this.field.isChecked);this.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,this.formField.fullyQualifiedName,{formField:this.formField});this.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})};return c}(b.FormWidget));b.FormCheckBoxWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.focusControl=null;this.radioGroupContainer=null}c.prototype.render=function(){var n=this;if(this.field.isHidden){return}d.prototype.render.call(this);var p=this.field;var r=1;var h=this.viewerManager.zoomfactor*r;var m=p.radioItems[this.field.selectedItemIndex];this.formField.selectedRadioButtonIndex=this.field.selectedItemIndex;this.radioGroupContainer=document.createElement("div");$(this.radioGroupContainer).css({position:"absolute",top:"0px",left:"0px","z-index":"20"});$(this.container).append(this.radioGroupContainer);if(p.alternateName!=null&&p.alternateName!=""){$(this.radioGroupContainer).attr({title:p.alternateName})}var f=function(w){v=p.radioItems[w];o=p.radioItems[w].rectangle.top*h;k=p.radioItems[w].rectangle.left*h;g=p.radioItems[w].rectangle.width*h;t=p.radioItems[w].rectangle.height*h;j=p.radioItems[w].borderColor;e=p.radioItems[w].borderWidth;if(j==null){j="#FFFFFF"}if(p.isRequired&&!p.isReadonly){j="#FF0000";if(e<1){e=1}}e=e*h;if(v.pageNumber==s.pageNumber){var x=document.createElement("div");$(x).attr({"class":"git_formField",tabindex:s.tabIndex,"data-index":w});$(x).css({position:"absolute","float":"top",top:o,left:k,width:g,height:t,"z-index":"20",display:"block","background-color":(p.isReadonly)?s.fieldReadOnlyColor:s.fieldHighlightColor,color:"black",cursor:"default",outline:e+"px solid "+j});$(x).focusin(function(){$(x).css({"background-color":n.fieldFocusColor});n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);n.formsModule.focusGained(n,w);if(!n.suppressInFocusEvent){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,n.formField.fullyQualifiedName,{formField:n.formField})}n.suppressInFocusEvent=false});$(x).focusout(function(){$(x).css({"background-color":(p.isReadonly)?n.fieldReadOnlyColor:n.fieldHighlightColor});n.formsModule.focusOut(n.container);n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,n.formField.fullyQualifiedName,{formField:n.formField})});$(x).keydown(function(z){if((z.keyCode==13||z.keyCode==32)&&!n.field.isReadonly){var y=n.setSelectedRadioButton(w);if(y||!n.field.isRadioNoToggleToOff){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}z.preventDefault()}else{if(z.keyCode==37){if(w>0){var A=$(n.radioGroupContainer).children("div:nth-child("+w+")");$(A).focus()}}else{if(z.keyCode==39){if(w<p.radioItems.length-1){var i=$(n.radioGroupContainer).children("div:nth-child("+(w+2)+")");$(i).focus()}}}}});$(x).on("click",function(y){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,n.formField.fullyQualifiedName,{formField:n.formField});if(!n.field.isReadonly){n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);var i=n.setSelectedRadioButton(w);if(i||!n.field.isRadioNoToggleToOff){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}y.stopPropagation()});q=false;if(p.selectedItemIndex==w||(p.isRadioInUnison&&(v.exportValue==m.exportValue))){s.focusControl=x;q=true}u=document.createElement("canvas");$(u).addClass("git_radio_canvas_tick");u.width=g;u.height=t;$(u).css({position:"absolute","float":"top",left:0,top:0,padding:"0","z-index":"2022",display:q?"block":"none"});if(p.isSimulated){s.drawTick(g,t,u)}else{$(x).css({"border-radius":"50%"});s.drawCircle(g,t,h,u)}if(w==0||q){s.focusControl=x}$(x).append(u);$(s.radioGroupContainer).append(x)}};var s=this;var v,o,k,g,t,j,e,q,u;for(var l=0;l<p.radioItems.length;l++){f(l)}};c.prototype.setSelectedRadioButton=function(h,q){if(q===void 0){q=false}if(h<0&&!this.field.isRadioNoToggleToOff){$(this.radioGroupContainer).find("canvas.git_radio_canvas_tick").css({display:"none"});this.field.selectedItemIndex=this.formField.selectedRadioButtonIndex=-1;this.formsModule.setDirtyFlag(true);return true}var v=$(this.radioGroupContainer).find("[data-index="+h+"]");if(v.length<1){return false}if(!q&&this.field.isRadioNoToggleToOff&&h==this.field.selectedItemIndex){return false}this.formsModule.setDirtyFlag(true);for(var m=0;m<this.field.radioItems.length;m++){if(this.pageNumber!=this.field.radioItems[m].pageNumber){var s=this.formsModule.formWidgets[this.field.radioItems[m].pageNumber];for(var l=0;l<s.length;l++){var p=s[l];var e=p.getFieldName();if(this.fieldName==e){$(p.radioGroupContainer).find("canvas.git_radio_canvas_tick").css({display:"none"});var u=p.getField();u.selectedItemIndex=h}}}}$(this.radioGroupContainer).find("canvas.git_radio_canvas_tick").css({display:"none"});var f=this.field.radioItems[h];if(!this.field.isRadioNoToggleToOff&&h==this.field.selectedItemIndex){this.field.selectedItemIndex=this.formField.selectedRadioButtonIndex=-1;return true}v.find("canvas.git_radio_canvas_tick").css({display:"block"});if(this.field.isRadioInUnison){for(var o=0;o<this.field.radioItems.length;++o){var t=this.field.radioItems[o];if(o!=h&&t.exportValue==f.exportValue){var g=o+1;var r=$(this.radioGroupContainer).children("div:nth-child("+g+")");r.find("canvas.git_radio_canvas_tick").css({display:"block"});this.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,t.fullyQualifiedFieldName,{formField:this.formField})}}}this.field.selectedItemIndex=this.formField.selectedRadioButtonIndex=h;return true};c.prototype.reset=function(){if(this.field.isHidden){return}if(this.field.defaultSelectedItemIndex!=null){this.setSelectedRadioButton(this.field.defaultSelectedItemIndex)}this.field.fieldValue=this.field.defaultValue};c.prototype.getKeyValuePair=function(e,f){if(e===void 0){e=false}if(f===void 0){f=false}var h=this.field.selectedItemIndex;if(this.field.isNoExport&&!f){return null}if(!f&&h==-1){return null}var g=this;if(h>=0){var j=this.field.radioItems[h].fullyQualifiedFieldName;if(!f){j=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){j=this.field.fieldMappingName}}var k=this.field.fieldName;if(this.field.radioItems[h].exportValue!=null&&this.field.radioItems[h].exportValue!=""){k=this.field.radioItems[h].exportValue}return new b.FieldKeyValuePair(j,k)}return null};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}if(this.focusControl!=null){this.suppressInFocusEvent=e;$(this.focusControl).focus()}};c.prototype.setValueAsString=function(h){var f=-1;var g=this.formField;for(var e=0;e<g.radioButtons.length;++e){if(g.radioButtons[e].exportValue==h){f=e;break}}if(f==-1){for(var e=0;e<g.radioButtons.length;++e){if(g.radioButtons[e].fullyQualifiedName==h){f=e;break}}}if(f!=-1){this.setSelectedRadioButton(f)}};c.prototype.getValueAsString=function(){var f="";var e=this.field.selectedItemIndex;if(e>=0){f=this.field.radioItems[e].fieldName}return f};return c}(b.FormWidget));b.FormRadioGroupWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.fdBtn=null}c.prototype.render=function(){var g=this;if(this.field.isHidden){return}d.prototype.render.call(this);var f=this.field;var e=this.zoomFactor;this.fdBtn=document.createElement("button");$(this.fdBtn).attr({"class":"git_formField_pushButton"});$(this.fdBtn).css({position:"absolute",left:f.rectangle.left*e,top:f.rectangle.top*e,width:f.rectangle.width*e,height:f.rectangle.height*e,display:"block",color:f.fontColor,"background-color":f.backgroundColor,"z-index":"20",margin:"0px",padding:"0px","font-family":f.font.fallbackFontName,"font-size":Math.floor(f.font.sizeInPoints*e)+"pt",cursor:"pointer","border-width ":f.borderWidth*e+"px","border-style":"outset","border-color":f.borderColor,overflow:"hidden"});if(f.isReadonly){$(this.fdBtn).attr({disabled:"disabled"});$(this.fdBtn).css({cursor:"normal"})}if(f.alternateName!=null&&f.alternateName!=""){$(this.fdBtn).attr({title:f.alternateName})}$(this.fdBtn).text(f.normalCaption);$(this.fdBtn).hover(function(){if(g.field.rolloverCaption!=null&&g.field.rolloverCaption!=""){$(g.fdBtn).text(g.field.rolloverCaption)}return false},function(){if(g.field.normalCaption!=null&&g.field.normalCaption!=""){$(g.fdBtn).text(g.field.normalCaption)}return false});$(this.fdBtn).mousedown(function(){$(g.fdBtn).focus();if(g.field.downCaption!=null&&g.field.downCaption!=""){$(g.fdBtn).text(g.field.downCaption)}return false});$(this.fdBtn).mouseup(function(){$(g.fdBtn).text(g.field.normalCaption);return false});$(this.fdBtn).focusin(function(){g.formsModule.OnWidgetSelectionChanged(g,g.pageNumber);if(!g.field.isReadonly){g.formsModule.focusGained(g)}if(!g.suppressInFocusEvent){g.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,g.formField.fullyQualifiedName,{formField:g.formField})}g.suppressInFocusEvent=false;return false});$(this.fdBtn).focusout(function(){g.formsModule.focusOut(g.container);g.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,g.formField.fullyQualifiedName,{formField:g.formField});return false});$(this.fdBtn).click(function(){g.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,g.formField.fullyQualifiedName,{formField:g.formField});g.performAction();return false});$(this.container).append(this.fdBtn)};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.fdBtn).focus()};c.prototype.appendDataforPost=function(e){};c.prototype.getDataforSubmit=function(){return""};c.prototype.getValueAsString=function(){return""};c.prototype.setValueAsString=function(e){};c.prototype.getKeyValuePair=function(e,f){if(e===void 0){e=false}if(f===void 0){f=false}return null};c.prototype.performAction=function(){var i=this.field;if(i.actionType==0){var l=null;var f=true;if(i.resetActionFieldsInclude!=null){f=i.resetActionFieldsInclude}if(i.resetActionFields!=null){l=i.resetActionFields}this.formsModule.resetFields(l,f)}else{if(i.actionType==1){var g=i.submitActionFields;var f=i.submitActionFieldsInclude||true;var e=i.includeNoValueFields||true;var k=(i.submitActionType==2)?b.SubmitMethod.POST:b.SubmitMethod.GET;var j=this.formsModule.submitForm(i.submitUrl,k,g,f,e);if(j!=null){j.done(function(){this.viewerManager.events.dispatchAllFormEvents(b.EventNames.afterFormSubmit,null,{viewerManager:this.viewerManager,documentUri:i.submitUrl})})}}else{if(i.actionType==2){var h=i.customActionScript;if(h!=null&&h.length>0){this.formsModule.executeJavaScript(h)}}}}};return c}(b.FormWidget));b.FormPushButtonWidget=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(c){__extends(d,c);function d(){c.apply(this,arguments);this.listBoxContainer=null;this.listBoxContainerScrollPane=null;this.cntrlIsPressed=false;this.currentSelectedIndex=-1}d.prototype.render=function(){var l=this;if(this.field.isHidden){return}c.prototype.render.call(this);var k=this.field;var h=this.zoomFactor;this.listBoxContainer=document.createElement("div");this.formField.selectedItemIndices=k.selectedItemIndices;this.focusControl=this.listBoxContainer;$(this.listBoxContainer).attr({"class":"git_formField",tabindex:this.tabIndex});$(this.listBoxContainer).css({position:"absolute","float":"top",left:(k.rectangle.left)*h,top:(k.rectangle.top)*h,width:k.rectangle.width*h,height:k.rectangle.height*h,"z-index":"20",display:"block","background-color":(k.isReadonly)?this.fieldReadOnlyColor:this.fieldHighlightColor,color:k.fontColor,outline:this.borderWidth*h+"px solid "+this.borderColor});$(this.listBoxContainer).focusin(function(){l.formsModule.OnWidgetSelectionChanged(l,l.pageNumber);$(l.listBoxContainer).css({"background-color":l.fieldFocusColor});l.formsModule.focusGained(l);if(!l.suppressInFocusEvent){l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,l.formField.fullyQualifiedName,{formField:l.formField})}l.suppressInFocusEvent=false});$(this.listBoxContainer).focusout(function(){$(l.listBoxContainer).css({"background-color":(k.isReadonly)?l.fieldReadOnlyColor:l.fieldHighlightColor});l.formsModule.focusOut(l.container);l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,l.formField.fullyQualifiedName,{formField:l.formField})});$(this.listBoxContainer).keydown(function(i){if(l.field.isReadonly){return}if(i.keyCode==17){l.cntrlIsPressed=true}else{if(i.keyCode==40){if(l.currentSelectedIndex<k.displayValues.length-1){l.addToSelectedIndiciesAndHighlight(l.currentSelectedIndex+1);l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,l.formField.fullyQualifiedName,{formField:l.formField});l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}else{if(l.currentSelectedIndex==-1){l.addToSelectedIndiciesAndHighlight(0);l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,l.formField.fullyQualifiedName,{formField:l.formField});l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}i.preventDefault()}else{if(i.keyCode==38){if(l.currentSelectedIndex>0){l.addToSelectedIndiciesAndHighlight(l.currentSelectedIndex-1);l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,l.formField.fullyQualifiedName,{formField:l.formField});l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}else{if(l.currentSelectedIndex==-1){l.addToSelectedIndiciesAndHighlight(0);l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,l.formField.fullyQualifiedName,{formField:l.formField});l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}i.preventDefault()}}}});$(this.listBoxContainer).keyup(function(i){if(i.keyCode==17){l.cntrlIsPressed=false}});if(k.alternateName!=null&&k.alternateName!=""){$(this.listBoxContainer).attr({title:k.alternateName})}$(this.container).append(this.listBoxContainer);this.listBoxContainerScrollPane=document.createElement("div");$(this.listBoxContainerScrollPane).css({position:"absolute","float":"top",left:0,top:0,width:"100%",height:"100%","z-index":"2",display:"block",overflow:"auto",cursor:"default","background-color":"transparent"});if(k.displayValues!=null){var j=function(m){e=document.createElement("div");$(e).attr({"class":"git_listChild"});$(e).css({width:"100%","white-space":"pre","z-index":"10",overflow:"hidden",display:"block","text-align":"left","background-color":"transparent","font-size":Math.floor(k.font.sizeInPoints*h)+"pt"});$(e).text(k.displayValues[m]);$(g.listBoxContainerScrollPane).append(e);$(e).on("click",function(i){l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,l.formField.fullyQualifiedName,{formField:l.formField});if(!l.field.isReadonly){l.addToSelectedIndiciesAndHighlight(m);l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,l.formField.fullyQualifiedName,{formField:l.formField});l.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}i.stopPropagation()})};var g=this;var e;for(var f=0;f<k.displayValues.length;f++){j(f)}}this.highlightSelectedItems();$(this.listBoxContainer).append(this.listBoxContainerScrollPane)};d.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.focusControl).focus()};d.prototype.reset=function(){if(this.field.isHidden){return}if(this.field.defaultSelectedItemIndices!=null){this.setSelectedItemIndices(this.field.defaultSelectedItemIndices)}this.field.fieldValue=this.field.defaultValue};d.prototype.getKeyValuePair=function(h,i){if(h===void 0){h=false}if(i===void 0){i=false}var g=true;if(this.field.isNoExport&&!i){return null}if(i){g=true}else{if(!h){g=false}}var f=this;var j=this.field.fullyQualifiedFieldName;if(!i){j=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){j=this.field.fieldMappingName}}var e=f.getValueAsString();if(g||(!g&&(e!=""))){return new a.FieldKeyValuePair(j,e)}return null};d.prototype.setSelectedItemIndices=function(e){this.field.selectedItemIndices=e;this.formField.selectedItemIndices=e;this.highlightSelectedItems();this.formsModule.setDirtyFlag(true)};d.prototype.getValueAsString=function(){var h="";for(var f=0;f<this.field.selectedItemIndices.length;f++){var e=this.field.selectedItemIndices[f];if(e>=0){if(h!=""){h+=","}if(this.field.exportValues!=null&&this.field.exportValues[e]!=null){var g=this.escapeComma(this.field.exportValues[e]);h+=g}else{var g=this.escapeComma(this.field.displayValues[e]);h+=g}}}return h};d.prototype.setValueAsString=function(f){var e=this.valueToSelectedIndices(f,this.field.exportValues,this.field.displayValues);this.setSelectedItemIndices(e)};d.prototype.highlightSelectedItems=function(){var g=this.field.selectedItemIndices;$(this.listBoxContainer).find(".git_listChild").css({"background-color":"transparent"});for(var e=0;e<g.length;++e){var f=$(this.listBoxContainerScrollPane).children(":nth-child("+(g[e]+1)+")");f.css({"background-color":this.listItemHoverBackgroundColor})}};d.prototype.addToSelectedIndiciesAndHighlight=function(e){if(e<0||e>=this.field.displayValues.length){return}this.formsModule.setDirtyFlag(true);this.formsModule.OnWidgetSelectionChanged(this,this.pageNumber);if(!this.cntrlIsPressed||!this.field.isMultiselect){this.field.selectedItemIndices.length=0;this.field.selectedItemIndices.push(e);this.currentSelectedIndex=e}else{if(this.field.isMultiselect){this.currentSelectedIndex=e;var l=this.field.selectedItemIndices.indexOf(e);if(l!=-1){this.field.selectedItemIndices.splice(l,1);if(this.field.selectedItemIndices.length<1){this.currentSelectedIndex=-1}}else{this.field.selectedItemIndices.push(e)}}}this.formField.selectedItemIndices=this.field.selectedItemIndices;var g=e+1;var h=$(this.listBoxContainerScrollPane).children(":nth-child("+g+")");var i=h.position().top;var j=$(this.listBoxContainerScrollPane).scrollTop();if(i<0){$(this.listBoxContainerScrollPane).scrollTop(j-Math.abs(i))}var m=i+j;var f=m+h.height();var k=f-(j+$(this.listBoxContainer).height());if(k>0){$(this.listBoxContainerScrollPane).scrollTop(j+k)}this.highlightSelectedItems()};return d}(a.FormWidget));a.FormListBoxWidget=b})(gnostice||(gnostice={}));var gnostice;(function(c){var a=(function(){function f(){this.zoomFactor=1;this.rotationAngle=0}return f}());var b;(function(f){f[f.None=0]="None";f[f.Accepted=1]="Accepted";f[f.Rejected=2]="Rejected";f[f.Cancelled=3]="Cancelled";f[f.Completed=4]="Completed"})(b||(b={}));var e;(function(f){f[f.File_Attachment=1]="File_Attachment";f[f.Free_Text=2]="Free_Text";f[f.Ink=4]="Ink";f[f.Line=8]="Line";f[f.Markup=16]="Markup";f[f.Polyline=32]="Polyline";f[f.Polygon=64]="Polygon";f[f.Popup=128]="Popup";f[f.Stamp=256]="Stamp";f[f.Text=512]="Text";f[f.Link=1024]="Link";f[f.Caret=2048]="Caret";f[f.Square=4096]="Square";f[f.Circle=8192]="Circle";f[f.Widget=16384]="Widget";f[f.Watermark=32768]="Watermark";f[f.All=1073741823]="All"})(e||(e={}));var d=(function(f){__extends(g,f);function g(){var h=this;f.call(this);this.description="AnnotsModule";this.allowCommenting=true;this.annotsData=new Array();this.annotsWidgets=new Array();this.fdViewState=new Array();this.fdRenderingState=new Array();this.documentContainsAnnots=true;this.documentSupportAnnots=false;this.containsNewAnnots=false;this.isDraggingStarted=false;this.focusRectLeft=null;this.focusRectTop=null;this.focusRectRight=null;this.focusRectBottom=null;this.lastFocusRectContainer=null;this.focusRectLeftOnHover=null;this.focusRectTopOnHover=null;this.focusRectRightOnHover=null;this.focusRectBottomOnHover=null;this.lastFocusRectContainerOnHover=null;this.lastFocusedAnnotWidget=null;this.contextMenu=null;this.isDirty=false;this.popupPaneOldWIdth=15;this.isCollapsedControl=false;this.deletedAnnoteWidgetsStack=new Array();this.onAfterSave=function(k,j){h.resetModule();if(j.IsDirty){for(var i=1;i<=k.pageCount;i++){h.clearAnnots(i);h.fdRenderingState[i]=false}h.annotsData=new Array();h.fdViewState=new Array();h.fdRenderingState=new Array();for(var i=1;i<=k.pageCount;i++){h.annotsData[i]=j.ServerDocumentChanges.updatedAnnots[i-1];h.fdViewState[i]=new a();h.fdViewState[i].rotationAngle=h.viewerManager.rotationAngle;h.fdViewState[i].zoomFactor=h.viewerManager.zoomfactor;h.fdRenderingState[i]=false;h.renderAnnots(j.ServerDocumentChanges.updatedAnnots[i-1],i)}}};this.onBeforeSave=function(o){if(!h.documentContainsAnnots&&!h.allowCommenting){return}h.deletedAnnoteWidgetsStack.length=0;var k=new Array();for(var j=1;j<=h.viewerManager.pageCount;j++){var q=h.annotsData[j];var n=h.annotsWidgets[j];if(n!=null){for(var l=0;l<n.length;l++){var p=n[l];var m=p.getKeyValPair();if(m!=null){k.push(m)}}}}h.isDirty=false;if(k.length>0){return{module:"annotations",value:k}}return null};this.onAfterDocumentLoad=function(i){h.resetModule()};this.onDocumentInfoRetrived=function(i){h.documentContainsAnnots=false;h.documentSupportAnnots=false;if(i.mimeType==c.MimeTypes.PDF&&i.containsAnnots==true){h.documentContainsAnnots=true}if(i.mimeType==c.MimeTypes.PDF){h.documentSupportAnnots=true}h.allowCommenting=i.allowCommenting;h.resetModule();if(h.documentContainsAnnots||h.allowCommenting){h.focusRectLeft=document.createElement("div");$(h.focusRectLeft).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-left "});$(h.focusRectLeft).css({display:"none"});h.focusRectTop=document.createElement("div");$(h.focusRectTop).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-top"});$(h.focusRectTop).css({display:"none"});h.focusRectRight=document.createElement("div");$(h.focusRectRight).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-right"});$(h.focusRectRight).css({display:"none"});h.focusRectBottom=document.createElement("div");$(h.focusRectBottom).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-bottom"});$(h.focusRectBottom).css({display:"none"});h.focusRectLeftOnHover=document.createElement("div");$(h.focusRectLeftOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-left"});$(h.focusRectLeftOnHover).css({display:"none"});h.focusRectTopOnHover=document.createElement("div");$(h.focusRectTopOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-top"});$(h.focusRectTopOnHover).css({display:"none"});h.focusRectRightOnHover=document.createElement("div");$(h.focusRectRightOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-right"});$(h.focusRectRightOnHover).css({display:"none"});h.focusRectBottomOnHover=document.createElement("div");$(h.focusRectBottomOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-bottom"});$(h.focusRectBottomOnHover).css({display:"none"})}};this.onPageCreated=function(i){if(!h.documentContainsAnnots&&!h.allowCommenting){return}h.focusGained(h.lastFocusedAnnotWidget);h.hoverOut()};this.onPageRendered=function(j){if(!h.documentContainsAnnots&&!h.allowCommenting){return}var i=$("#"+h.viewerManager.documentid+j.pageNumber);h.createAnnotParentContainerAndAddRightClickMenu($(i).get(0));var k=h.viewerManager.documentUri;if(h.annotsData[j.pageNumber]==null){h.serverCom.getPageAnnots(k,j.pageNumber).done(function(l){h.annotsData[j.pageNumber]=l;h.fdViewState[j.pageNumber]=new a();h.fdViewState[j.pageNumber].rotationAngle=h.viewerManager.rotationAngle;h.fdViewState[j.pageNumber].zoomFactor=h.viewerManager.zoomfactor;h.fdRenderingState[j.pageNumber]=false;h.renderAnnots(l,j.pageNumber)})}else{h.renderAnnots(h.annotsData[j.pageNumber],j.pageNumber)}};this.onPageReRendered=function(j){if(!h.documentContainsAnnots&&!h.allowCommenting){return}var i=$("#"+h.viewerManager.documentid+j.pageNumber);var k=h.createAnnotParentContainerAndAddRightClickMenu($(i).get(0));h.onPageRendered(j);h.hoverOut();h.focusOut();$(h.viewerManager.viewerDOM.viewableArea).find(".git_annots_popup").css({display:"none"});h.focusGained(h.lastFocusedAnnotWidget);if(h.lastFocusedAnnotWidget!=null&&h.lastFocusedAnnotWidget.isPopupOpen){h.lastFocusedAnnotWidget.showPopup()}};this.insertNewNoteAnnot=function(l,i,o){if(!h.allowCommenting){return}var k=h.getPageNumberFromParentPanelID(l);var m=h.guid();var n={title:h.viewerManager.preferences.userIdentity.name,subject:"",name:m,content:"",annotType:e.Text,rectangle:{left:Math.round(i/h.viewerManager.zoomfactor),top:Math.round(o/h.viewerManager.zoomfactor),width:24,height:24},isLocked:false,tag:m,time:new Date().toUTCString(),popupAnnot:{title:"",subject:"",content:"",annotType:e.Popup,rectangle:{left:Math.round(i/h.viewerManager.zoomfactor)+50,top:Math.round(o/h.viewerManager.zoomfactor),width:240,height:200},isLocked:false,comments:[]},isNew:true};var j=new c.NoteAnnotWidget(l,k,-1,n,null,h,h.viewerManager);j.render();if(h.annotsWidgets[k]==null){h.annotsWidgets[k]=new Array()}if(h.annotsData[k]==null){h.annotsData[k]=new Array()}h.annotsWidgets[k].push(j);h.annotsData[k].push(n);h.hideOtherPopups(j);h.focusGained(j);j.showPopup();h.containsNewAnnots=true};this.contextMenu=c.RightClickMenuManager.getRightClickMenuManager().getRightClickMenu()}g.prototype.initialize=function(h,j){var i=this;f.prototype.initialize.call(this,h,j);this.contextMenu.AddContextMenuItem("Add Sticky Note",this.insertNewNoteAnnot);$(h.viewerDOM.viewer).keydown(function(k){if(i.documentContainsAnnots||(i.allowCommenting&&i.documentSupportAnnots)){if(k.keyCode==46){if(i.lastFocusedAnnotWidget!=null){if(!i.lastFocusedAnnotWidget.isRightClickMenuOpen){i.lastFocusedAnnotWidget.deleteAnnotation()}}}}});$(h.viewerDOM.viewer).keydown(function(l){if(i.documentContainsAnnots||(i.allowCommenting&&i.documentSupportAnnots)){if(l.keyCode==90&&l.ctrlKey){if(i.deletedAnnoteWidgetsStack.length>0){var k=i.deletedAnnoteWidgetsStack.pop();k.annot.isDeleted=false;k.show()}}}})};g.prototype.hasPaneToolbar=function(){if(this.documentContainsAnnots||(this.allowCommenting&&this.documentSupportAnnots)){return true}return false};g.prototype.pushDeletedWidgetToUndoQueue=function(h){this.deletedAnnoteWidgetsStack.push(h)};g.prototype.createPaneToolbarView=function(){this.createAnnotationPopupPaneView();return this.popupPane};g.prototype.registerPaneEvents=function(i){var h=this;i.addEventListener("PaneToggle",function(j){if(j.isCollapsed){if(h.lastFocusedAnnotWidget!=null){if(h.lastFocusedAnnotWidget.isPopupOpen){h.lastFocusedAnnotWidget.hidePopup();h.isCollapsedControl=true}}}else{if(h.isCollapsedControl&&h.lastFocusedAnnotWidget!=null){h.lastFocusedAnnotWidget.showPopup();h.isCollapsedControl=false}}})};g.prototype.setDirtyFlag=function(h){this.isDirty=h};g.prototype.removeLastFocusRect=function(){if(this.lastFocusRectContainer!=null){$(this.lastFocusRectContainer).remove(".git_annot_hover");this.lastFocusRectContainer=null}};g.prototype.focusGained=function(h,s){if(s===void 0){s=true}if(h==null){return}this.removeLastFocusRect();var i=h.container;this.lastFocusRectContainer=i;var m=this.viewerManager.zoomfactor;var n=(h.annot.rectangle.left-2)*m;var p=(h.annot.rectangle.top-2)*m;var k=(h.annot.rectangle.width+2)*m;var t=(h.annot.rectangle.height+2)*m;if(h instanceof c.NoteAnnotWidget){k=(h.annot.rectangle.width+2);t=(h.annot.rectangle.height+2)}var l=this.focusRectLeft;var o=this.focusRectTop;var j=this.focusRectRight;var q=this.focusRectBottom;var r="blue";if(!s){if(this.isDraggingStarted){return}l=this.focusRectLeftOnHover;o=this.focusRectTopOnHover;j=this.focusRectRightOnHover;q=this.focusRectBottomOnHover;r="gray"}else{this.lastFocusedAnnotWidget=h}$(l).css({left:n,top:p,height:t,display:"block","border-color":"white white white "+r});$(o).css({left:n,top:p,width:k,display:"block","border-color":r+" white white"});$(j).css({left:n+k,top:p+1,height:t+1,display:"block","border-color":"white "+r+" white white"});$(q).css({left:n+1,top:p+t,width:k+1,display:"block","border-color":"white white "+r});$(i).append(l);$(i).append(o);$(i).append(j);$(i).append(q)};g.prototype.focusOut=function(){$(".git_annot_focus").remove();if(this.lastFocusedAnnotWidget!=null){this.focusGained(this.lastFocusedAnnotWidget,true)}};g.prototype.hoverOut=function(){$(".git_annot_hover").remove()};g.prototype.hideOtherPopups=function(h){for(var l=1;l<=this.viewerManager.pageCount;l++){var k=this.annotsWidgets[l];if(k!=null){for(var j=0;j<k.length;j++){if(k[j]!=h&&k[j].isPopupOpen){k[j].hidePopup()}}}}};g.prototype.applyLocalization=function(){$(this.headerText).text(c.LocalizedStrings.nav_pane_no_comments)};g.prototype.getPageNumberFromParentPanelID=function(i){var h=1;var j=$(i).attr("id");h=parseInt(j.replace(this.viewerManager.documentid+"annots_panel",""));return h};g.prototype.addRightClickContextMenu=function(h){var i=this;if(!this.allowCommenting){return}$(h).mouseup(function(j){if(j.button==2){if($(j.target).hasClass("git-annots-panel")){j.preventDefault();i.contextMenu.show(h,j.pageX-$(h).offset().left,j.pageY-$(h).offset().top,i)}}else{c.RightClickMenuManager.getRightClickMenuManager().closeAllRightClickMenus()}});$(h).click(function(j){if($(j.target).hasClass("git-rightclick-menu")||$(j.target).hasClass("git-rightclick-menu-item")){return}if(i.lastFocusedAnnotWidget!=null){i.lastFocusedAnnotWidget.hidePopup()}i.lastFocusedAnnotWidget=null;i.isCollapsedControl=false;i.focusOut()})};g.prototype.mapOldWidgetToNewlyAddedWidgets=function(j){for(var h=0;h<this.deletedAnnoteWidgetsStack.length;h++){if(this.deletedAnnoteWidgetsStack[h].annot.name==j.annot.name){this.deletedAnnoteWidgetsStack[h]=j}}};g.prototype.renderAnnots=function(l,p){if(this.viewerManager.rotationAngle!=0){this.clearAnnots(p);this.fdRenderingState[p]=false;return}var r=this.viewerManager.documentid;var j=$("#"+r+p);if(this.fdViewState[p]!=null){if((this.fdRenderingState[p]==true)&&(this.fdViewState[p].rotationAngle==this.viewerManager.rotationAngle)&&(this.fdViewState[p].zoomFactor==this.viewerManager.zoomfactor)){return}}this.clearAnnots(p);this.fdViewState[p].rotationAngle=this.viewerManager.rotationAngle;this.fdViewState[p].zoomFactor=this.viewerManager.zoomfactor;this.fdRenderingState[p]=true;if(this.annotsWidgets[p]!=null){this.annotsWidgets[p].length=0}var o=new Array();this.annotsWidgets[p]=o;var n=this.createAnnotParentContainerAndAddRightClickMenu($(j)[0]);for(var m=0;m<l.length;m++){var k=l[m];if(k.isDirty==null){k.isDirty=false}var h=null;switch(k.annotType){case e.Text:h=new c.NoteAnnotWidget(n,p,-1,k,null,this,this.viewerManager);break;case e.Line:h=new c.LineAnnotWidget(n,p,-1,k,null,this,this.viewerManager);break;case e.Circle:h=new c.CircleAnnotWidget(n,p,-1,k,null,this,this.viewerManager);break;case e.Polyline:h=new c.PolyLineAnnotWidget(n,p,-1,k,null,this,this.viewerManager);break;case e.Polygon:h=new c.PolygonAnnotWidget(n,p,-1,k,null,this,this.viewerManager);break;case e.Square:h=new c.SquareAnnotWidget(n,p,-1,k,null,this,this.viewerManager);break;case e.Link:h=new c.LinkAnnotWidget(n,p,-1,k,null,this,this.viewerManager)}h.render();if(k.isDeleted){h.hide()}o.push(h);if(this.lastFocusedAnnotWidget!=null&&this.lastFocusedAnnotWidget.annot.name==k.name){var q=this.lastFocusedAnnotWidget;this.lastFocusedAnnotWidget=h;this.lastFocusedAnnotWidget.isPopupOpen=q.isPopupOpen}this.mapOldWidgetToNewlyAddedWidgets(h)}};g.prototype.createAnnotParentContainerAndAddRightClickMenu=function(i){var k=i.getElementsByClassName("git-annots-panel")[0];if(k!=null){return k}var j=$(i).attr("id");var h=parseInt(j.replace(this.viewerManager.documentid,""));k=document.createElement("div");$(k).addClass("git-annots-panel");$(k).attr("id",this.viewerManager.documentid+"annots_panel"+h);$(i).append(k);$(k).attr({oncontextmenu:"return false;"});this.addRightClickContextMenu(k);return k};g.prototype.clearAnnots=function(i){var j=this.viewerManager.documentid;var h=$("#"+j+i);$(h).find(".git-annots-panel").remove();$(h).find(".git_annots").remove();$(this.popupPaneContent).find(".git_annots"+i).remove();this.focusOut()};g.prototype.resetModule=function(){this.fdViewState.length=0;this.annotsData.length=0;this.fdRenderingState.length=0;this.annotsWidgets.length=0;this.containsNewAnnots=false;this.deletedAnnoteWidgetsStack.length=0};g.prototype.createAnnotationPopupPaneView=function(){this.popupPane=document.createElement("div");$(this.popupPane).attr("id","popupPaneContent");$(this.popupPane).addClass("git_side_pane_element");$(this.popupPane).css({width:"calc(100% - 13px)",bottom:"0",left:"16px",top:"2px",position:"absolute",overflow:"none",display:"block"});var h=document.createElement("div");$(h).css({width:"97%",height:"24px","z-index":"5",overflow:"hidden","text-align":"center",border:"1px solid gray"});this.headerText=document.createElement("span");$(this.headerText).addClass("git-viewer-rightpane-header-text");$(this.headerText).text(c.LocalizedStrings.nav_pane_no_comments);$(h).append(this.headerText);$(this.popupPane).append(h);this.popupPaneContent=document.createElement("div");$(this.popupPaneContent).attr("id","popupPaneContent");$(this.popupPaneContent).css({width:"100%",bottom:"0",height:"calc(100% - 24px)",left:"0",position:"relative","overflow-y":"auto","overflow-x":"hidden",display:"block"});$(this.popupPane).append(this.popupPaneContent)};g.prototype.guid=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return g}(c.PluggableModule));c.AnnotsModule=d})(gnostice||(gnostice={}));var gnostice;(function(c){var b=(function(){function d(){}return d}());var a=(function(){function d(h,g,f,i,e,j,k){var l=this;this.container=h;this.pageNumber=g;this.tabIndex=f;this.annot=i;this.parentWidget=e;this.annotsModule=j;this.viewerManager=k;this.isPopupOpen=false;this.isFocused=false;this.startDragging=false;this.popupAnnotWidget=null;this.baseContainer=null;this.nwButtonDown=false;this.moveCursorDownBtn=false;this.isRightClickMenuOpen=false;this.oldX=0;this.oldY=0;this.onContentChanged=function(m,n){l.updateTooltip(m,n,l.baseContainer)};this.deleteAnnotation=function(){if(!l.annot.isLocked){l.annot.isDeleted=true;l.annot.isDirty=true;l.isRightClickMenuOpen=false;l.hidePopup();l.hide();l.annotsModule.focusOut();l.annotsModule.lastFocusedAnnotWidget=null;$(".git_annot_hover").remove();$(".git_annot_focus").remove();l.annotsModule.pushDeletedWidgetToUndoQueue(l)}};if(this.annot.content==null){this.annot.content=""}if(this.annot.title==null){this.annot.title=""}}d.prototype.render=function(){};d.prototype.constructPopup=function(){this.popupAnnotWidget=new c.PopupAnnotWidget(this.container,this.pageNumber,-1,this.annot,this,this.annotsModule,this.viewerManager);this.popupAnnotWidget.render()};d.prototype.getBaseContainer=function(i,h,f,e){var g=this.viewerManager.zoomfactor;this.baseContainer=document.createElement("div");$(this.baseContainer).attr({"class":"git_annots"});$(this.baseContainer).css({position:"absolute","float":"top",left:i,top:h,width:f,height:e,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"center",border:"none",cursor:"move"});this.ApplyPropertiesToBaseContainer();return this.baseContainer};d.prototype.showPopup=function(){this.popupAnnotWidget.show();this.isPopupOpen=true;this.isFocused=true};d.prototype.hidePopup=function(){this.popupAnnotWidget.hide();this.isPopupOpen=false;this.isFocused=false};d.prototype.getKeyValPair=function(){if(this.annot.isNew&&this.annot.isDeleted){return null}if(this.annot.isDirty||this.annot.isNew){var e={rectangle:this.annot.rectangle,title:this.annot.title,isNew:this.annot.isNew,pageNumber:this.pageNumber,time:this.annot.time,isDeleted:this.annot.isDeleted,popupCommentThread:{rectangle:this.annot.popupAnnot.rectangle,comments:this.composeComments()},content:this.annot.content,annotationStates:this.annot.annotationStates};this.annot.isDirty=false;this.annot.isNew=false;return new c.AnnotsKeyValuePair(this.annot.name,e)}return null};d.prototype.composeComments=function(){return this.popupAnnotWidget.composeComments()};d.prototype.show=function(){$(this.baseContainer).show()};d.prototype.hide=function(){$(this.baseContainer).hide()};d.prototype.getWidth=function(){return this.annot.width};d.prototype.ApplyPropertiesToBaseContainer=function(){var e=this;$(this.baseContainer).hover(function(){if(!e.startDragging){e.annotsModule.focusGained(e,false)}else{e.annotsModule.hoverOut()}});$(this.baseContainer).mouseleave(function(){e.annotsModule.hoverOut()});$(this.baseContainer).on("click",function(f){if(!e.startDragging&&!e.annot.isDeleted){e.annotsModule.hideOtherPopups(e);e.annotsModule.focusGained(e);e.showPopup()}f.stopPropagation()});$(this.baseContainer).dblclick(function(f){e.popupAnnotWidget.setFocus()});$(this.baseContainer).mousedown(function(f){e.sizeButtonClicked("size")});$(this.baseContainer).mouseup(function(f){e.sizeButtonClicked("")});$(this.container).click(function(f){f.stopPropagation()});$(this.baseContainer).keydown(function(f){if(f.keyCode==46){e.deleteAnnotation()}});if(!this.annot.isLocked&&this.annotsModule.allowCommenting){this.applyDrag(this.baseContainer)}this.prepareTooltip()};d.prototype.updateTooltip=function(g,i,f){if(i==null){i=""}if(g==null||g==""){$(f).attr({title:""});return}try{if(parseFloat($.ui.version.replace("1.",""))>=9){$(f).attr({title:"<b>"+i+"</b>:<br>"+g})}else{$(f).attr({title:i+": "+g})}}catch(h){$(f).attr({title:""})}};d.prototype.applyShapeProperties=function(e,f){e.attr("fill",f.fillColor);e.attr("stroke",f.strokeColor);if(this.annot.strokeStyle>=1){e.attr("stroke-dasharray","--")}e.attr("stroke-width",f.strokeWidth)};d.prototype.prepareTooltip=function(){$(this.baseContainer).jqUiTooltip({content:function(){return $(this).attr("title")}});this.updateTooltip(this.annot.content,this.annot.title,this.baseContainer)};d.prototype.applyDrag=function(e){var g=this;var f=this.viewerManager.zoomfactor;$(e).draggable({start:function(h,i){g.startDragging=true;g.annotsModule.isDraggingStarted=true;g.annotsModule.hoverOut();g.oldX=g.annot.rectangle.left;g.oldY=g.annot.rectangle.top;$(g.baseContainer).jqUiTooltip("close")},drag:function(){g.annot.rectangle.left=Math.round($(g.baseContainer).position().left/f);g.annot.rectangle.top=Math.round($(g.baseContainer).position().top/f);g.annotsModule.focusGained(g);$(g.baseContainer).jqUiTooltip("close")},stop:function(h,i){g.annot.rectangle.left=Math.round($(g.baseContainer).position().left/f);g.annot.rectangle.top=Math.round($(g.baseContainer).position().top/f);g.dragEnd(g.annot.rectangle.left,g.annot.rectangle.top);g.annotsModule.focusGained(g);g.startDragging=false;g.annotsModule.isDraggingStarted=false;g.annot.isDirty=true;$(g.baseContainer).jqUiTooltip("close")},containment:"parent"})};d.prototype.dragEnd=function(f,e){};d.prototype.sizeButtonClicked=function(e){this.nwButtonDown=false;this.moveCursorDownBtn=false;if(e=="nw"){this.nwButtonDown=true}else{if(e=="size"){this.moveCursorDownBtn=true}}};return d}());c.MarkupAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.annotContainer=null;this.startDragging=false}c.prototype.render=function(){var i=this.viewerManager.zoomfactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*i,this.annot.rectangle.top*i,this.annot.rectangle.width*i,this.annot.rectangle.height*i);var n=Math.round(this.annot.rectangle.width);var m=Math.round(this.annot.rectangle.height);var l=Math.round(n/2);var k=Math.round(m/2);var g=Math.round(n/2)-1;var f=Math.round(m/2)-1;var j=Raphael(this.annotContainer,n*i,m*i);var e=j.ellipse(l*i,k*i,g*i-this.annot.strokeWidth,f*i-this.annot.strokeWidth);this.applyShapeProperties(e,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.CircleAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(j){var a;(function(k){k[k.None=0]="None";k[k.Accepted=1]="Accepted";k[k.Rejected=2]="Rejected";k[k.Cancelled=3]="Cancelled";k[k.Completed=4]="Completed"})(a||(a={}));var b=(function(){function k(){}return k}());var f=(function(){function k(){}return k}());var g=(function(){function k(){this._countLbl=null;this._countIcon=null;this.count=0}k.prototype.getWidget=function(o,l,m,v,r){var s=false;var t=20;if(m){l=0;s=true;t=25}var q=document.createElement("div");$(q).css({position:"relative","float":"top",top:0,height:t,"z-index":"3000","background-color":v,"text-align":"center",border:"0px solid gray"});if(s){$(q).css({border:"1px solid gray"})}var u=l+5;var n=document.createElement("div");$(n).css({position:"absolute","float":"left",top:0,width:20,height:20,"z-index":"3000",display:"block",color:"black","background-color":"transparent",border:"none",margin:"5px 5px 5px "+u+"px"});$(n).attr({"class":"git-annot-popup-user-icon"});$(q).append(n);u=20+u+5;var p=document.createElement("span");$(p).css({display:"inline-block","vertical-align":"middle","font-family":"Verdana","font-size":"12px","font-weight":"bold","float":"left",margin:"5px 5px 5px "+u+"px",color:r});$(p).html(o);$(q).append(p);if(m){this._countLbl=document.createElement("span");$(this._countLbl).css({display:"inline-block","vertical-align":"middle","font-family":"Verdana","font-size":"12px","font-weight":"bold","float":"right",margin:"5px",color:"gray"});this._countIcon=document.createElement("div");$(this._countIcon).addClass("git-annot-reply-count");$(this._countIcon).hide();if(this.count>0){$(this._countLbl).html(this.count.toString());$(this._countIcon).show()}$(q).append(this._countLbl);$(q).append(this._countIcon)}$(q).attr({"class":"annots"});return q};k.prototype.updateCount=function(l){if(this._countLbl!=null&&(l>0)){this.count=l;$(this._countIcon).show();$(this._countLbl).html(this.count.toString())}else{$(this._countIcon).hide()}};return k}());var d=(function(){function k(l){this.parentAnnotWidget=l;this.localContent=null;this._contentAreaWidget=null;this._countLbl=null;this._countIcon=null}k.prototype.getDateTime=function(n){var q=n.getMonth()+1;var p=q+"/"+n.getDate()+"/"+n.getFullYear();var m=n.getHours()>12?n.getHours()-12:n.getHours();var l=n.getHours()>=12?"PM":"AM";m=m;var o=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();var r=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return p+" "+m+":"+o+":"+r+" "+l};k.prototype.getContentArea=function(n,o,q,l,m){var p=this;this._contentAreaWidget=document.createElement("textarea");$(this._contentAreaWidget).attr({spellcheck:"false","class":"contentArea"});$(this._contentAreaWidget).css({outline:"none",overflow:"true",resize:"none","white-space":"pre-wrap","-webkit-user-select":"text",left:"5px",top:"5px","font-family":"Verdana","font-size":"12px","line-height":"16px",position:"relative",width:m-14-o,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"left",border:"1px solid transparent",padding:0,margin:"5px 5px 5px "+o+"px"});if(q||!l){$(this._contentAreaWidget).attr({readonly:"true"})}$(this._contentAreaWidget).val(n);$(this._contentAreaWidget).keyup(function(r){p.parentAnnotWidget.annot.isDirty=true;p.parentAnnotWidget.parentWidget.annot.isDirty=true;p.localContent=$(p._contentAreaWidget).val().trim()});return this._contentAreaWidget};k.prototype.setFocus=function(){$(this._contentAreaWidget).focus()};k.prototype.getTopUserHeader=function(l,p,o,m,n){var q=new g();return q.getWidget(l,p,o,m,n)};return k}());var e=(function(){function k(){this.acceptedCount=0;this.rejectedCount=0;this.cancelledCount=0;this.completedCount=0;this.acceptedList=new Array();this.rejectedList=new Array();this.cancelledList=new Array();this.completedList=new Array()}return k}());var h=(function(k){__extends(l,k);function l(p,q,n,t,w,v,m,u,s,o,r){k.call(this,q);this.annot=p;this.parentAnnotWidget=q;this.container=n;this.userName=t;this.usernameDisplaycolor=w;this.backgroundColor=v;this.isLocked=m;this.allowCommenting=u;this.isTop=s;this.width=o;this.index=r;this.mainWindow=null;this.dateSpan=null;this.statusAccepted=null;this.statusRejected=null;this.statusCompleted=null;this.statusCancelled=null;this.contentArea=null;this.lblAcceptedCount=null;this.lblRejectedCount=null;this.lblCompletedCount=null;this.lblCancelledCount=null;this.annotationState=a.None;this.annotationStates=null;if(r==-1){this.annotationStates=this.getCommentsStates(this.annot.annotationStates)}else{this.annotationStates=this.getCommentsStates(this.annot.popupAnnot.comments[r].annotationStates)}}l.prototype.render=function(p,s,o){var r=this;this.title=p;this.content=s;var n=new Date();this.time=n.toUTCString();if(o!=null&&o!=""){n=new Date(o);this.time=o}var u=this.getDateTime(n);if(this.content==null){this.content=""}this.localContent=this.content;var t=document.createElement("div");$(t).css({border:"1px solid gray","padding-bottom":"10px","background-color":this.backgroundColor});var m=0;var q=5;if(!this.isTop){m=8;q=0}if(!this.isTop){$(t).append(this.getTopUserHeader(p,m,false,"transparent",this.usernameDisplaycolor))}$(t).append(this.getMiddleDateHeader(u,m,q));$(t).append(this.getMiddleStatusHeader(m));this.contentArea=this.getContentArea(s,m,this.isLocked,this.allowCommenting,this.width);$(t).append(this.contentArea);$(this.contentArea).focusin(function(){$(r.contentArea).attr({spellcheck:"true"});$(r.contentArea).css({"background-color":"white",border:"1px solid gray"})});$(this.contentArea).focusout(function(){$(r.contentArea).attr({spellcheck:"false"});$(r.contentArea).css({"background-color":"transparent",border:"1px solid transparent"});if(r.localContent.trim()!=r.content.trim()){if(r.isTop){r.parentAnnotWidget.onContentChanged(r.localContent,r.title)}r.content=r.localContent;if(r.isTop){r.annot.content=r.content;r.annot.time=new Date().toUTCString()}var v=new Date();r.time=v.toUTCString();$(r.dateSpan).html(r.getDateTime(v))}});$(this.container).append(t);this.mainWindow=t};l.prototype.getMiddleDateHeader=function(p,o,m){var n=document.createElement("div");var q=5+o;$(n).css({color:"gray","font-family":"Verdana",width:"96%","font-size":"10px","margin-left":q,"margin-top":m,"float":"left"});this.dateSpan=document.createElement("span");$(this.dateSpan).css({"float":"left"});$(this.dateSpan).html(p);$(n).append(this.dateSpan);return n};l.prototype.removeItemFromArray=function(o,m){for(var n=m.length-1;n>=0;n--){if(m[n]===o){m.splice(n,1);break}}};l.prototype.removeEnabledState=function(){$(this.statusAccepted).removeClass("git-annot-status-accepted_enabled");$(this.statusRejected).removeClass("git-annot-status-rejected-enabled");$(this.statusCancelled).removeClass("git-annot-status-cancelled-enabled");$(this.statusCompleted).removeClass("git-annot-status-completed-enabled");$(this.statusAccepted).addClass("git-annot-status-accepted");$(this.statusRejected).addClass("git-annot-status-rejected");$(this.statusCancelled).addClass("git-annot-status-cancelled");$(this.statusCompleted).addClass("git-annot-status-completed");switch(this.annotationState){case a.Accepted:this.annotationStates.acceptedCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.acceptedList);$(this.lblAcceptedCount).text(this.annotationStates.acceptedCount);break;case a.Completed:this.annotationStates.completedCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.completedList);$(this.lblCompletedCount).text(this.annotationStates.completedCount);break;case a.Rejected:this.annotationStates.rejectedCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.rejectedList);$(this.lblRejectedCount).text(this.annotationStates.rejectedCount);break;case a.Cancelled:this.annotationStates.cancelledCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.cancelledList);$(this.lblCancelledCount).text(this.annotationStates.cancelledCount);break}};l.prototype.isJQueryUIGreaterThan8=function(){try{if(parseFloat($.ui.version.replace("1.",""))>=9){return true}return false}catch(m){return false}};l.prototype.updateStateTooltip=function(r,q,p){var s="<b>";var o=null;var m=null;switch(r){case a.Accepted:s+=j.LocalizedStrings.annot_state_accepted;o=this.statusAccepted;m=this.lblAcceptedCount;break;case a.Cancelled:s+=j.LocalizedStrings.annot_state_cancelled;o=this.statusCancelled;m=this.lblCancelledCount;break;case a.Rejected:s+=j.LocalizedStrings.annot_state_rejected;o=this.statusRejected;m=this.lblRejectedCount;break;case a.Completed:s+=j.LocalizedStrings.annot_state_completed;o=this.statusCompleted;m=this.lblCompletedCount;break}if(q.length>0){s+=" "+j.LocalizedStrings.annot_by+": ";if(this.isJQueryUIGreaterThan8()){s+="</b><br>";for(var n=0;n<q.length;n++){s+=q[n];s+="<br>"}}else{for(var n=0;n<q.length;n++){if(n>0){s+=", "}s+=q[n]}}}$(m).attr({title:s});$(o).attr({title:s})};l.prototype.getCommentsStates=function(o){var m=new e();if(o==null){return m}for(var n in o){if(o.hasOwnProperty(n)){switch(o[n]){case a.Accepted:m.acceptedCount+=1;m.acceptedList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Accepted}break;case a.Rejected:m.rejectedCount+=1;m.rejectedList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Rejected}break;case a.Cancelled:m.cancelledCount+=1;m.cancelledList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Cancelled}break;case a.Completed:m.completedCount+=1;m.completedList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Completed}break}}}return m};l.prototype.updateAllStateTooltips=function(){this.updateStateTooltip(a.Accepted,this.annotationStates.acceptedList,this.lblAcceptedCount);this.updateStateTooltip(a.Rejected,this.annotationStates.rejectedList,this.lblRejectedCount);this.updateStateTooltip(a.Completed,this.annotationStates.completedList,this.lblCompletedCount);this.updateStateTooltip(a.Cancelled,this.annotationStates.cancelledList,this.lblCancelledCount);if(this.isTop){if(this.annot.annotationStates==null){this.annot.annotationStates={}}this.updateAnnotationStates(this.annot.annotationStates)}else{if(this.annot.popupAnnot.comments[this.index]!=null){if(this.annot.popupAnnot.comments[this.index].annotationStates==null){this.annot.popupAnnot.comments[this.index].annotationStates={}}this.updateAnnotationStates(this.annot.popupAnnot.comments[this.index].annotationStates)}}};l.prototype.updateAnnotationStates=function(n){var o=false;for(var m in n){if(m==this.userName){o=true;n[m]=this.annotationState;break}}if(!o){n[this.userName]=this.annotationState}};l.prototype.setTooltip=function(m){$(m).jqUiTooltip({content:function(){return $(this).attr("title")}})};l.prototype.getMiddleStatusHeader=function(q){var t=this;var o=document.createElement("div");var s=5+q;$(o).css({color:"gray","font-family":"Verdana","font-size":"10px","margin-left":q,"float":"left"});var p=document.createElement("table");$(p).css({"box-sizing":"initial","border-collapse":"separate","border-spacing":"2px"});var r=p.insertRow(0);$(o).append(p);var n=document.createElement("label");$(n).html("Status:");$(n).css({color:"black","font-family":"Verdana","font-size":"11px","font-weight":"bold","margin-left":"2px"});var m=r.insertCell(0);m.appendChild(n);this.statusAccepted=document.createElement("div");$(this.statusAccepted).addClass("git-annot-status-accepted git-annot-status");$(this.statusAccepted).attr({title:"Accepted"});m=r.insertCell(1);m.appendChild(this.statusAccepted);this.lblAcceptedCount=document.createElement("span");$(this.lblAcceptedCount).addClass("git-annot-label-status");$(this.lblAcceptedCount).text(this.annotationStates.acceptedCount);this.setTooltip(this.lblAcceptedCount);this.setTooltip(this.statusAccepted);m=r.insertCell(2);m.appendChild(this.lblAcceptedCount);this.statusRejected=document.createElement("div");$(this.statusRejected).addClass("git-annot-status-rejected git-annot-status");$(o).append(this.statusRejected);$(this.statusRejected).attr({title:"Rejected"});m=r.insertCell(3);m.appendChild(this.statusRejected);this.lblRejectedCount=document.createElement("span");$(this.lblRejectedCount).addClass("git-annot-label-status");$(this.lblRejectedCount).text(this.annotationStates.rejectedCount);this.setTooltip(this.lblRejectedCount);this.setTooltip(this.statusRejected);m=r.insertCell(4);m.appendChild(this.lblRejectedCount);this.statusCompleted=document.createElement("div");$(this.statusCompleted).addClass("git-annot-status-completed git-annot-status");$(this.statusCompleted).attr({title:"Completed"});m=r.insertCell(5);m.appendChild(this.statusCompleted);this.lblCompletedCount=document.createElement("span");$(this.lblCompletedCount).addClass("git-annot-label-status");$(this.lblCompletedCount).text(this.annotationStates.completedCount);this.setTooltip(this.lblCompletedCount);this.setTooltip(this.statusCompleted);m=r.insertCell(6);m.appendChild(this.lblCompletedCount);this.statusCancelled=document.createElement("div");$(this.statusCancelled).addClass("git-annot-status-cancelled git-annot-status");$(this.statusCancelled).attr({title:"Cancelled"});m=r.insertCell(7);m.appendChild(this.statusCancelled);this.lblCancelledCount=document.createElement("span");$(this.lblCancelledCount).addClass("git-annot-label-status");$(this.lblCancelledCount).text(this.annotationStates.cancelledCount);this.setTooltip(this.lblCancelledCount);this.setTooltip(this.statusCancelled);this.updateAllStateTooltips();m=r.insertCell(8);m.appendChild(this.lblCancelledCount);if(!this.annot.isLocked&&this.parentAnnotWidget.annotsModule.allowCommenting){switch(this.annotationState){case a.Accepted:$(this.statusAccepted).addClass("git-annot-status-accepted_enabled");$(this.statusAccepted).removeClass("git-annot-status-accepted");break;case a.Completed:$(this.statusCompleted).addClass("git-annot-status-completed-enabled");$(this.statusCompleted).removeClass("git-annot-status-completed");break;case a.Rejected:$(this.statusRejected).removeClass("git-annot-status-rejected");$(this.statusRejected).addClass("git-annot-status-rejected-enabled");break;case a.Cancelled:$(this.statusCancelled).removeClass("git-annot-status-cancelled");$(this.statusCancelled).addClass("git-annot-status-cancelled-enabled");break}$(this.statusAccepted).click(function(v){var u=false;t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;if(t.annotationState==a.Accepted){u=true}t.removeEnabledState();if(!u){t.annotationState=a.Accepted;t.annotationStates.acceptedCount+=1;t.annotationStates.acceptedList.push(t.userName);$(t.statusAccepted).addClass("git-annot-status-accepted_enabled");$(t.statusAccepted).removeClass("git-annot-status-accepted")}else{t.annotationState=a.None}$(t.lblAcceptedCount).text(t.annotationStates.acceptedCount);t.updateAllStateTooltips()});$(this.statusCompleted).click(function(v){t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;var u=false;if(t.annotationState==a.Completed){u=true}t.removeEnabledState();if(!u){$(t.statusCompleted).addClass("git-annot-status-completed-enabled");$(t.statusCompleted).removeClass("git-annot-status-completed");t.annotationStates.completedCount+=1;t.annotationState=a.Completed;t.annotationStates.completedList.push(t.userName)}else{t.annotationState=a.None}t.updateAllStateTooltips();$(t.lblCompletedCount).text(t.annotationStates.completedCount)});$(this.statusRejected).click(function(v){t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;var u=false;if(t.annotationState==a.Rejected){u=true}t.removeEnabledState();if(!u){$(t.statusRejected).removeClass("git-annot-status-rejected");$(t.statusRejected).addClass("git-annot-status-rejected-enabled");t.annotationStates.rejectedCount+=1;t.annotationState=a.Rejected;t.annotationStates.rejectedList.push(t.userName)}else{t.annotationState=a.None}t.updateAllStateTooltips();$(t.lblRejectedCount).text(t.annotationStates.rejectedCount)});$(this.statusCancelled).click(function(v){t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;var u=false;if(t.annotationState==a.Cancelled){u=true}t.removeEnabledState();if(!u){t.annotationStates.cancelledCount+=1;$(t.statusCancelled).removeClass("git-annot-status-cancelled");$(t.statusCancelled).addClass("git-annot-status-cancelled-enabled");t.annotationState=a.Cancelled;t.annotationStates.cancelledList.push(t.userName)}else{t.annotationState=a.None}t.updateAllStateTooltips();$(t.lblCancelledCount).text(t.annotationStates.cancelledCount)})}return o};l.prototype.updateThreadsCount=function(m){};return l}(d));var c=(function(l){__extends(k,l);function k(q,n,s,o,r,p,m){l.call(this,q);this.parentAnnotWidget=q;this.container=n;this.isLocked=s;this.allowCommenting=o;this.highlightColor=r;this.width=p;this.commentsWindow=m;this.mainWindow=null;this.contentArea=null;this.content="";this.replyClickedCallback=null}k.prototype.render=function(n){var q=this;this.replyClickedCallback=n;var m=document.createElement("div");$(m).css({display:"block",border:"1px solid gray","background-color":this.highlightColor});$(m).attr({"class":"noteReply"});this.mainWindow=m;this.contentArea=this.getContentArea("",0,this.isLocked,this.allowCommenting,this.width);$(this.contentArea).attr({placeholder:j.LocalizedStrings.annot_enter_reply});$(this.contentArea).css({"background-color":"white",border:"1px solid gray"});$(m).append(this.contentArea);$(this.contentArea).keyup(function(r){if($(q.contentArea).val().length>0){$(o).removeAttr("disabled");q.content=$(q.contentArea).val()}else{$(o).attr({disabled:"true"})}});var p=document.createElement("div");$(p).css({position:"relative",display:"block",top:0,width:"100%","z-index":"3000",color:"black","text-align":"center",border:"0px solid gray"});var o=document.createElement("button");$(o).css({position:"relative",top:3,width:54,height:28,"z-index":"3000",display:"block",margin:"6px 5px 7px 5px","font-size":"12px"});$(o).attr({disabled:"true"});$(o).html(j.LocalizedStrings.annot_reply);$(o).click(function(){q.replyClickedCallback(new Date().toUTCString(),$(q.contentArea).val(),q.commentsWindow)});$(p).append(o);$(p).attr({"class":"annots"});$(m).append(p);$(this.container).append(m)};k.prototype.remove=function(){$(this.mainWindow).parent().find(".noteReply").remove();this.mainWindow=null};return k}(d));var i=(function(){function k(m,p,n,o,l){var q=this;this.annot=m;this.parentAnnotWidget=p;this.annotsModule=n;this.viewerManager=o;this.pageNumber=l;this.mainWindow=null;this.commentWidgets=new Array();this.width=242;this.replyCallback=function(t,r){var s={title:q.userName,content:r,time:t,annotationStates:{}};if(q.annot.popupAnnot.comments==null){q.annot.popupAnnot.comments=new Array()}q.annot.popupAnnot.comments.push(s);q.parentAnnotWidget.annot.isDirty=true;q.parentAnnotWidget.parentWidget.annot.isDirty=true;q.replyWindow.remove();var u=new h(q.annot,q.parentAnnotWidget,q.commentsContainer,q.userName,q.userDisplayColor,q.highlightColor,q.isLocked,q.allowCommenting,false,q.width,q.annot.popupAnnot.comments.length-1);u.render(q.userName,r,t);q.commentWidgets.push(u);q.replyWindow=new c(q.parentAnnotWidget,q.commentsContainer,q.isLocked,q.allowCommenting,q.highlightColor,q.width,q);q.replyWindow.render(q.replyCallback);q.headerWidget.updateCount(q.annot.popupAnnot.comments.length);q.replyWindow.setFocus();q.updatePopupSizeWindow()};this.userName=this.viewerManager.preferences.userIdentity.name;this.highlightColor=this.viewerManager.preferences.interactiveElements.annotations.commentsPanelDisplayColor;this.userDisplayColor=this.viewerManager.preferences.interactiveElements.annotations.userFieldDisplayColor;this.isLocked=this.annot.isLocked;this.allowCommenting=this.annotsModule.allowCommenting}k.prototype.render=function(){var p=1;var o=0;this.mainWindow=document.createElement("div");$(this.mainWindow).attr({"class":"git_annots"+this.pageNumber});$(this.mainWindow).addClass("git_annots_popup");$(this.mainWindow).css({position:"absolute",left:p,top:o,width:this.width,height:"auto","z-index":"3002",color:"black",display:"none","padding-bottom":5,"margin-top":1});var n=this.userName;if((this.annot.title!=null)&&(this.annot.title!="")){n=this.annot.title}this.headerWidget=new g();var s=this.headerWidget.getWidget(this.annot.title,0,true,this.highlightColor,this.userDisplayColor);this.headerWidget.updateCount(this.annot.popupAnnot.comments.length);$(this.mainWindow).append(s);var r=document.createElement("div");$(r).attr({"class":"git_annots"});$(r).css({position:"relative",top:0,width:"100%",height:"auto","z-index":"3002",display:"block",color:"black"});this.commentsContainer=document.createElement("div");$(this.commentsContainer).attr({"class":"git_annots"});$(this.commentsContainer).css({position:"relative",width:"100%",top:0,overflow:"visible","z-index":"3002",display:"block",color:"black","background-color":this.viewerManager.preferences.interactiveElements.annotations.commentsPanelDisplayColor,"text-align":"center"});this.topCommentWidget=new h(this.annot,this.parentAnnotWidget,this.commentsContainer,this.userName,this.userDisplayColor,this.highlightColor,this.isLocked,this.allowCommenting,true,this.width,-1);var l=false;this.topCommentWidget.render(this.annot.title,this.annot.content,this.annot.time);this.commentWidgets.push(this.topCommentWidget);if(this.annot.popupAnnot.comments.length>0){for(var m=0;m<this.annot.popupAnnot.comments.length;m++){var q=new h(this.annot,this.parentAnnotWidget,this.commentsContainer,this.userName,this.userDisplayColor,this.highlightColor,this.isLocked,this.allowCommenting,false,this.width,m);q.render(this.annot.popupAnnot.comments[m].title,this.annot.popupAnnot.comments[m].content,this.annot.popupAnnot.comments[m].time);this.commentWidgets.push(q)}}this.replyWindow=new c(this.parentAnnotWidget,this.commentsContainer,this.isLocked,this.allowCommenting,this.highlightColor,this.width,this);this.replyWindow.render(this.replyCallback);$(r).append(this.commentsContainer);$(this.mainWindow).append(r);$(this.annotsModule.popupPaneContent).append(this.mainWindow)};k.prototype.updateAnnotationStates=function(m,l){l.updateAnnotationStates(m)};k.prototype.composeComments=function(){var n=new Array();for(var l=0;l<this.commentWidgets.length;l++){var m=this.commentWidgets[l];if(m.isTop){this.annot.time=m.time;this.annot.title=m.title;this.annot.content=m.content}else{var o=new b();o.time=m.time;o.title=m.title;o.content=m.content;o.annotationStates=this.annot.popupAnnot.comments[l-1].annotationStates;n.push(o)}}return n};k.prototype.updatePopupSizeWindow=function(){var m=0;var l=3;if(this.annotsModule.popupPaneContent.scrollHeight>this.annotsModule.popupPaneContent.clientHeight){m=14}this.viewerManager.rightPane.setExpandableWidth($(this.commentsContainer).parent().width()+l*2+m+13)};k.prototype.show=function(){var m=this;var l=0;$(this.annotsModule.headerText).text(j.LocalizedStrings.nav_pane_comments);if(l!=null){$(this.mainWindow).css({top:Math.max((l-$(this.mainWindow).height()/2),0)})}$(this.mainWindow).show(function(){m.updatePopupSizeWindow()})};k.prototype.setFocus=function(){if(this.annot.isNew&&this.annot.content==""&&this.annot.popupAnnot.comments.length==0){this.topCommentWidget.setFocus()}else{this.replyWindow.setFocus()}};k.prototype.hide=function(){$(this.mainWindow).hide()};return k}());j.CommentsWindow=i})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.annotContainer=null}c.prototype.dragEnd=function(h,f){var e=h-this.oldX;var g=f-this.oldY;this.annot.x1=this.annot.x1+e;this.annot.x2=this.annot.x2+e;this.annot.y1=this.annot.y1+g;this.annot.y2=this.annot.y2+g};c.prototype.render=function(){var f=this.viewerManager.zoomfactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*f,this.annot.rectangle.top*f,this.annot.rectangle.width*f,this.annot.rectangle.height*f);var g=Raphael(this.annotContainer,this.annot.rectangle.width*f,this.annot.rectangle.height*f);var e=g.path(new Array("M",this.annot.x1*f,this.annot.y1*f,"L",this.annot.x2*f,this.annot.y2*f));e.attr({transform:"t"+-this.annot.rectangle.left*f+","+-this.annot.rectangle.top*f});this.applyShapeProperties(e,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.LineAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments)}c.prototype.render=function(){var e=this.viewerManager.zoomfactor;this.baseContainer=document.createElement("div");$(this.baseContainer).attr({"class":"git_annots"});$(this.baseContainer).css({position:"absolute","float":"top",left:this.annot.rectangle.left*e,top:this.annot.rectangle.top*e,width:this.annot.rectangle.width,height:this.annot.rectangle.height,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"center",border:"none"});$(this.baseContainer).addClass("git-annot-note");this.ApplyPropertiesToBaseContainer();this.constructPopup();$(this.container).append(this.baseContainer)};return c}(b.MarkupAnnotWidget));b.NoteAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.annotContainer=null}c.prototype.dragEnd=function(i,g){var f=i-this.oldX;var h=g-this.oldY;for(var e=0;e<this.annot.xPoints.length;e++){this.annot.xPoints[e]=this.annot.xPoints[e]+f;this.annot.yPoints[e]=this.annot.yPoints[e]+h}};c.prototype.render=function(){var g=this.viewerManager.zoomfactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*g,this.annot.rectangle.top*g,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var i=Raphael(this.annotContainer,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var f=new Array();f.push("M",this.annot.xPoints[0]*g,this.annot.yPoints[0]*g);for(var e=1;e<this.annot.xPoints.length;e++){f.push("L",this.annot.xPoints[e]*g,this.annot.yPoints[e]*g)}f.push("Z");var h=i.path(f);h.attr({transform:"t"+-this.annot.rectangle.left*g+","+-this.annot.rectangle.top*g});this.applyShapeProperties(h,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.PolygonAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.annotContainer=null;this.startDragging=false}c.prototype.dragEnd=function(i,g){var f=i-this.oldX;var h=g-this.oldY;for(var e=0;e<this.annot.xPoints.length;e++){this.annot.xPoints[e]=this.annot.xPoints[e]+f;this.annot.yPoints[e]=this.annot.yPoints[e]+h}};c.prototype.render=function(){var g=this.viewerManager.zoomfactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*g,this.annot.rectangle.top*g,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var i=Raphael(this.annotContainer,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var f=new Array();f.push("M",this.annot.xPoints[0]*g,this.annot.yPoints[0]*g);for(var e=1;e<this.annot.xPoints.length;e++){f.push("L",this.annot.xPoints[e]*g,this.annot.yPoints[e]*g)}var h=i.path(f);h.attr({transform:"t"+-this.annot.rectangle.left*g+","+-this.annot.rectangle.top*g});this.applyShapeProperties(h,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.PolyLineAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=this;d.apply(this,arguments);this.onContentChanged=function(f,g){e.parentWidget.onContentChanged(f,g)}}c.prototype.render=function(){this.commentWindow=new b.CommentsWindow(this.annot,this,this.annotsModule,this.viewerManager,this.pageNumber);this.commentWindow.render();$(this.annotsModule.headerText).text(b.LocalizedStrings.nav_pane_comments)};c.prototype.show=function(){this.commentWindow.show()};c.prototype.setFocus=function(){this.commentWindow.setFocus()};c.prototype.composeComments=function(){return this.commentWindow.composeComments()};c.prototype.hide=function(){this.commentWindow.hide()};return c}(b.MarkupAnnotWidget));b.PopupAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments);this.annotContainer=null;this.startDragging=false}c.prototype.render=function(){var i=this.viewerManager.zoomfactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*i,this.annot.rectangle.top*i,this.annot.rectangle.width*i,this.annot.rectangle.height*i);var e=this.annot.rectangle.width*i;var f=this.annot.rectangle.height*i;var j=Raphael(this.annotContainer,e,f);var g=j.rect(0,0,e,f);this.applyShapeProperties(g,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.SquareAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(d){__extends(c,d);function c(){d.apply(this,arguments)}c.prototype.render=function(){var f=this;var e=this.viewerManager.zoomfactor;this.baseContainer=document.createElement("div");$(this.baseContainer).css({position:"absolute","float":"top",left:this.annot.rectangle.left*e,top:this.annot.rectangle.top*e,width:this.annot.rectangle.width*e,height:this.annot.rectangle.height*e,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"center",border:"none",cursor:"pointer"});$(this.baseContainer).on("mousedown",function(){$(f.baseContainer).css({"background-color":"black",opacity:"0.5"})});$(this.baseContainer).on("mouseup",function(){$(f.baseContainer).css({"background-color":"transparent"})});if(this.annot.actions.length!=0){$(this.baseContainer).on("click",function(g){f.viewerManager.performPDFActions(f.annot.actions)})}$(this.container).append(this.baseContainer)};return c}(a.MarkupAnnotWidget));a.LinkAnnotWidget=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(f,e,i,h,d){if(d===void 0){d=b.NavigationPanePosition.auto}this.parentElement=f;this.onDragEndCallBack=e;this.rightElement=i;this.dragable=h;this.position=d;this.parentminWidth=750;this.leftPanelWidth=0;this.rightPanelWidth=0;if(h){this.vSplitter=$(f).split({orientation:"vertical",limit:0,invisible:true,position:"0px",onDragEnd:e})}else{var g=$(f).innerWidth();$(".git-docviewer-container").width(g);$(".git-docviewer-container").css("left","0px")}}c.prototype.getPosition=function(){var d;var f=0;var e=0;if(this.dragable){d=this.vSplitter.position();return{leftPanelWidth:d,rightPanelWidth:this.rightPanelWidth}}else{f=$("#leftPane").width();e=$("#rightPane").width()}return{leftPanelWidth:f,rightPanelWidth:e}};c.prototype.setPosition=function(d,i,f){if(i===void 0){i=0}if(f===void 0){f=false}if(!f){if((this.leftPanelWidth==d)&&(this.rightPanelWidth==i)){return}}this.leftPanelWidth=d;this.rightPanelWidth=i;if(this.dragable){this.vSplitter.position(d)}else{switch(this.position){case 1:var e=$(this.parentElement).innerWidth();$("#leftPane").css("top","0px");$("#leftPane").width(d);var h=e-d-i;var g=h+d;$(".git-docviewer-container").width(h);$(".git-docviewer-container").css("left",d+"px");$("#rightPane").css("left",g+"px");$("#rightPane").width(i);$("#rightPane").css("top","0px");$(".git-viewer-comment-toolbarContent").css("top","36px");$(".git-docviewer-scrollablecanvas").css("padding-right","0px");break;case 2:var e=$(this.parentElement).innerWidth();$("#leftPane").css("top","37px");$("#leftPane").width(d);$(".git-docviewer-container").width(e);$(".git-docviewer-container").css("left","0px");g=e-i;$("#rightPane").css("top","36px");$("#rightPane").css("left",g+"px");$("#rightPane").width(i);var h=e;$(".git-docviewer-container").width(h);$(".git-docviewer-scrollablecanvas").css("padding-right",d+"px");$(".git-viewer-comment-toolbarContent").css("top","1px");break;default:var e=$(this.parentElement).innerWidth();if(e>this.parentminWidth){$("#leftPane").css("top","0px");$("#leftPane").width(d);var h=e-d-i;var g=h+d;$(".git-docviewer-container").width(h);$(".git-docviewer-container").css("left",d+"px");$("#rightPane").css("left",g+"px");$("#rightPane").width(i);$("#rightPane").css("top","0px");$(".git-viewer-comment-toolbarContent").css("top","36px");$(".git-docviewer-scrollablecanvas").css("padding-right","0px")}else{$("#leftPane").css("top","37px");$("#leftPane").width(d);$(".git-docviewer-container").width(e);$(".git-docviewer-container").css("left","0px");g=e-i;$("#rightPane").css("top","36px");$("#rightPane").css("left",g+"px");$("#rightPane").width(i);var h=e;$(".git-docviewer-container").width(h);$(".git-docviewer-scrollablecanvas").css("padding-right",d+"px");$(".git-viewer-comment-toolbarContent").css("top","1px")}break}this.onDragEndCallBack.call()}};c.prototype.refresh=function(){var d=this.getPosition();this.setPosition(d.leftPanelWidth,d.rightPanelWidth,true)};return c}());b.divSplitter=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(d,e){this.parentElement=d;this.inputJsonData=e;$(d).tree({data:e,autoOpen:false,openFolderDelay:10,selectable:false})}c.prototype.addClickEvent=function(e,d){$(this.parentElement).bind("tree.click",d)};c.prototype.loadNewData=function(d){$(this.parentElement).tree("loadData",d)};return c}());b.jsonTreeView=a})(gnostice||(gnostice={}));var gnostice;(function(l){Number.prototype.format=function(u,o,r,t){var q="\\d(?=(\\d{"+(o||3)+"})+"+(u>0?"\\D":"$")+")",p=this.toFixed(Math.max(0,~~u));return(t?p.replace(".",t):p).replace(new RegExp(q,"g"),"$&"+(r||""))};var b=(function(){function n(){}return n}());l.RegionAction=b;var m=(function(){function n(q,p,o){this.image=q;this.width=p;this.height=o}return n}());l.Page=m;var h=(function(){function n(o,q,p){if(o===void 0){o=1}if(q===void 0){q=0}if(p===void 0){p=0}this.pageNumber=o;this.scrollXPos=q;this.scrollYPos=p}return n}());l.PageInfo=h;var g=(function(){function n(o,p){this.name=o;this.val=p}return n}());l.AnnotsKeyValuePair=g;var k=(function(){function n(){}n.logInfo=function(o){if(console!=null&&n.infoLogsEnabled){console.log(o)}};n.logError=function(o){if(console!=null&&n.errorLogsEnabled){console.log("Error: "+o)}};n.errorLogsEnabled=true;n.infoLogsEnabled=false;return n}());l.logger=k;var a=(function(){function n(){}n.docInfoRetrieved="docInfoRetrieved";n.blankPageCreated="blankPageCreated";n.pageRendered="pageRendered";n.pageReRendered="pageReRendered";n.reflow="reflow";n.bindSelectableRegionEvent="bindSelectableRegionEvent";n.unSelectableRegionEvent="unSelectableRegionEvent";n.beforePageChange="beforePageChange";n.afterPageChange="afterPageChange";n.beforeZoomChange="beforeZoomChange";n.afterZoomChange="afterZoomChange";n.onDocumentClose="onDocumentClose";n.beforeDocumentLoad="beforeDocumentLoad";n.afterDocumentLoad="afterDocumentLoad";n.beforeDocumentUpload="beforeDocumentUpload";n.afterDocumentUpload="afterDocumentUpload";n.beforeDocumentPrint="beforeDocumentPrint";n.afterDocumentPrint="afterDocumentPrint";n.beforeDocumentClose="beforeDocumentClose";n.afterDocumentClose="afterDocumentClose";n.beforePageRotate="beforePageRotate";n.afterPageRotate="afterPageRotate";n.beforeDocumentDownload="beforeDocumentDownload";n.afterDocumentDownload="afterDocumentDownload";n.beforeDocumentSaveInternal="beforeDocumentSaveInternal";n.beforeDocumentSave="beforeDocumentSave";n.afterDocumentSave="afterDocumentSave";n.afterPageDraw="afterPageDraw";n.beforeFormSubmit="beforeFormSubmit";n.afterFormSubmit="afterFormSubmit";n.onFormLoaded="onFormLoaded";n.onFormModified="onFormModified";n.onFieldClicked="onFieldClicked";n.onFieldFocusIn="onFieldFocusIn";n.onFieldFocusOut="onFieldFocusOut";n.onFieldChanged="onFieldChanged";n.onNavigationAction="onNavigationAction";return n}());l.EventNames=a;var j=(function(){function n(){}n.BMP="image/bmp";n.JPEG="image/jpeg";n.JPG="image/jpeg";n.PNG="image/png";n.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document";n.DOC="application/msword";n.PDF="application/pdf";n.TIFF="image/tiff";n.EMF=" image/x-emf";n.WMF="image/x-wmf";n.ICO="image/x-icon";n.GIF="image/gif";n.TXT="text/plain";n.HTML="text/html";n.XPS="application/vnd.ms-xpsdocument";return n}());l.MimeTypes=j;(function(n){n[n.BLANK=0]="BLANK";n[n.RUNNING=1]="RUNNING";n[n.FINISHED=2]="FINISHED";n[n.ERROR=3]="ERROR"})(l.RENDERINGSTATE||(l.RENDERINGSTATE={}));var f=l.RENDERINGSTATE;(function(n){n[n.fitWidth=-1]="fitWidth";n[n.fitHeight=-2]="fitHeight";n[n.actualSize=-3]="actualSize";n[n.fitPage=-4]="fitPage"})(l.ZoomMode||(l.ZoomMode={}));var d=l.ZoomMode;(function(n){n[n.zero=0]="zero";n[n.clockwise90=90]="clockwise90";n[n.clockwise180=180]="clockwise180";n[n.clockwise270=270]="clockwise270";n[n.counterClockwise90=-90]="counterClockwise90";n[n.counterClockwise180=-180]="counterClockwise180";n[n.counterClockwise270=-270]="counterClockwise270"})(l.RotationAngle||(l.RotationAngle={}));var c=l.RotationAngle;var i=(function(){function n(){}n.ZOOM25=25;n.ZOOM50=50;n.ZOOM75=75;n.ZOOM100=100;n.ZOOM125=125;n.ZOOM150=150;n.ZOOM200=200;n.ZOOMACTUALSIZE=100;n.ZOOMPAGEHEIGHT=1002;n.ZOOMPAGEWIDTH=1003;n.ZOOMPAGESIZE=1004;n.ZOOMCUSTOM=100;return n}());var e=(function(){function n(w,u,t,v,q){var r=this;this.pluggableModules=new Array();this.regionActionList=new Array();this.onToolbarResize=function(){};this.selectedPage=1;this.pagechangecancel={value:false};this.zoomChangeCancel={value:false};this.documentLoadCancel={value:false};this.documentUploadCancel={value:false};this.printCancel={value:false};this.documentCloseCancel={value:false};this.documentDownloadCancel={value:false};this.rotateCancel={value:false};this.saveCancel={value:false};this.pageRegionSelectable=false;this.passwordAttemptCount=0;this.mimeType="";this.pageCount=0;this.renderDPI=96;this.printingDpi=96;this.currentPage=0;this.pageRenderingState=new Array();this.thumnailPageRenderingState=new Array();this.zoomSteps=new Array();this.zoomText="100%";this.zoomfactor=1;this.prevZoomFactor=1;this.pages=new Array();this.thumbnailPages=new Array();this.pageQuality=new Array();this.visiblePages=new Array();this.thumbnailVisiblePages=new Array();this.docContainBookmark=false;this.bookmarkDataAvailable=false;this.rotationAngle=0;this.viewingInverted=false;this.initialPageHeight=842;this.initialPageWidth=595;this.isFullScreen=false;this.isCurrentPageNumberSet=false;this.thumbnailActive=true;this.bookmarkActive=false;this.thumbnailPageSize={height:140,width:100};this.maxPageWidth=0;this.maxPageHeight=0;this.documentLoaded=false;this.tapped=true;this.serverDocumentPath=null;this.events=new l.EventDispatcher();this.applyRotationTransform=function(y,z,x){switch(this.rotationAngle){case 0:y.translate(0,0);break;case 90:case -270:y.translate(x,0);break;case 180:case -180:y.translate(x,z);break;case 270:case -90:y.translate(0,z);break;case 360:y.translate(0,0);break}return y};this.getZoomText=function(x){var y=null;switch(x){case i.ZOOM25:y="25%";break;case i.ZOOM50:y="50%";break;case i.ZOOM75:y="75%";break;case i.ZOOM100:y="100%";break;case i.ZOOM125:y="125%";break;case i.ZOOM150:y="150%";break;case i.ZOOM200:y="200%";break;case i.ZOOMPAGEWIDTH:y=l.LocalizedStrings.page_fit_width;break;case i.ZOOMACTUALSIZE:y=l.LocalizedStrings.page_fit_actual_size;break;case i.ZOOMPAGEHEIGHT:y=l.LocalizedStrings.page_fit_height;break;case i.ZOOMPAGESIZE:y=l.LocalizedStrings.fit_page;break;case i.ZOOMCUSTOM:y=l.LocalizedStrings.custom_zoom;break;default:y=l.LocalizedStrings.custom_zoom;break}return y};this.uploaderId=v;this.handlerUri=u;this.printingDpi=q.printingDpi;this.viewerDOM=w;this.renderDPI=t;this.zoomValue=i.ZOOM100;this.preferences=q;var p=window;if(typeof p.stardocs==="undefined"){this.serverCom=new l.DOTNETServerCom()}else{this.serverCom=new l.StarDocsServerCom()}this.serverCom.ApplyDigitizationSettings(q.digitizerSettings.digitizationEnabled,q.digitizerSettings.textLanguage,q.interactiveElements.formFields.enableFormFilling,q.interactiveElements.annotations.enableAnnotations,u);if(w!=null){l.UIEvents.click(w.openDoc,function(){$(w.uploader).click()});l.UIEvents.click(w.printBtn,this.onPrintBtnClick,this);l.UIEvents.click(w.saveBtn,this.onSaveBtnClick,this);l.UIEvents.click(w.downloadBtn,this.onDownloadBtnClick,this);l.UIEvents.change(w.downloadAsCmbBox,this.onDownloadDropdownChange,this);l.UIEvents.click(w.firstPage,this.onFirstPageClick,this);l.UIEvents.click(w.lastPage,this.onLastPageClick,this);l.UIEvents.click(w.prevPage,this.onPrevPageClick,this);l.UIEvents.click(w.nextPage,this.onNextPageClick,this);l.UIEvents.blur(w.pageIndicator,this.onPageIndicatorBlur,this);l.UIEvents.keydown(w.pageIndicator,this.onPageIndicatorKeydown,this);l.UIEvents.click(w.pageIndicator,this.onPageIndicatorClick,this);l.UIEvents.click(w.zoomIn,this.onZoomInClick,this);l.UIEvents.click(w.zoomOut,this.onZoomOutClick,this);l.UIEvents.scroll(w.viewableArea,this.onScrollCallback,this);l.UIEvents.scroll(w.thumbnailContent,this.onThumbnailPaneScroll,this);l.UIEvents.click(w.thumbanailBtn,this.onClickThumbnail,this);l.UIEvents.click(w.bookmarkBtn,this.onClickBookmark,this);l.UIEvents.change(w.uploader,function(x){x.preventDefault();var y=w.uploader.files;var z=y[0];if(z==undefined){}else{r.uploadDocument(z,w);$(w.uploader).val("")}});l.UIEvents.change(w.zoomDropdown,this.onZoomDropdownChange,this);var s=$(this.viewerDOM.zoomDropdown).siblings("input");l.UIEvents.keydown(s,this.onZoomTextKeyDown,this);l.UIEvents.blur(s,this.onZoomTextBlur,this);l.UIEvents.click(w.rotatePagesClockwise,this.onRotateClockwiseClick,this);l.UIEvents.click(w.rotatePagesCounterClockwise,this.onRotateCounterClockwiseClick,this);l.UIEvents.click(w.invertBtn,this.onInvertPagesBtnClick,this);l.UIEvents.click(w.redactBtn,this.onRedactionButtonClick,this);l.UIEvents.click(w.fullScreenBtn,this.onFullScreenBtnClick,this);this.events.addEventListener(a.beforeDocumentSaveInternal,this.saveChangesFromPluggableModules);if(this.preferences.navigationPane.enableBookmarks){this.bookmarkTreeView=new l.jsonTreeView(this.viewerDOM.bookmarkContent,null);this.bookmarkTreeView.addClickEvent("tree.click",function(y){var x=y.node;r.performPDFActions(x.actions)})}this.resetViewerSettings();var o=function(){if(r.documentLoaded){r.updateZoomSteps();var z=r.getZoomValue(r.zoomText);if(Number(z)===z&&z%1===0){$(r.viewerDOM.zoomDropdown).siblings("input").val(z+"%")}else{$(r.viewerDOM.zoomDropdown).siblings("input").val(z.toFixed(1)+"%")}var y=r.getZoomValue(l.LocalizedStrings.page_fit_width);var x=r.getZoomValue(l.LocalizedStrings.page_fit_height);if((r.zoomValue==y)||(r.zoomValue==x)){r.reFlowDocument()}r.onToolbarResize.call()}};this.vSplitter=new l.divSplitter(w.viewer,o,this.viewerDOM.viewableArea,false,this.preferences.navigationPane.position);this.calculateThumbnailPageDimentions();$(window).resize(function(){r.vSplitter.refresh();r.refreshToCurrentZoom();r.onToolbarResize.call()});$(this.viewerDOM.sidePaneToggleBtn).on("click",function(){r.refreshLeftRightPanel()});this.setCurrentPage(0)}this.JQueryUIConflicts()}n.prototype.JQueryUIConflicts=function(){$.widget.bridge("jqUiTooltip",$.ui.tooltip)};n.prototype.refreshLeftRightPanel=function(o){if(this.vSplitter==undefined){return}if(o===true){this.preferences.viewSettings.navigationPaneOpened=true;$(this).addClass("toggled");this.vSplitter.setPosition(this.preferences.navigationPane.width,this.vSplitter.rightPanelWidth);$(this.viewerDOM.thumbnailContent).css("overflow","auto");$(this.viewerDOM.bookmarkContent).css("overflow","auto")}else{if(o===false){this.preferences.viewSettings.navigationPaneOpened=false;$(this).removeClass("toggled");this.vSplitter.setPosition(0,this.vSplitter.rightPanelWidth);$(this.viewerDOM.thumbnailContent).css("overflow","hidden");$(this.viewerDOM.bookmarkContent).css("overflow","hidden")}else{$(this).toggleClass("toggled");if(this.vSplitter.getPosition().leftPanelWidth!=0){this.vSplitter.setPosition(0,this.vSplitter.rightPanelWidth);$(this.viewerDOM.thumbnailContent).css("overflow","hidden");$(this.viewerDOM.bookmarkContent).css("overflow","hidden")}else{this.vSplitter.setPosition(this.preferences.navigationPane.width,this.vSplitter.rightPanelWidth);$(this.viewerDOM.thumbnailContent).css("overflow","auto");$(this.viewerDOM.bookmarkContent).css("overflow","auto")}}}this.defaultThumbnailsBookmarkStates();this.onToolbarResize.call()};n.prototype.refreshLeftPane=function(o){if(this.documentLoaded){if(this.vSplitter!=undefined){if(!o){this.vSplitter.setPosition(0,0,true);$(this.viewerDOM.thumbnailContent).css("overflow","hidden");$(this.viewerDOM.bookmarkContent).css("overflow","hidden")}else{this.vSplitter.setPosition(this.preferences.navigationPane.width,0,true);$(this.viewerDOM.thumbnailContent).css("overflow","auto");$(this.viewerDOM.bookmarkContent).css("overflow","auto")}}}};n.prototype.fullscreenchange=function(){var o=window;if(!o.screenfull.isFullscreen){try{$("#external-iframe").remove();document.body.style.overflow="auto"}catch(p){}$(this.viewerDOM.fullScreenBtn).removeClass("git-docviewer-fullScreen-exit");$(this.viewerDOM.fullScreenBtn).addClass("git-docviewer-fullScreen")}else{$(this.viewerDOM.fullScreenBtn).addClass("git-docviewer-fullScreen-exit");$(this.viewerDOM.fullScreenBtn).removeClass("git-docviewer-fullScreen")}};n.prototype.calculateThumbnailPageDimentions=function(){var o=this.preferences.navigationPane.width;var p=this.thumbnailPageSize.width;this.thumbnailPageSize.width=o-100;this.thumbnailPageSize.height=(this.thumbnailPageSize.width/p)*this.thumbnailPageSize.height};n.prototype.refreshToCurrentZoom=function(){this.updateZoomSteps();var q=this.zoomValue;if(Number(q)===q&&q%1===0){$(this.viewerDOM.zoomDropdown).siblings("input").val(q+"%")}else{$(this.viewerDOM.zoomDropdown).siblings("input").val(q.toFixed(1)+"%")}var p=this.getZoomValue(l.LocalizedStrings.page_fit_width);var o=this.getZoomValue(l.LocalizedStrings.page_fit_height);if((this.zoomValue==p)||(this.zoomValue==o)){this.reFlowDocument()}};n.prototype.initializePluggableModules=function(){var p=false;if(this.rightPane!=null){this.rightPane.destroy()}for(var o=0;o<this.pluggableModules.length;o++){if(this.pluggableModules[o].hasPaneToolbar()){p=true;break}}if(p){this.rightPane=new l.RightPane(this.vSplitter,this.viewerDOM.viewer,true);for(var o=0;o<this.pluggableModules.length;o++){if(this.pluggableModules[o].hasPaneToolbar()){this.rightPane.add(this.pluggableModules[o].createPaneToolbarView());this.pluggableModules[o].registerPaneEvents(this.rightPane)}}this.rightPane.setExpandableWidth(261);this.rightPane.collapse();if(this.preferences.viewSettings.navigationPaneOpened){this.refreshLeftRightPanel(true)}}else{if(this.rightPane!=null){this.rightPane.destroy()}this.refreshLeftPane(this.preferences.viewSettings.navigationPaneOpened)}};n.prototype.defaultThumbnailsBookmarkStates=function(){if((this.thumbnailActive==false)||(this.bookmarkActive==false)){if(this.preferences.navigationPane.enableThumbnails){$(this.viewerDOM.thumbanailBtn).parent().children().removeClass("toggled");$(this.viewerDOM.thumbanailBtn).addClass("toggled");$(this.viewerDOM.bookmarkContent).hide();$(this.viewerDOM.thumbnailContent).show();this.bookmarkActive=false;this.thumbnailActive=true}else{if(this.preferences.navigationPane.enableBookmarks){$(this.viewerDOM.bookmarkBtn).parent().children().removeClass("toggled");$(this.viewerDOM.bookmarkBtn).addClass("toggled");$(this.viewerDOM.bookmarkContent).show();$(this.viewerDOM.thumbnailContent).hide();this.bookmarkActive=true;this.thumbnailActive=false}}}};n.prototype.resizePagesOnViewerSizeChanges=function(){this.vSplitter.refresh();if(this.documentLoaded){this.refreshToCurrentZoom()}};n.prototype.registerPluggableModule=function(o){this.pluggableModules.push(o);o.initialize(this,this.serverCom)};n.prototype.saveChangesFromPluggableModules=function(q){var o=jQuery.Deferred();var t=q.viewerManager;var s={};if(t.pluggableModules.length<2){return}for(var p=0;p<t.pluggableModules.length;p++){var r=t.pluggableModules[p].onBeforeSave(t);if(r!=null){s[r.module]=r.value}}if(!$.isEmptyObject(s)){t.pluggableModules[0].serverCom.saveDocumentChanges(t.revisionUri,s).done(function(v){if(v.documents!=null&&v.documents[0]!=null){t.revisionUri=v.documents[0].url}for(var u=0;u<t.pluggableModules.length;u++){t.pluggableModules[u].onAfterSave(t,v)}o.resolve()}).fail(function(u){o.reject()});return o.promise()}else{return o.resolve().promise()}};n.prototype.uploadDocument=function(p,o){var q=this;this.password="";this.passwordAttemptCount=0;this.events.dispatchAll(a.beforeDocumentUpload,{documentUploadCancel:this.documentUploadCancel,viewerManager:this});if(this.documentUploadCancel==true){return}this.viewerDOM.progressAnimation.showAnimation("Uploading document to server...");this.serverCom.uploadDocument(p,this.uploaderId,this.handlerUri).done(function(r){k.logInfo("Response: Action:uploadDocument, states: succeeded, documentURI:"+r.documents[0].url);q.viewerDOM.progressAnimation.hideAnimation();q.documentid=q.generateGuid();q.documentUri=r.documents[0].url;q.revisionUri=q.documentUri;q.events.dispatchAll(a.afterDocumentUpload,{documentUri:q.documentUri,viewerManager:q});q._loadDocument()}).fail(function(r){q.viewerDOM.progressAnimation.hideAnimation();q.resetViewerSettings();k.logError("Response: Action:uploadDocument, failed "+r)})};n.prototype.resetViewerSettings=function(){var t=this;$(this.viewerDOM.pageIndicator).removeClass("inputPageCountProgress");$(this.viewerDOM.viewableArea).html("");$(this.viewerDOM.thumbnailContent).html("");$(this.viewerDOM.bookmarkContent).html("");$(this.viewerDOM.thumbnailContent).css("overflow","auto");$(this.viewerDOM.bookmarkContent).css("overflow","auto");$(this.viewerDOM.thumbnailContent).show();$(this.viewerDOM.bookmarkContent).hide();$(this.viewerDOM.thumbanailBtn).parent().children().removeClass("toggled");$(this.viewerDOM.thumbanailBtn).addClass("toggled");$(this.viewerDOM.bookmarkBtn).attr("disabled","true");if(this.viewerDOM.downloadAsCmbBox!=undefined){this.viewerDOM.downloadAsCmbBox.value=".temp"}this.serverDocumentPath=null;this.bookmarkDataAvailable=false;this.docContainBookmark=false;this.pageRegionSelectable=false;this.pageCount=0;this.currentPage=0;this.pages.length=0;this.thumbnailPages.length=0;this.thumnailPageRenderingState.length=0;this.pageRenderingState.length=0;this.nextPageNumber=0;this.prevPageNumber=0;this.flipBoudaryPageOrder=false;this.boundaryPagesReady=false;this.documentRenderingCompleted=false;this.maxPageWidth=0;this.maxPageHeight=0;this.documentLoaded=false;this.updateZoomSteps();if(this.rightPane!=null){this.rightPane.collapse()}switch(this.preferences.viewSettings.zoomValue){case d.actualSize:this.zoomValue=i.ZOOMACTUALSIZE;break;case d.fitHeight:this.zoomValue=i.ZOOMPAGEHEIGHT;break;case d.fitWidth:this.zoomValue=i.ZOOMPAGEWIDTH;break;case i.ZOOM25:this.zoomValue=i.ZOOM25;break;case i.ZOOM50:this.zoomValue=i.ZOOM50;break;case i.ZOOM100:this.zoomValue=i.ZOOM100;break;case i.ZOOM150:this.zoomValue=i.ZOOM150;break;case i.ZOOM200:this.zoomValue=i.ZOOM200;break;default:this.zoomValue=this.preferences.viewSettings.zoomValue;i.ZOOMCUSTOM=this.preferences.viewSettings.zoomValue;break}if(this.documentLoaded){var r=this.zoomValue;if(Number(r)===r&&r%1===0){$(this.viewerDOM.zoomDropdown).siblings("input").val(r+"%")}else{$(this.viewerDOM.zoomDropdown).siblings("input").val(r.toFixed(1)+"%")}}else{$(this.viewerDOM.zoomDropdown).siblings("input").val("100%")}this.zoomText=this.getZoomText(this.zoomValue);this.zoomfactor=1;this.prevZoomFactor=1;this.rotationAngle=0;this.viewingInverted=false;var o=window;if(typeof o.stardocs==="undefined"){this.serverCom=new l.DOTNETServerCom()}else{this.serverCom=new l.StarDocsServerCom()}this.setCurrentPage(this.currentPage);this.updatePageNavButtonState();this.hideMessageBox();var q=null;var s=this;$(this.viewerDOM.zoomDropdown).find("option").each(function(){if($(t).text().toLowerCase()==s.zoomText.toLowerCase()){q=$(t)}else{$(t).prop("selected",true).siblings().removeAttr("selected")}});$(q).prop("selected",true);var p=this.preferences.viewSettings.zoomValue;if(p==d.fitWidth||p==d.fitHeight||p==d.actualSize){this.setZoomMode(p)}else{this.zoomTo(p)}this.rotateTo(this.preferences.viewSettings.rotationAngle);if(this.preferences.viewSettings.colorInversionApplied){this.invertColors(true)}this.setToolbarButtonUIState()};n.prototype.s4=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};n.prototype.generateGuid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()};n.prototype.getPageInfoAtScrollPos=function(p){var u=new h();var w;var r=this.viewerDOM.viewableArea;var s=this.documentid;w=$(r).outerHeight(true);var t=Number(r.scrollTop);var q=1,v=0;for(q=1;q<=Number(this.pageCount);q++){var o=$("#"+this.documentid+q);v=v+$("#"+s+q).outerHeight(true);if(v>=t){u.pageNumber=q;u.scrollXPos=$(r).scrollLeft()/p;u.scrollYPos=(t-o[0].offsetTop)/p;break}}k.logInfo("Getting page info at current scroll pos "+q);return u};n.prototype.setScrollPos=function(r,p){if(p===void 0){p=false}var s=this.viewerDOM.viewableArea;var q=$("#"+this.documentid+r.pageNumber);if(q!=null&&q[0]!=null){if(p&&(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270)){var o=q[0].offsetTop;var t=q[0].offsetLeft}else{var o=q[0].offsetTop+r.scrollYPos*this.zoomfactor;var t=q[0].offsetLeft+r.scrollXPos*this.zoomfactor}$(s).scrollTop(o);$(s).scrollLeft(t)}};n.prototype._loadDocument=function(){var p=this;var o=jQuery.Deferred();this.events.dispatchAll(a.beforeDocumentLoad,{documentUri:this.documentUri,documentLoadCancel:this.documentLoadCancel,viewerManager:this});if(this.documentLoadCancel.value==true){return}this.viewerDOM.progressAnimation.showAnimation("Loading document...");this.resetViewerSettings();k.logInfo("Action: _loadDocument, Resetting viewer settings to default");this.serverCom.getDocInfo(this.documentUri,this.password,this.renderDPI,this.printingDpi).done(function(r){k.logInfo("Response: Action : getDocInfo, states: succeeded, MimeType:"+r.mimeType+" , PageCount : "+r.pageCount);p.mimeType=r.mimeType;p.docContainBookmark=r.containsBookmarks;if(!r.containsBookmarks){$(p.viewerDOM.bookmarkBtn).attr("disabled","true")}else{$(p.viewerDOM.bookmarkBtn).removeAttr("disabled")}p.revisionUri=p.documentUri;p.events.dispatchAll(a.docInfoRetrieved,{mimeType:p.mimeType,containsForm:r.containsForm,containsAnnots:r.containsAnnots,allowCommenting:r.allowCommenting,viewerManager:p});if(r.pageCount==0||r.pageCount==-1){p.isCurrentPageNumberSet=false;p.pageCount=0;p.setCurrentPage(0)}else{p.isCurrentPageNumberSet=true;p.pageCount=parseInt(r.pageCount);p.setCurrentPage(1)}$(p.viewerDOM.pageIndicator).addClass("inputPageCountProgress");k.logInfo("Creating Blank Pages, Page Count : "+p.pageCount);for(var q=1;q<=p.pageCount;q+=1){p.createBlankPage(q)}if(p.isCurrentPageNumberSet){p.viewerDOM.progressAnimation.hideAnimation()}p.updateThumbnailsVisiblePages();p.updateThumbnailPageSelectionState(p.currentPage);k.logInfo("Requesting for first page from server...");p.requestFromServerAndRenderPage(1);p.documentLoaded=true;p.setToolbarButtonUIState();if(p.mimeType=="application/pdf"){$(p.viewerDOM.redactBtn).removeAttr("disabled");if(p.preferences.visibleFileOperationControls.save){$(p.viewerDOM.saveBtn).show()}}else{$(p.viewerDOM.redactBtn).attr("disabled","disabled");$(p.viewerDOM.saveBtn).hide()}o.resolve({mimetype:r.mimeType,documentUri:p.documentUri});p.events.dispatchAll(a.afterDocumentLoad,{viewerManager:p});p.initializePluggableModules()}).fail(function(q){p.resetViewerSettings();p.viewerDOM.progressAnimation.hideAnimation();o.reject(q);k.logError("Failed from DocInfo server call")});return o.promise()};n.prototype.updateThumbnailPageSelectionState=function(o){if(this.preferences.navigationPane.enableThumbnails){$(this.viewerDOM.thumbnailContent).find(".git-viewer-thumbnail-page-active").removeClass("git-viewer-thumbnail-page-active");$("#"+this.documentid+"thumb"+o).addClass("git-viewer-thumbnail-page-active")}};n.prototype.loadDocument=function(r,q,o,p){this.documentid=this.generateGuid();this.password=q;this.documentUri=r;this.revisionUri=r;return this._loadDocument()};n.prototype.loadDocumentFromServer=function(p){var o=this;this.resetViewerSettings();this.viewerDOM.progressAnimation.showAnimation("Loading document from server...");k.logInfo("Action: uploadDocumentFromUri, Resetting viewer settings to default");this.serverCom.loadDocumentFromServer(p,this.handlerUri).done(function(q){k.logInfo("Response: Action:loadDocumentFromServer, states: succeeded, documentURI:"+q.documents[0].url);o.viewerDOM.progressAnimation.hideAnimation();o.documentid=o.generateGuid();o.documentUri=q.documents[0].url;o.revisionUri=o.documentUri;o.events.dispatchAll(a.afterDocumentUpload,{documentUri:o.documentUri,viewerManager:o});o._loadDocument()}).fail(function(q){o.viewerDOM.progressAnimation.hideAnimation();k.logError("Response: Action:uploadDocument, failed "+q)})};n.prototype.uploadDocumentFromUri=function(o){var p=this;this.resetViewerSettings();this.viewerDOM.progressAnimation.showAnimation("Uploading document to server...");k.logInfo("Action: uploadDocumentFromUri, Resetting viewer settings to default");this.serverCom.uploadDocumentFromUri(o,this.handlerUri).done(function(q){k.logInfo("Response: Action:uploadDocumentFromUri, states: succeeded, documentURI:"+q.documents[0].url);p.viewerDOM.progressAnimation.hideAnimation();p.documentid=p.generateGuid();p.documentUri=q.documents[0].url;p.revisionUri=p.documentUri;p.events.dispatchAll(a.afterDocumentUpload,{documentUri:p.documentUri,viewerManager:p});p._loadDocument()}).fail(function(q){p.viewerDOM.progressAnimation.hideAnimation();k.logError("Response: Action:uploadDocument, failed "+q)})};n.prototype.closeDocument=function(r){var q=this;var o=jQuery.Deferred();this.events.dispatchAll(a.beforeDocumentClose,{documentUri:this.documentUri,documentCloseCancel:this.documentCloseCancel,viewerManager:this});if(this.documentCloseCancel.value==true){return}var p=this.documentUri;if(r==this.documentUri){this.documentLoaded=false;this.resetViewerSettings()}k.logInfo("Action: closeDocument, Resetting viewer settings to default");if(p!=""){this.serverCom.disposeDocument(p).done(function(s){k.logInfo("Action: closeDocument, Resetting viewer settings to default");q.events.dispatchAll(a.afterDocumentClose,{viewerManager:q});o.resolve({documentUri:s[0]})}).fail(function(s){o.reject()})}return o.promise()};n.prototype.uploadDocumentFromBuffer=function(o){var p=this;this.events.dispatchAll(a.beforeDocumentUpload,{documentUploadCancel:this.documentUploadCancel,viewerManager:this});if(this.documentUploadCancel==true){return}this.viewerDOM.progressAnimation.showAnimation("Uploading document to server...");this.resetViewerSettings();k.logInfo("Action: uploadDocumentFromBuffer, Resetting viewer settings to default");this.serverCom.uploadDocumentFromBuffer(o,this.handlerUri).done(function(q){k.logInfo("Response: Action:uploadDocumentFromBuffer, states: succeeded, documentURI:"+q.documents[0].url);p.viewerDOM.progressAnimation.hideAnimation();p.documentid=p.generateGuid();p.documentUri=q.documents[0].url;p.events.dispatchAll(a.afterDocumentUpload,{documentUri:p.documentUri,viewerManager:p});p._loadDocument()}).fail(function(q){this.viewerDOM.progressAnimation.hideAnimation();k.logError("Response: Action:uploadDocument, failed "+q)})};n.prototype.getServerDocumentURI=function(){var o=this.documentUri;k.logInfo("Action: closeDocument, Resetting viewer settings to default");if(o!=""){return this.serverCom.getDocumentAbsolutePath(o)}};n.prototype.download=function(){return this.downloadDocument(null)};n.prototype.downloadAs=function(o){return this.downloadDocument(o)};n.prototype.print=function(){return this.printDocument()};n.prototype.firstPage=function(){this.scrolToPage(1)};n.prototype.prevPage=function(){this.scrolToPage(this.getPrevPageNumber())};n.prototype.nextPage=function(){this.scrolToPage(this.getNextPageNumber())};n.prototype.lastPage=function(){if(this.currentPage<this.pageCount){this.scrolToPage(this.pageCount)}};n.prototype.zoomIn=function(){this.zoom("in",null)};n.prototype.zoomOut=function(){this.zoom("out",null)};n.prototype.rotatePagesClockwise=function(){this.rotate(true)};n.prototype.rotatePagesCounterClockwise=function(){this.rotate(false)};n.prototype.invertColors=function(o){this.invertPages(o)};n.prototype.gotoPage=function(o){this.scrolToPage(o)};n.prototype.save=function(){return this.saveDocument()};n.prototype.downScaleCanvas=function(p,V){k.logInfo("Downscaling the canvas");if((V<1)&&(V>0)){var C=V*V;var z=p.width;var Q=p.height;var T=(z*V).toFixed();var q=(Q*V).toFixed();var x=0,v=0,E=0;var R=0,O=0,u=0,L=0;var A=0,y=0;var t=0,N=0,S=0,J=0,P=0,I=0;var M=false;var K=false;var H=p.getContext("2d").getImageData(0,0,z,Q).data;var D=new Float32Array(3*T*q);var r=0,B=0,G=0;for(v=0;v<Q;v++){O=v*V;y=0|O;u=3*y*T;K=(y!=(0|O+V));if(K){P=(y+1-O);I=(O+V-y-1)}for(x=0;x<z;x++,E+=4){R=x*V;A=0|R;L=u+A*3;M=(A!=(0|R+V));if(M){S=(A+1-R);J=(R+V-A-1)}r=H[E];B=H[E+1];G=H[E+2];if(!M&&!K){D[L]+=r*C;D[L+1]+=B*C;D[L+2]+=G*C}else{if(M&&!K){t=S*V;D[L]+=r*t;D[L+1]+=B*t;D[L+2]+=G*t;N=J*V;D[L+3]+=r*N;D[L+4]+=B*N;D[L+5]+=G*N}else{if(K&&!M){t=P*V;D[L]+=r*t;D[L+1]+=B*t;D[L+2]+=G*t;N=I*V;D[L+3*T]+=r*N;D[L+3*T+1]+=B*N;D[L+3*T+2]+=G*N}else{t=S*P;D[L]+=r*t;D[L+1]+=B*t;D[L+2]+=G*t;N=J*P;D[L+3]+=r*N;D[L+4]+=B*N;D[L+5]+=G*N;N=S*I;D[L+3*T]+=r*N;D[L+3*T+1]+=B*N;D[L+3*T+2]+=G*N;N=J*I;D[L+3*T+3]+=r*N;D[L+3*T+4]+=B*N;D[L+3*T+5]+=G*N}}}}}var U=document.createElement("canvas");$(U).addClass("canvas_image");U.width=T;U.height=q;var s=U.getContext("2d");var F=s.getImageData(0,0,T,q);var W=F.data;var o=0;for(E=0,L=0;o<T*q;E+=3,L+=4,o++){W[L]=Math.ceil(D[E]);W[L+1]=Math.ceil(D[E+1]);W[L+2]=Math.ceil(D[E+2]);W[L+3]=255}s.putImageData(F,0,0);return U}return p};n.prototype.updateThumbnailsVisiblePages=function(){if(this.thumbnailActive){var v=10;var x;var s=$(this.viewerDOM.thumbnailContent);var u=this.documentid;this.thumbnailVisiblePages.length=0;x=$(s).height();k.logInfo("Action:updateThumbnailsVisiblePages, thumbnailContent Height "+x);var t=Number($(s).scrollTop());k.logInfo("Action:updateThumbnailsVisiblePages, thumbnailContent scroll start position "+t);var o=t+x+v;k.logInfo("Action:updateThumbnailsVisiblePages, thumbnailContent scroll end position "+o);var q=1,r=0;var w=0;var p=this;$(this.viewerDOM.thumbnailContent).children("div").each(function(y){w=$(this).outerHeight();r=r+w;if((r>=t)&&(r<=o)){p.thumbnailVisiblePages.push(y+1)}if(r>o){return false}})}};n.prototype.createBlankPage=function(p){var q=this;var o;var s;var r;var x="style";var u="";if(this.documentid==null){r=this.generateGuid();this.documentid=(r)}else{r=this.documentid}s=document.createElement("div");s.id=r+p;s.className="git-docviewer-page";$(s).addClass("git-docviewer-page-drag");$(s).css({"background-color":"#FFF","border-color":"transparent",position:"relative",display:"block","margin-bottom":"10px",padding:"0px",width:"700px",height:"800px"});$(s).on("click",function(){this.selectedPage=p});if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(s).height((this.initialPageHeight*this.zoomfactor).toFixed());$(s).width((this.initialPageWidth*this.zoomfactor).toFixed())}else{$(s).width((this.initialPageHeight*this.zoomfactor).toFixed());$(s).height((this.initialPageWidth*this.zoomfactor).toFixed())}$(this.viewerDOM.viewableArea).append(s);this.pageRenderingState[p]=f.BLANK;if(this.preferences.navigationPane.enableThumbnails){var w=document.createElement("div");$(w).attr("id",r+"thumb"+p);$(w).addClass("git-viewer-thumbnail-page");$(w).height(this.thumbnailPageSize.height);$(w).width(this.thumbnailPageSize.width);var t=document.createElement("div");$(t).attr("class","thumbPageIndicator");$(t).css({"text-align":"center",color:"white"});$(t).html(p.toString());var v=document.createElement("div");$(v).addClass("git-viewer-thumbnail-page-container");$(v).on("click",function(){q.scrolToPage(p)});$(v).append(w);$(v).append(t);$(this.viewerDOM.thumbnailContent).append(v)}this.thumnailPageRenderingState[p]=f.BLANK;this.events.dispatchAll(a.blankPageCreated,{pageNumber:p,viewerManager:this})};n.prototype.appendAtPosition=function(o,p,r){k.logInfo("Appending the element at position "+o);var q=$(p).children().length;if(o<0){o=Math.max(0,q+1+o)}$(p).append(r);if(o<q){$(p).children().eq(o).before($(p).children().last())}return $(p)};n.prototype.reRenderThumbnailPage=function(t){k.logInfo("Action:reRenderThumbnailPages, Re-rendering thumbnail page number "+t);var p=new m(null,this.thumbnailPageSize.width,this.thumbnailPageSize.height);if(this.thumnailPageRenderingState[t]==f.FINISHED){if(!((this.pages[t]==null)&&(this.thumbnailPages[t]==null))){p.image=this.thumbnailPages[t].image}}var x=this.documentid;var q=$("#"+x+"thumb"+t);var u=$(q).find("canvas")[0];if(u==null){u=document.createElement("canvas");$(u).addClass("canvas_image");u.id=x+"thumb_canvas_"+t;$(q).append(u)}u.height=p.height;u.width=p.width;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(q).height(p.height);$(q).width(p.width)}else{$(q).width(p.height);$(q).height(p.width);var y=u.height;u.height=u.width;u.width=y}var A=u.getContext("2d");var r=p.image;if(r!=null){var v=u.width,s=u.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var y=v;v=s;s=y}A=this.applyRotationTransform(A,u.height,u.width);A.rotate(this.getRadianAngle(this.rotationAngle));A.drawImage(r,0,0,v,s);if(this.viewingInverted){this.convertCanvasImageToInvertedImage(r,A,u.width,u.height)}var z,o;if(this.thumbnailPages[t]!=null){z=this.thumbnailPages[t].width;o=this.thumbnailPages[t].height}else{if(this.pages[t]!=null){z=this.pages[t].width;o=this.pages[t].height}}this.events.dispatchAll(a.afterPageDraw,{pageNumber:t,context:A,source:"thumbnail",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:this.thumbnailPageSize.width/z,scaleY:this.thumbnailPageSize.height/o,actualPageWidth:z,actualPageHeight:o,viewerManager:this})}};n.prototype.reRenderPage=function(t){k.logInfo("Action:reRenderPage, Re-rendering the page number "+t);var p=new m(null,this.initialPageWidth,this.initialPageHeight);if((this.pageRenderingState[t]==f.FINISHED)||(this.thumnailPageRenderingState[t]==f.FINISHED)){if(!((this.pages[t]==null)&&(this.thumbnailPages[t]==null))){p=this.pages[t]!=null?this.pages[t]:this.thumbnailPages[t]}}var q=$("#"+this.documentid+t);if(q!=null){var x=$(q).find("canvas")[0];var A=this.zoomfactor;if(x==null){x=document.createElement("canvas");$(x).addClass("canvas_image");x.id=this.documentid+"_canvas_"+t;$(q).append(x)}x.height=(p.height*A).toFixed();x.width=(p.width*A).toFixed();var y=x.width,s=x.height;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){var v=$(q).height();$(q).height((p.height*this.zoomfactor).toFixed());$(q).width((p.width*this.zoomfactor).toFixed());var u=$(q).height();if(this.currentPage>t){if(parseInt(x.offsetTop,10)<$(this.viewerDOM.viewableArea).scrollTop()){if(((u-v)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){$(this.viewerDOM.viewableArea).scrollTop($(this.viewerDOM.viewableArea).scrollTop()+u-v)}}}}else{var v=$(q).height();$(q).width((p.height*this.zoomfactor).toFixed());$(q).height((p.width*this.zoomfactor).toFixed());var z=x.height;x.height=x.width;x.width=z;var u=$(q).height();if(parseInt(q[0].offsetTop,10)<parseInt($(this.viewerDOM.viewableArea).scrollTop().toString(),10)){if(((u-v)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){$(this.viewerDOM.viewableArea).scrollTop($(this.viewerDOM.viewableArea).scrollTop()+u-v)}}}var C=x.getContext("2d");var r=p.image;if(r!=null){var y=x.width,s=x.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var z=y;y=s;s=z}C=this.applyRotationTransform(C,x.height,x.width);C.rotate(this.getRadianAngle(this.rotationAngle));C.drawImage(r,0,0,y,s);if(this.viewingInverted){this.convertCanvasImageToInvertedImage(r,C,x.width,x.height)}this.events.dispatchAll(a.pageReRendered,{pageNumber:t,viewerManager:this,context:C});var o=p.height;var B=p.width;this.events.dispatchAll(a.afterPageDraw,{pageNumber:t,context:C,source:"viewer",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:A,scaleY:A,actualPageWidth:B,actualPageHeight:o,viewerManager:this})}}return p};n.prototype.showMessageBox=function(p,o){if(this.viewerDOM.messageBox!=null){this.viewerDOM.messageBox.show(p,o)}};n.prototype.hideMessageBox=function(){if(this.viewerDOM.messageBox!=null){this.viewerDOM.messageBox.hide()}};n.prototype.drawThumbnailPage=function(t,r){var u=this;var z=this.documentid;var o=$("#"+z+"thumb"+t);var v=$(o).find("canvas")[0];if(v==null){v=document.createElement("canvas");$(v).addClass("canvas_image");v.id=z+"thumb_canvas_"+t;$(o).append(v)}var A=this.thumbnailPageSize.height;var p=this.thumbnailPageSize.width;v.height=A;v.width=p;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(o).height(A);$(o).width(p)}else{$(o).width(A);$(o).height(p);var y=v.height;v.height=v.width;v.width=y}var B=v.getContext("2d");B=this.applyRotationTransform(B,v.height,v.width);B.rotate(this.getRadianAngle(this.rotationAngle));var x=v.width,s=v.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var y=x;x=s;s=y}var q=new Image();q.onload=function(w){B.drawImage(q,0,0,x,s);if(u.viewingInverted){u.convertCanvasImageToInvertedImage(q,B,v.width,v.height)}u.events.dispatchAll(a.afterPageDraw,{pageNumber:t,context:B,source:"thumbnail",zoomPercentage:u.zoomValue,rotationAngle:u.rotationAngle,scaleX:p/u.thumbnailPages[t].width,scaleY:A/u.thumbnailPages[t].height,actualPageWidth:u.thumbnailPages[t].width,actualPageHeight:u.thumbnailPages[t].height,viewerManager:u})};if(r.image!=null){q.src="data:image/png;base64,"+r.image}return q};n.prototype.drawPage=function(u,s,B){var x=this;var E=this.documentid;var o=$("#"+E+u);var z=$(o).find("canvas")[0];if(z==null){z=document.createElement("canvas");$(z).addClass("canvas_image");z.id=E+"_canvas_"+u;z.width=$(o).width();z.height=$(o).height();$(o).append(z)}if(!B){s.height=this.maxPageHeight;s.width=this.maxPageWidth}if(B){var p=(s.width*this.zoomfactor).toFixed();var D=(s.height*this.zoomfactor).toFixed();$(o).height(D);$(o).width(p);z.width=p;z.height=D;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){var y=$(o).height();var v=D;if(this.currentPage>u){if(parseInt(z.offsetTop,10)<$(this.viewerDOM.viewableArea).scrollTop()){if(((v-y)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){var q=$(this.viewerDOM.viewableArea).scrollTop();$(this.viewerDOM.viewableArea).scrollTop(q+(v-y))}}}}else{var y=$(o).height();$(o).width(D);$(o).height(p);z.width=D;z.height=p;var v=D;if(this.currentPage>u){if(parseInt(o[0].offsetTop,10)<parseInt($(this.viewerDOM.viewableArea).scrollTop().toString(),10)){if(((v-y)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){$(this.viewerDOM.viewableArea).scrollTop($(this.viewerDOM.viewableArea).scrollTop()+v-y)}}}}}var F=z.getContext("2d");F=this.applyRotationTransform(F,z.height,z.width);F.rotate(this.getRadianAngle(this.rotationAngle));var A=z.width,t=z.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var C=A;A=t;t=C}var r=new Image();r.onload=function(w){F.drawImage(r,0,0,A,t);if(x.viewingInverted){x.convertCanvasImageToInvertedImage(r,F,z.width,z.height)}k.logInfo("Rendering Completed for pagenumber: "+u);x.events.dispatchAll(a.afterPageDraw,{pageNumber:u,context:F,source:"viewer",zoomPercentage:x.zoomValue,rotationAngle:x.rotationAngle,scaleX:x.zoomfactor,scaleY:x.zoomfactor,actualPageWidth:s.width,actualPageHeight:s.height,viewerManager:x});if(B){x.events.dispatchAll(a.pageRendered,{pageNumber:u,viewerManager:x})}};if(s.image!=null){r.src="data:image/png;base64,"+s.image}k.logInfo("Returning img for pagenumber: "+u);return r};n.prototype.requestFromServerAndRenderThumbnailPage=function(o){var r=this;k.logInfo("Requesting the server for thumbnail page "+o);var p=this.documentid;this.thumnailPageRenderingState[o]=f.RUNNING;var q=!this.preferences.interactiveElements.formFields.enableFormFilling;this.serverCom.getPageThumbnail(this.documentUri,o,q).done(function(u){var s=r.drawThumbnailPage(o,u);if(r.pageRenderingState[o]==f.BLANK){var v=r.drawPage(o,u,false)}k.logInfo("requestFromServerAndRenderThumbnailPage : drawing thumbnail page to view page and thumb page, pagenumber:  "+o);if(r.thumbnailPages[o]==null){var t=new m(s,u.width,u.height);r.thumbnailPages[o]=t;r.thumnailPageRenderingState[o]=f.FINISHED;r.PrioritizeAndRenderPages()}}).fail(function(t){k.logError("Response: Action : getPage, states: failed, Pagenumber : "+o);r.updateThumbnailsVisiblePages[o]=f.ERROR;if(r.thumbnailPages[o]==null){var s=new m(null,t.width,t.height);r.thumbnailPages[o]=s;r.PrioritizeAndRenderPages()}})};n.prototype.requestFromServerAndRenderPage=function(o){var s=this;k.logInfo("Requesting the server for the page "+o);var q=this.documentid;this.pageRenderingState[o]=f.RUNNING;var r=!this.preferences.interactiveElements.formFields.enableFormFilling;var p=this.preferences.interactiveElements.annotations.enableAnnotations;this.serverCom.getPage(this.documentUri,o,this.renderDPI,r,p).done(function(y){if(y.renderingComplete){$(s.viewerDOM.pageIndicator).removeClass("inputPageCountProgress")}if((y.renderingComplete)&&(y.image==null)&&(y.loadedPageCount==s.pageCount)){s.documentRenderingCompleted=y.renderingComplete;return}k.logInfo("Response: Action : getPage, states: succeeded, Pagenumber : "+o+" ,loadedPageCount:"+y.loadedPageCount+" , renderingCompleted : "+y.renderingComplete+", Width:"+y.width+" ,Height: "+y.height);if(s.documentid==q){var v=false;if(s.maxPageWidth<y.width){s.maxPageWidth=y.width.toFixed();v=true}if(s.maxPageHeight<y.height){s.maxPageHeight=y.height.toFixed();v=true}if(v){s.updateZoomSteps();var w=s.getZoomValue(s.zoomText);if(Number(w)===w&&w%1===0){$(s.viewerDOM.zoomDropdown).siblings("input").val(w+"%")}else{$(s.viewerDOM.zoomDropdown).siblings("input").val(w.toFixed(1)+"%")}}if(s.documentRenderingCompleted==false){if(s.pageCount!=y.loadedPageCount){for(var u=s.pageCount+1;u<=y.loadedPageCount;u+=1){s.createBlankPage(u)}}if(y.loadedPageCount>s.pageCount){s.pageCount=y.loadedPageCount}s.updatePageNavButtonState()}s.documentRenderingCompleted=y.renderingComplete;if(s.documentRenderingCompleted){$(s.viewerDOM.pageIndicator).removeClass("inputPageCountProgress")}if(!s.isCurrentPageNumberSet){if(y.loadedPageCount>0){s.pageCount=parseInt(y.loadedPageCount);s.setCurrentPage(1);s.isCurrentPageNumberSet=true;s.viewerDOM.progressAnimation.hideAnimation()}}var t=s.drawPage(o,y,true);if(s.pages[o]==null){var x=new m(t,y.width,y.height);s.pages[o]=x;s.pageRenderingState[o]=f.FINISHED;s.PrioritizeAndRenderPages()}}}).fail(function(v){s.viewerDOM.progressAnimation.hideAnimation();if(v.renderingComplete){$(s.viewerDOM.pageIndicator).removeClass("inputPageCountProgress")}var t=true;if((v.renderingComplete)&&(v.loadedPageCount==s.pageCount)){s.documentRenderingCompleted=v.renderingComplete;if(o>v.loadedPageCount){t=false}}if(t){k.logError("Response: Action : getPage, states: failed, Pagenumber : "+o);s.pageRenderingState[o]=f.ERROR;if(s.pages[o]==null){var u=new m(null,v.width,v.height);s.pages[o]=u}s.PrioritizeAndRenderPages()}})};n.prototype.isPageRendered=function(o){var p=false;if(this.pageRenderingState[o]!=f.BLANK){p=true}return p};n.prototype.isthumbanilaPageRendered=function(o){var p=false;if(this.thumnailPageRenderingState[o]!=f.BLANK){p=true}return p};n.prototype.isBookmarkReady=function(){var o=false;if(this.preferences.navigationPane.enableBookmarks){if(this.docContainBookmark){if(!this.bookmarkDataAvailable){o=true}}}return o};n.prototype.fetchAndRenderBoomark=function(){var o=this;this.serverCom.getDocBookmarks(this.documentUri).done(function(p){o.bookmarkDataAvailable=true;p=JSON.parse(JSON.stringify(p).split('"text":').join('"label":'));o.bookmarkTreeView.loadNewData(p);o.PrioritizeAndRenderPages()})};n.prototype.prioritizeThumbnailPages=function(){var p=false;if(this.preferences.navigationPane.enableThumbnails){for(var o=0;o<this.thumbnailVisiblePages.length;o++){if(!this.isthumbanilaPageRendered(this.thumbnailVisiblePages[o])){this.requestFromServerAndRenderThumbnailPage(this.thumbnailVisiblePages[o]);p=true;break}}}return p};n.prototype.PrioritizeAndRenderPages=function(){if(!this.prioritizeThumbnailPages()){var o=null;if(!this.isPageRendered(this.currentPage)){o=this.currentPage}else{if(this.isBookmarkReady()){this.fetchAndRenderBoomark();return false}else{if(!this.isPageRendered(this.nextPageNumber)){o=this.nextPageNumber}else{if(!this.isPageRendered(this.prevPageNumber)){o=this.prevPageNumber}else{if((this.documentRenderingCompleted)&&(!this.isPageRendered(this.pageCount))){o=this.pageCount}else{if(this.preferences.navigationPane.enableThumbnails){o=this.flipflopThumbnailPage();if(o!=null){k.logInfo("Action: PrioritizeAndRenderPages, requesting server for thumbnail page number : "+o);this.requestFromServerAndRenderThumbnailPage(o);return false}}else{o=this.flipflopViewPage()}}}}}}if(o!=null){k.logInfo("Action: PrioritizeAndRenderPages, requesting server for page number : "+o);this.requestFromServerAndRenderPage(o)}else{if(!this.documentRenderingCompleted){o=this.pageCount+1;this.requestFromServerAndRenderPage(o)}}}};n.prototype.flipflopViewPage=function(){var p=null;for(var s=1;s<=2;s++){if(this.flipBoudaryPageOrder){var t=parseInt(this.currentPage.toString())+50;t=Math.min(t,this.pageCount);for(var r=this.currentPage;r<=t;r+=1){if(!this.isPageRendered(r)){p=r;break}}}else{var o=parseInt(this.currentPage.toString())-50;o=Math.max(o,1);for(var q=this.currentPage;q>=o;q-=1){if(!this.isPageRendered(q)){p=q;break}}}this.flipBoudaryPageOrder=this.flipBoudaryPageOrder==true?false:true}if(p==null){this.boundaryPagesReady=true}else{this.boundaryPagesReady=false}return p};n.prototype.flipflopThumbnailPage=function(){var p=null;for(var s=1;s<=2;s++){if(this.flipBoudaryPageOrder){var t=parseInt(this.currentPage.toString())+50;t=Math.min(t,this.pageCount);for(var r=this.currentPage;r<=t;r+=1){if(!this.isthumbanilaPageRendered(r)){p=r;break}}}else{var o=parseInt(this.currentPage.toString())-50;o=Math.max(o,1);for(var q=this.currentPage;q>=o;q-=1){if(!this.isthumbanilaPageRendered(q)){p=q;break}}}this.flipBoudaryPageOrder=this.flipBoudaryPageOrder==true?false:true}if(p==null){this.boundaryPagesReady=true}else{this.boundaryPagesReady=false}return p};n.prototype.zoomTo=function(o){if(o>=1&&o<=300){this.zoom(l.LocalizedStrings.custom_zoom,o)}};n.prototype.setZoomMode=function(o){if(this.documentLoaded){var p=this.getZoomValueForZoomMode(o);this.zoom("predefined",p)}};n.prototype.rotateClockwise=function(){this.rotate(true)};n.prototype.rotateCounterClockwise=function(){this.rotate(false)};n.prototype.rotateTo=function(p){if(!this.documentLoaded){return}this.events.dispatchAll(a.beforePageRotate,{currentRotationAngle:this.rotationAngle,newRotationAngle:p,rotateCancel:this.rotateCancel,viewerManager:this});if(this.rotateCancel.value==true){return}this.rotationAngle=p;var o=this.getPageInfoAtScrollPos(this.zoomfactor);this.updateZoomSteps();this.reFlowDocument();this.setScrollPos(o);this.events.dispatchAll(a.afterPageRotate,{currentRotationAngle:p,viewerManager:this})};n.prototype.rotate=function(p){if(!this.documentLoaded){return}var q=this.rotationAngle;this.resetPageQualityState();var o=0;if(!p){o=q-90;if(o<0){o=o+360}}else{o=q+90;if(o>=360){o=o-360}}this.rotateTo(o)};n.prototype.zoom=function(r,p){if(!this.documentLoaded){return}this.resetPageQualityState();var w=this.currentPage;var t=this.zoomValue;this.zoomText=this.getZoomText(t);var v=t;switch(r){case"out":if(this.zoomValue!=this.zoomSteps[0]){for(var u=this.zoomSteps.length-1;u>=0;u--){if(this.zoomValue>this.zoomSteps[u]){v=this.zoomSteps[u];break}}}break;case"in":if(this.zoomValue!=this.zoomSteps[this.zoomSteps.length-1]){for(var u=0;u<=this.zoomSteps.length-1;u++){if(this.zoomValue<this.zoomSteps[u]){v=this.zoomSteps[u];break}}}break;default:if(Number(p)==p&&p%1==0){i.ZOOMCUSTOM=parseInt(p.toString())}else{var q=parseFloat(p);i.ZOOMCUSTOM=parseFloat(q.toFixed(2))}v=i.ZOOMCUSTOM;this.prepareZoomSteps();break}this.events.dispatchAll(a.beforeZoomChange,{currentZoomPercentage:t,targetZoomPercentage:v,zoomChangeCancel:this.zoomChangeCancel,viewerManager:this});if(this.zoomChangeCancel.value==true){return}this.zoomValue=v;this.zoomfactor=this.getZoomfactor();this.zoomPages();this.zoomText=this.getZoomText(this.zoomValue);var x;var s=this;$(this.viewerDOM.zoomDropdown).find("option").each(function(){if($(this).text().toLowerCase()==s.zoomText.toLowerCase()){x=$(this)}else{$(this).removeAttr("selected")}});if(x!=undefined){$(x).prop("selected",true)}var o=this.zoomValue;if(Number(o)===o&&o%1===0){$(this.viewerDOM.zoomDropdown).siblings("input").val(o+"%")}else{$(this.viewerDOM.zoomDropdown).siblings("input").val(o.toFixed(1)+"%")}this.events.dispatchAll(a.afterZoomChange,{zoomPercentage:this.zoomValue,viewerManager:this})};n.prototype.updateZoomSteps=function(){var v=$(this.viewerDOM.viewableArea).width()-this.getDivScrollBarWidth();var q=$(this.viewerDOM.viewableArea).height();var o=(this.maxPageHeight==0)?this.initialPageHeight:this.maxPageHeight;var u=(this.maxPageWidth==0)?this.initialPageWidth:this.maxPageWidth;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){i.ZOOMPAGEHEIGHT=parseFloat(((q/o)*100).toFixed(2));i.ZOOMPAGEWIDTH=parseFloat(((v/u)*100).toFixed(2))}else{i.ZOOMPAGEHEIGHT=parseFloat(((q/u)*100).toFixed(2));i.ZOOMPAGEWIDTH=parseFloat(((v/o)*100).toFixed(2))}for(var t=100;t>=1;t--){var p=t/100;var s=this.getZoomFactorFromValue(i.ZOOMPAGEHEIGHT)*u*p;if(s>v){var r=this.getZoomFactorFromValue(i.ZOOMPAGEWIDTH)*o*p;if(r<=q){i.ZOOMPAGESIZE=i.ZOOMPAGEWIDTH*p;break}}else{i.ZOOMPAGESIZE=i.ZOOMPAGEHEIGHT*p;break}}this.prepareZoomSteps();this.zoomValue=this.getZoomValue(this.zoomText);this.zoomfactor=this.getZoomfactor()};n.prototype.getDivScrollBarWidth=function(){var p=document.createElement("div");$(p).css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"});document.body.appendChild(p);var o=p.offsetWidth-p.clientWidth+6;document.body.removeChild(p);return o};n.prototype.getZoomFactorFromValue=function(o){return o/100};n.prototype.getZoomfactor=function(){this.prevZoomFactor=this.zoomfactor;return this.zoomValue/100};n.prototype.prepareZoomSteps=function(){this.zoomSteps[0]=i.ZOOM25;this.zoomSteps[1]=i.ZOOM50;this.zoomSteps[2]=i.ZOOM75;this.zoomSteps[3]=i.ZOOM100;this.zoomSteps[4]=i.ZOOM125;this.zoomSteps[5]=i.ZOOM150;this.zoomSteps[6]=i.ZOOM200;this.zoomSteps[7]=i.ZOOMPAGEHEIGHT;this.zoomSteps[8]=i.ZOOMPAGEWIDTH;this.zoomSteps[9]=i.ZOOMACTUALSIZE;this.zoomSteps[10]=i.ZOOMPAGESIZE;this.zoomSteps[11]=i.ZOOMCUSTOM;var o=[];$.each(this.zoomSteps,function(p,q){if($.inArray(q,o)===-1){o.push(q)}});o.sort();this.zoomSteps=o.sort(function(q,p){return q-p})};n.prototype.isSafari=function(){var o=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS");return o};n.prototype.printDocument=function(){var u=this;if(!this.documentLoaded){return null}this.events.dispatchAll(a.beforeDocumentPrint,{documentUri:this.documentUri,printCancel:this.printCancel,viewerManager:this});if(this.printCancel.value==true){return}this.viewerDOM.progressAnimation.showAnimation("Preparing to print pages...");var r=[];var o=jQuery.Deferred();var t=$(this.viewerDOM.viewableArea).attr("id")+"_print";var q=$("#"+t+"id");if(q.length){$("#"+t+"id").remove()}var s=document.createElement("iframe");s.name=t;s.id=t+"id";s.style.position="absolute";s.style.top="-1000000px";document.body.appendChild(s);var p=s.contentWindow?s.contentWindow:s.contentDocument.document?s.contentDocument.document:s.contentDocument;p.document.open();p.document.write("<html moznomarginboxes mozdisallowselectionprint><head><title></title>");p.document.write("<style>html, body { height: auto; margin: 0px;padding: 0px;} ");if(this.isSafari()){p.document.write("img { width: 98%; height: auto;margin: 0px 0px;padding:0px; }")}else{p.document.write("img { width: 100%; height: auto;margin: 0px 0px;padding:0px; }")}p.document.write("@page{margin-top: 0.0in; margin-bottom: 0in; margin-left: 0.0in; margin-right: 0.0in;}");p.document.write("@media print { #Header, #Footer { display: none; }");p.document.write("html, body { margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px; }");if(this.isSafari()){p.document.write("div.printPagewithpagebreak { page -break-after:auto; width: 98 %; height: auto; border-width: 0px; }");p.document.write("div.printPage{ margin:0px;padding:2px; width: 98 %; height: auto;border-width: 0px; }")}else{p.document.write("div.printPagewithpagebreak { page -break-after:auto; width: 100 %; height: auto; border-width: 0px; }");p.document.write("div.printPage{ margin:0px;padding:2px; width: 100 %; height: auto;border-width: 0px; }")}p.document.write("}");p.document.write("</style>");p.document.write("</head><body onload='setTimeout(function () { this.focus();this.print();}, 2000);'>");k.logInfo("Action: printDocument, Printing command issued, PageCount : "+this.pageCount);this.saveDocument().done(function(v){var w=u.serverCom.getPrintPageURLs(u.revisionUri,u.pageCount,"-");w.done(function(x){u.renderPrintPages(p,x.urls,0);u.events.dispatchAll(a.afterDocumentPrint,{viewerManager:u});o.resolve({documentUri:u.documentUri})});w.fail(function(x){u.viewerDOM.progressAnimation.hideAnimation();o.reject(x)})}).fail(function(v){u.viewerDOM.progressAnimation.hideAnimation();o.reject(v)});return o.promise()};n.prototype.saveDocument=function(){var p=this;if(!this.documentLoaded){return null}var o=jQuery.Deferred();this.events.dispatchAll(a.beforeDocumentSave,{documentUri:this.documentUri,saveCancel:this.saveCancel,viewerManager:this});if(this.saveCancel.value==true){return}this.events.dispatchAllAsync(a.beforeDocumentSaveInternal,{documentUri:this.documentUri,viewerManager:this,syncNeeded:true}).done(function(){o.resolve({documentUri:p.documentUri})}).fail(function(){o.reject()});this.events.dispatchAll(a.afterDocumentSave,{documentUri:this.documentUri,viewerManager:this});return o.promise()};n.prototype.getPrintDocumentInfo=function(){};n.prototype.renderPrintPages=function(r,t,p){var u=this;var s=document.createElement("div");s.style.margin=0;s.style.padding=1;if(p+1<t.length){s.className="printPagewithpagebreak"}else{s.className="printPage"}k.logInfo("Action: printDocument, Requesting, Url: "+t[p]);var o=new Image();o.style.margin=0;o.style.padding=0;o.src=t[p];var q=new Image();q.style.margin=0;q.style.padding=0;o.onload=function(){if(u.viewingInverted){q.src=u.convertImagetoInvertedImage(o,p+1)}else{q.src=u.createPrintImage(o,p+1)}p=p+1;if(p<t.length){u.renderPrintPages(r,t,p)}else{r.document.write("</body></html>");r.document.close();u.viewerDOM.progressAnimation.hideAnimation()}};o.onerror=function(){p=p+1;if(p<t.length){u.renderPrintPages(r,t,p)}else{r.document.write("</body></html>");r.document.close();u.viewerDOM.progressAnimation.hideAnimation()}};s.appendChild(q);r.document.body.appendChild(s);if(p+1<t.length){}};n.prototype.createPrintImage=function(r,t){var q=document.createElement("canvas");$(q).addClass("canvas_image");var v=0;var o=0;if(this.pages[t]!=null){v=this.pages[t].width;o=this.pages[t].height}else{v=Math.round(r.width*96/this.printingDpi);o=Math.round(r.height*96/this.printingDpi)}q.width=r.width;q.height=r.height;var p=q.getContext("2d"),u=0,s=0,w;p.drawImage(r,u,s);this.events.dispatchAll(a.afterPageDraw,{pageNumber:t,context:p,source:"printer",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:this.printingDpi/96,scaleY:this.printingDpi/96,actualPageWidth:v,actualPageHeight:o,viewerManager:this});return q.toDataURL()};n.prototype.convertImagetoInvertedImage=function(u,A){var s=document.createElement("canvas");$(s).addClass("canvas_image");s.width=u.width;s.height=u.height;var p=s.getContext("2d"),B=0,z=0,D;try{p.drawImage(u,B,z);var q=p.getImageData(B,z,u.width,u.height);var w=q.data;for(var t=0,r=w.length;t<r;t+=4){w[t]=255-w[t];w[t+1]=255-w[t+1];w[t+2]=255-w[t+2]}p.putImageData(q,B,z);var C=0;var o=0;if(this.pages[A]!=null){C=this.pages[A].width;o=this.pages[A].height}else{C=Math.round(u.width*96/this.printingDpi);o=Math.round(u.height*96/this.printingDpi)}this.events.dispatchAll(a.afterPageDraw,{pageNumber:A,context:p,source:"printer",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:this.printingDpi/96,scaleY:this.printingDpi/96,actualPageWidth:C,actualPageHeight:o,viewerManager:this});D=s.toDataURL()}catch(v){}return D};n.prototype.zoomPages=function(){var o=this.getPageInfoAtScrollPos(this.prevZoomFactor);this.reFlowDocument();this.setScrollPos(o)};n.prototype.invertPages=function(o){this.viewingInverted=o;this.reFlowDocument()};n.prototype.reRenderVisiblePages=function(){k.logInfo("Re-rendering visible pages, visiblepages : "+this.visiblePages.length);for(var p=0;p<this.visiblePages.length;p++){var o=this.visiblePages[p];if(this.pageQuality[o]==false&&this.zoomfactor<1){this.reRenderPage(o)}}};n.prototype.reFlowDocument=function(){k.logInfo("Reflowing the whole document, pageCount: "+this.pageCount);var s=this.zoomfactor;var t=this.documentid;for(var p=1;p<=this.pageCount;p++){this.reRenderThumbnailPage(p);var r=this.reRenderPage(p);var q=p;var o=$("#"+t+q);if(o!=null){if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(o).height((r.height*s).toFixed());$(o).width((r.width*s).toFixed())}else{$(o).width((r.height*s).toFixed());$(o).height((r.width*s).toFixed())}}}this.events.dispatchAll(a.reflow,{viewerManager:this})};n.prototype.convertCanvasImageToInvertedImage=function(q,p,z,t){var v=0;var u=0;var o=p.getImageData(v,u,z,t);var s=o.data;for(var r=0;r<s.length;r+=4){s[r]=255-s[r];if((r+1)<s.length){s[r+1]=255-s[r+1]}if((r+2)<s.length){s[r+2]=255-s[r+2]}}p.putImageData(o,v,u)};n.prototype.getRadianAngle=function(o){return o*Math.PI/180};n.prototype.performPDFActions=function(s){var u=1,r=0,y=0,B=0,o=0,D=1,p="",C=null;if(s.length!=0){var q={value:false};var v=s[0].actionParams;this.events.dispatchAll(a.onNavigationAction,{actionType:s[0].actionType,actionParams:v,cancel:q});if(!q.value){switch(s[0].actionType){case"goto":this.performGotoAction(v);break;case"uri":this.performURIAction(v);break;case"rgoto":var w=v.pdfFileUri;var x=v.newWindow;u=v.pageNumber;break;case"launch":var A=v.launchAppOrFilePath;break;case"javascript":var z=v.javaScript;break;case"named":var t=v.actionName;this.performNamedAction(t);break}}}};n.prototype.performURIAction=function(p){var o=p.uri;var q=o.search("http");if(q==-1){o="http://"+o}switch(this.preferences.securitySettings.hyperlinkNavigation.access){case l.HyperlinkAccess.allow:window.open(o,"_blank");break;case l.HyperlinkAccess.block:break;case l.HyperlinkAccess.alwaysAsk:this.hyperlinkAccessPermisionDialog(o);break;case l.HyperlinkAccess.custom:this.hyperlinkCustomAccess(o);break}};n.prototype.hyperlinkCustomAccess=function(o){var p=document.createElement("a");p.setAttribute("href",o);p.hostname;if(this.preferences.securitySettings.hyperlinkNavigation.custom.blockedSites.indexOf(p.hostname)==-1){if(this.preferences.securitySettings.hyperlinkNavigation.custom.trustedSites.indexOf(p.hostname)!=-1){window.open(o,"_blank")}else{if(this.preferences.securitySettings.hyperlinkNavigation.custom.showPermissionDialog){this.hyperlinkAccessPermisionDialog(o)}else{window.open(o,"_blank")}}}p=null};n.prototype.hyperlinkAccessPermisionDialog=function(o){this.viewerDOM.warningBox.show("The document is trying to connect to:</br>"+o,function(){window.open(o,"_blank")})};n.prototype.calculateZoomValue=function(o,q){var s=$(this.viewerDOM.viewableArea).width()-this.getDivScrollBarWidth();var p=$(this.viewerDOM.viewableArea).height();var r=100;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){r=parseFloat(((p/o)*100).toFixed(2))}else{r=parseFloat(((p/o)*100).toFixed(2))}return r};n.prototype.performJavascriptAction=function(o){var p=this;this.showMessageBox(l.LocalizedStrings.msgdlg_warning_jsAction,function(){setTimeout(function(){p.hideMessageBox()},1500)})};n.prototype.performGotoAction=function(t){var w=1,s=0,x=0,z=0,p=0,B=1,q="",A=null;w=t.pageNumber;s=t.left;x=t.top;z=t.right;p=t.bottom;B=t.zoom;q=t.destType;var v=(Number)(this.maxPageHeight);var y=(Number)(this.maxPageWidth);if(this.pages[w]!=null){v=this.pages[w].height;y=this.pages[w].width}switch(q){case"XYZ":A=new h(w,s,x);if(B!=0){this.zoomTo(B*100)}this.setScrollPos(A);break;case"Fit":this.setZoomMode(d.fitPage);this.scrolToPage(w);break;case"FitH":this.setZoomMode(d.fitWidth);A=new h(w,s,x);this.setScrollPos(A);break;case"FitV":this.setZoomMode(d.fitHeight);A=new h(w,s,x);this.setScrollPos(A);break;case"FitR":var r=x-p;var u=s-z;A=new h(w,s,x);this.setScrollPos(A);var o=this.calculateZoomValue(r,u);this.zoomTo(o);break;case"FitB":this.setZoomMode(d.fitHeight);this.scrolToPage(w);break;case"FitBH":this.scrolToPage(w);this.setZoomMode(d.fitWidth);A=new h(w,s,x);this.setScrollPos(A);break;case"FitBV":this.scrolToPage(w);this.setZoomMode(d.fitHeight);A=new h(w,s,x);this.setScrollPos(A);break}};n.prototype.performRemoteGotoAction=function(o,q){var p=this;this.showMessageBox(l.LocalizedStrings.msgdlg_warning_jsActionGOTO,function(){setTimeout(function(){p.hideMessageBox()},1500)})};n.prototype.performLaunchAction=function(o){var p=this;this.showMessageBox(l.LocalizedStrings.msgdlg_warning_jsLaunchApp,function(){setTimeout(function(){p.hideMessageBox()},1500)})};n.prototype.performNamedAction=function(o){switch(o){case"firstpage":this.firstPage();break;case"nextpage":this.nextPage();break;case"prevpage":this.prevPage();break;case"lastpage":this.lastPage();break;case"print":this.print();break;case"close":var p=this.documentUri;this.closeDocument(p);break}};n.prototype.getZoomValueForZoomMode=function(o){switch(o){case d.actualSize:return i.ZOOMACTUALSIZE;case d.fitHeight:return i.ZOOMPAGEHEIGHT;case d.fitWidth:return i.ZOOMPAGEWIDTH;case d.fitPage:return i.ZOOMPAGESIZE}return this.zoomfactor};n.prototype.getZoomValue=function(p){var o=null;switch(p){case"25%":o=i.ZOOM25;break;case"50%":o=i.ZOOM50;break;case"75%":o=i.ZOOM75;break;case"100%":o=i.ZOOM100;break;case"125%":o=i.ZOOM125;break;case"150%":o=i.ZOOM150;break;case"200%":o=i.ZOOM200;break;case l.LocalizedStrings.page_fit_actual_size:o=i.ZOOMACTUALSIZE;break;case l.LocalizedStrings.page_fit_height:o=i.ZOOMPAGEHEIGHT;break;case l.LocalizedStrings.page_fit_width:o=i.ZOOMPAGEWIDTH;break;case l.LocalizedStrings.fit_page:o=i.ZOOMPAGESIZE;break;default:o=i.ZOOMCUSTOM;break}return o};n.prototype.getCurrentPage=function(){var p;var s=this.viewerDOM.viewableArea;var t=this.documentid;p=Math.min($("#"+t+1).outerHeight(true),$(s).outerHeight(true));var q=Number(s.scrollTop);q+=Number(p)/2;var r=1,o=0;for(r=1;r<=Number(this.pageCount);r++){o=Number(o)+$("#"+t+r).outerHeight(true);if(Number(o)>=Number(q)){break}}return r};n.prototype.isPageVisible=function(o){for(var p=0;p<this.visiblePages.length;p++){if(o==this.visiblePages[p]){return true}}return false};n.prototype.updateVisiblePages=function(){var p;var u=this.viewerDOM.viewableArea;var v=this.documentid;this.visiblePages.length=0;p=$(u).outerHeight(true);var s=Number(u.scrollTop);var r=Number(u.scrollTop)+p;var t=1,q=0;var o=0;for(t=1;t<=(this.pageCount);t++){o=$("#"+v+t).outerHeight(true);if((q>=s)&&(q<=r)){this.visiblePages.push(t)}if((q+o>=s)&&(q+o<=r)){this.visiblePages.push(t)}if(q>r){break}q=q+o}};n.prototype.resetPageQualityState=function(){for(var o=1;o<=this.pageCount;o++){this.pageQuality[o]=false}};n.prototype.getPrevPageNumber=function(){if(this.currentPage>1){return this.currentPage-1}return 1};n.prototype.getNextPageNumber=function(){if(this.currentPage<this.pageCount){return this.currentPage+1}return this.pageCount};n.prototype.setCurrentPage=function(p){if(this.currentPage!=p){this.currentPage=p;this.updatePageNavButtonState();if(this.pageRenderingState.length!=0){if(this.boundaryPagesReady){this.PrioritizeAndRenderPages()}}var o=this.getUpdatedThumbanailPages().indexOf(this.currentPage);if(o==-1){this.scrolToThumbPage(this.currentPage)}else{this.updateThumbnailPageSelectionState(this.currentPage)}if(this.currentPage<this.pageCount){this.nextPageNumber=p+1}if(this.currentPage>1){this.prevPageNumber=p-1}}};n.prototype.getUpdatedThumbanailPages=function(){this.updateThumbnailsVisiblePages();return this.thumbnailVisiblePages};n.prototype.updatePageNavButtonState=function(){$(this.viewerDOM.pageIndicator).val(this.currentPage+" / "+this.pageCount);var p=$(this.viewerDOM.pageIndicator).width();var o=this.getTextWidth(this.pageCount+" / "+this.pageCount,"18px arial");if(p<o){$(this.viewerDOM.pageIndicator).width(o);this.onToolbarResize.call()}};n.prototype.setToolbarButtonUIState=function(){if(this.documentLoaded){$(this.viewerDOM.redactBtn).removeAttr("disabled");$(this.viewerDOM.sidePaneToggleBtn).removeAttr("disabled");$(this.viewerDOM.printBtn).removeAttr("disabled");$(this.viewerDOM.saveBtn).removeAttr("disabled");$(this.viewerDOM.downloadBtn).removeAttr("disabled");$(this.viewerDOM.downloadBtn).parent("div.git-viewer-button-container").removeAttr("disabled");$(".git-docviewer-quickFind").removeAttr("disabled");$(this.viewerDOM.firstPage).removeAttr("disabled");$(this.viewerDOM.prevPage).removeAttr("disabled");$(this.viewerDOM.pageIndicator).removeAttr("disabled");$(this.viewerDOM.nextPage).removeAttr("disabled");$(this.viewerDOM.lastPage).removeAttr("disabled");$(this.viewerDOM.rotatePagesCounterClockwise).removeAttr("disabled");$(this.viewerDOM.rotatePagesClockwise).removeAttr("disabled");$(this.viewerDOM.zoomIn).removeAttr("disabled");$(this.viewerDOM.zoomOut).removeAttr("disabled");$(this.viewerDOM.invertBtn).removeAttr("disabled");$(this.viewerDOM.zoomDropdown).parent("span").removeAttr("disabled");$(this.viewerDOM.zoomDropdown).siblings("input").removeAttr("disabled");$(this.viewerDOM.zoomDropdown).removeAttr("disabled");$(this.viewerDOM.viewer).find("#toggleMenuItem-id").find("*").removeAttr("disabled")}else{$(this.viewerDOM.redactBtn).attr("disabled","disabled");$(this.viewerDOM.printBtn).attr("disabled","disabled");$(this.viewerDOM.saveBtn).attr("disabled","disabled");$(this.viewerDOM.downloadBtn).attr("disabled","disabled");$(this.viewerDOM.downloadBtn).parent("div.git-viewer-button-container").attr("disabled","disabled");$(".git-docviewer-quickFind").attr("disabled","disabled");$(this.viewerDOM.firstPage).attr("disabled","disabled");$(this.viewerDOM.prevPage).attr("disabled","disabled");$(this.viewerDOM.pageIndicator).attr("disabled","disabled");$(this.viewerDOM.nextPage).attr("disabled","disabled");$(this.viewerDOM.lastPage).attr("disabled","disabled");$(this.viewerDOM.rotatePagesCounterClockwise).attr("disabled","disabled");$(this.viewerDOM.rotatePagesClockwise).attr("disabled","disabled");$(this.viewerDOM.zoomIn).attr("disabled","disabled");$(this.viewerDOM.zoomOut).attr("disabled","disabled");$(this.viewerDOM.invertBtn).attr("disabled","disabled");$(this.viewerDOM.zoomDropdown).parent("span").attr("disabled","disabled");$(this.viewerDOM.zoomDropdown).siblings("input").attr("disabled","disabled");$(this.viewerDOM.zoomDropdown).attr("disabled","disabled")}};n.prototype.onClickThumbnail=function(p){if(p.data!=null){var q=p.data;$(this).parent().children().removeClass("toggled");$(this).addClass("toggled");$(q.viewerDOM.bookmarkContent).hide();$(q.viewerDOM.thumbnailContent).show();q.bookmarkActive=false;q.thumbnailActive=true;var o=q.getUpdatedThumbanailPages().indexOf(q.currentPage);if(o==-1){q.scrolToThumbPage(q.currentPage)}else{q.updateThumbnailPageSelectionState(q.currentPage)}}};n.prototype.onClickBookmark=function(o){if(o.data!=null){var p=o.data;if(p.docContainBookmark){$(this).parent().children().removeClass("toggled");$(this).addClass("toggled");$(p.viewerDOM.bookmarkContent).show();$(p.viewerDOM.thumbnailContent).hide();p.bookmarkActive=true;p.thumbnailActive=false}}};n.prototype.onThumbnailPaneScroll=function(o){if(o.data!=null){var p=o.data}};n.prototype.onScrollCallback=function(r){if(r.data!=null){var s=r.data;var q=s.getCurrentPage();if(Number(s.currentPage)!=Number(q)){s.events.dispatchAll(a.afterPageChange,{currentPageNumber:q,viewerManager:s});s.setCurrentPage(q)}else{if(s.preferences.navigationPane.enableThumbnails){if(s.thumbnailActive){var p=$(s.viewerDOM.thumbnailContent).find(".git-viewer-thumbnail-page-active").next().html();if(q!=Number(p)){var o=s.getUpdatedThumbanailPages().indexOf(q);if(o==-1){s.scrolToThumbPage(q)}else{s.updateThumbnailPageSelectionState(q)}}}}}}};n.prototype.onPrintBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.printDocument()}}};n.prototype.onSaveBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.saveDocument()}}};n.prototype.onDownloadBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.downloadDocument(null)}}};n.prototype.onDownloadDropdownChange=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){var q=o.currentTarget.value;if(q!=".temp"){p.downloadAs(q)}}}};n.prototype.bindEventsWithRedactions=function(){if(this.pageRegionSelectable){this.events.dispatchAll(a.unSelectableRegionEvent,{viewerManager:this});this.pageRegionSelectable=false}else{this.events.dispatchAll(a.bindSelectableRegionEvent,{viewerManager:this});this.pageRegionSelectable=true}};n.prototype.downloadDocument=function(q){var s=this;if(!this.documentLoaded){return null}var o=jQuery.Deferred();var r=q;if(q==null){r=this.mimeType}var p={value:""};this.events.dispatchAll(a.beforeDocumentDownload,{downloadFileMimetype:r,documentDownloadCancel:this.documentDownloadCancel,newFileName:p,viewerManager:this});if(this.documentDownloadCancel.value==true){return}this.saveDocument().done(function(t){var u=s.serverCom.getDocumentDownloadURL(s.revisionUri,p.value);if(q!=null){u=s.serverCom.getDownloadDocumentAsURL(s.revisionUri,q,p.value)}u.done(function(w){var v=document.getElementById("hiddenDownloader");if(v===null){v=document.createElement("iframe");v.id="hiddenDownloader";v.style.display="none";document.body.appendChild(v)}v.src=w.url;v.onload=function(){this.parentNode.removeChild(this)};o.resolve({downloadedFileMimetype:r});s.events.dispatchAll(a.afterDocumentDownload,{viewerManager:s})});u.fail(function(v){o.reject(v)})}).fail(function(t){o.reject(t)});return o.promise()};n.prototype.onDownloadAsPDFBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.downloadDocument(".pdf")}}};n.prototype.onFullScreenClick=function(o){if(o.data!=null){var s=o.data;var r=$;var q=window;try{if(q.screenfull!=null){if(q.screenfull.isFullscreen){q.screenfull.exit()}else{q.screenfull.request($(s.viewerDOM.viewer)[0])}}}catch(p){}}};n.prototype.onFullScreenBtnClick=function(o){if(o.data!=null){var r=o.data;var q=$;try{if(q.fullscreen!=null){if(q.fullscreen.isFullScreen()){q.fullscreen.exit()}else{q(r.viewerDOM.viewer).fullscreen()}}}catch(p){}}};n.prototype.onDownloadAsDOCXBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.downloadDocument(".docx")}}};n.prototype.onDownloadAsHTMLBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.downloadDocument(".html")}}};n.prototype.onDownloadAsTIFFBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.downloadDocument(".tiff")}}};n.prototype.onRedactionButtonClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.bindEventsWithRedactions()}}};n.prototype.onAddSignatureClick=function(q){if(q.data!=null){var r=q.data;if(r.documentLoaded){var s=document.createElement("div");$(s).width("250px");$(s).height("300px");var o=document.createElement("canvas");o.height=200;o.width=150;$(s).append(o);$(o).sketch();$(s).css({position:"absolute",top:"250px",left:"250px",border:"2px solid black"});var p=document.createElement("input");$(p).attr("type","button");$(p).val("Add");$(s).append(p);$(r.viewerDOM.viewer).append(s)}}};n.prototype.onInvertPagesBtnClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.invertPages(!p.viewingInverted)}}};n.prototype.onRotateClockwiseClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.rotate(true)}}};n.prototype.onRotateCounterClockwiseClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.rotate(false)}}};n.prototype.onZoomDropdownChange=function(q){if(q.data!=null){var r=q.data;if(r.documentLoaded){var p=null;var s=$(r.viewerDOM.zoomDropdown).children("option").filter(":selected").text();var o=r.getZoomValue(s);if(Number(o)===o&&o%1===0){$(r.viewerDOM.zoomDropdown).siblings("input").val(o+"%")}else{$(r.viewerDOM.zoomDropdown).siblings("input").val(o.toFixed(2)+"%")}p=r.getZoomValue(s);r.zoom("predefined",p)}}};n.prototype.onFirstPageClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.scrolToPage(1)}}};n.prototype.onPrevPageClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.scrolToPage(p.getPrevPageNumber())}}};n.prototype.onNextPageClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.scrolToPage(p.getNextPageNumber())}}};n.prototype.onPageIndicatorClick=function(o){if(o.data!=null){var p=o.data;$(p.viewerDOM.pageIndicator).select()}};n.prototype.validateZoomValue=function(q){var o;if(q.indexOf("%")>-1){var p=q.split("%");o=p[0].trim()}else{o=q}return o};n.prototype.validatePageNumber=function(o){var p;if(o.indexOf("/")>-1){var q=o.split("/");p=parseInt(q[0].trim())}else{p=parseInt(o.trim())}return p};n.prototype.onZoomTextBlur=function(p){if(p.data!=null){var q=p.data;if(!q.documentLoaded){return}var o=q.validateZoomValue($(this).val());if(o>0&&o<=300){q.zoom("predefined",o)}else{var o=q.zoomValue;if(Number(o)===o&&o%1===0){$(q.viewerDOM.zoomDropdown).siblings("input").val(o+"%")}else{$(q.viewerDOM.zoomDropdown).siblings("input").val(o.toFixed(1)+"%")}}}};n.prototype.onPageIndicatorBlur=function(p){if(p.data!=null){var q=p.data;if(!q.documentLoaded){return}var o=q.validatePageNumber($(this).val());if(q.currentPage!=o){if(o!=null){if(o<=q.pageCount){if(o>0){q.scrolToPage(o)}else{q.scrolToPage(1)}}else{q.scrolToPage(q.pageCount)}}q.updatePageNavButtonState()}else{q.updatePageNavButtonState()}}};n.prototype.onZoomTextKeyDown=function(r){if(r.data!=null){var t=r.data;if(!t.documentLoaded){return}var o=r.keyCode?r.keyCode:r.which;if(o==8||o==9||o==46||o==37||o==39||o==191||o==111||o==110){return true}if(o>=96&&o<=105){return true}if(r.keyCode!=13&&r.keyCode!=9){var q=new RegExp("^[0-9]+$");var s=String.fromCharCode(!r.charCode?r.which:r.charCode);if(!q.test(s)){return false}}if(r.keyCode==13||r.keyCode==9){var p=t.validateZoomValue($(this).val());if(p!=null){if(p>0&&p<=300){t.zoom("predefined",p)}else{var p=t.zoomValue;if(Number(p)===p&&p%1===0){$(t.viewerDOM.zoomDropdown).siblings("input").val(p+"%")}else{$(t.viewerDOM.zoomDropdown).siblings("input").val(p.toFixed(1)+"%")}}}r.preventDefault()}}};n.prototype.onPageIndicatorKeydown=function(r){if(r.data!=null){var t=r.data;if(!t.documentLoaded){return}var p=r.keyCode?r.keyCode:r.which;if(p==8||p==9||p==46||p==37||p==39||p==191||p==111){return true}if(p>=96&&p<=105){return true}if(r.keyCode!=13&&r.keyCode!=9){var q=new RegExp("^[0-9]+$");var s=String.fromCharCode(!r.charCode?r.which:r.charCode);if(!q.test(s)){return false}}if(r.keyCode==13||r.keyCode==9){var o=t.validatePageNumber($(this).val());if(o!=null){if(o<=t.pageCount){if(o>0){t.scrolToPage(o)}else{t.scrolToPage(1)}}else{t.scrolToPage(t.pageCount)}t.updatePageNavButtonState()}else{t.updatePageNavButtonState()}r.preventDefault()}}};n.prototype.onLastPageClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){if(p.currentPage<p.pageCount){p.scrolToPage(p.pageCount)}}}};n.prototype.onZoomInClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.zoom("in",null)}}};n.prototype.onZoomOutClick=function(o){if(o.data!=null){var p=o.data;if(p.documentLoaded){p.zoom("out",null)}}};n.prototype.getTextWidth=function(s,p){var t=document.createElement("canvas");if(t!=null){var o=t.getContext("2d");o.font=p;var q=0;if(!this.documentRenderingCompleted){q=10}var r=o.measureText(s).width+q;return r}return 100};n.prototype.scrolToPage=function(q){var s=this;if(!this.documentLoaded){return}k.logInfo("scrolToPage "+q);var o=function(){s.events.dispatchAll(a.afterPageChange,{currentPageNumber:q,viewerManager:s});s.setCurrentPage(q)};var p={easing:"swing",onAfter:o};var r="#"+this.documentid+q;this.events.dispatchAll(a.beforePageChange,{currentPageNumber:this.currentPage,targetPageNumber:q,pagechangecancel:this.pagechangecancel,viewerManager:this});if(this.pagechangecancel.value==true){return}$(this.viewerDOM.viewableArea).scrollTo(r,p)};n.prototype.scrolToThumbPage=function(p){var u=this;if(!this.documentLoaded){return}if(this.thumbnailActive){var r=this.thumbnailVisiblePages.sort(function(w,v){return w-v});var q=r[r.length-1];if(p==(q+1)){var t=$(this.viewerDOM.thumbnailContent).scrollTop();$(this.viewerDOM.thumbnailContent).scrollTop(t+$(".git-viewer-thumbnail-page-container:first").outerHeight());this.updateThumbnailPageSelectionState(p)}else{var o={easing:"swing",onAfter:function(){u.updateThumbnailPageSelectionState(p)}};var s="#"+this.documentid+"thumb"+p;$(this.viewerDOM.thumbnailContent).scrollTo(s,o)}}};return n}());l.ViewerManager=e})(gnostice||(gnostice={}));var gnostice;(function(q){(function(w){w[w.auto=0]="auto";w[w.fixed=1]="fixed";w[w["float"]=2]="float"})(q.NavigationPanePosition||(q.NavigationPanePosition={}));var d=q.NavigationPanePosition;(function(w){w[w.allow=0]="allow";w[w.block=1]="block";w[w.alwaysAsk=2]="alwaysAsk";w[w.custom=3]="custom"})(q.HyperlinkAccess||(q.HyperlinkAccess={}));var t=q.HyperlinkAccess;var f=(function(){function w(){this.showPermissionDialog=true}return w}());q.HypelinkCustomAccess=f;var b=(function(){function w(){this.access=t.alwaysAsk;this.custom=new f()}return w}());q.HyperlinkNavigation=b;var r=(function(){function w(){this.hyperlinkNavigation=new b()}return w}());q.SecuritySettings=r;var e=(function(){function w(){this.digitizationEnabled=true;this.textLanguage="eng"}return w}());q.DigitizerSettings=e;var h=(function(){function w(){this.firstPage=true;this.prevPage=true;this.nextPage=true;this.lastPage=true;this.pageIndicator=true;this.gotoPage=true}return w}());q.VisibleNavigationControls=h;var g=(function(){function w(){this.fixedSteps=true;this.zoomIn=true;this.zoomOut=true}return w}());q.VisibleZoomControls=g;var m=(function(){function w(){this.clockwise=true;this.counterClockwise=true}return w}());q.VisibleRotationControls=m;var n=(function(){function w(){this.open=true;this.download=true;this.print=true;this.save=true;this.downloadAs=true}return w}());q.VisibleFileOperationControls=n;var a=(function(){function w(){this.allPages=true}return w}());q.VisibleColorInversionControls=a;var p=(function(){function w(){this.fillColor="white";this.strokeColor="white";this.isFill=false;this.isStroke=false;this.enableRedaction=false}return w}());q.RedactionControls=p;var i=(function(){function w(){this.enableQuickSearch=true;this.visibleQuickSearchControls=true;this.highlightColor="yellow"}return w}());q.Search=i;var j=(function(){function w(){this.enableFormFilling=true;this.highlightColor="rgba(204, 215, 255, 0.5)";this.readonlyColor="rgba(128, 128, 128, 0.5)";this.focusColor="rgba(255, 255, 255, 0.8)";this.listContainerBackgroundColor="rgba(255, 255, 255, 1)";this.listItemHoverBackgroundColor="";this.allowJavaScriptExecution=true}return w}());q.FormFields=j;var l=(function(){function w(){this.enableAnnotations=true;this.commentsPanelDisplayColor="rgb(255, 245, 245)";this.userFieldDisplayColor="blue"}return w}());q.Annotations=l;var o=(function(){function w(){this.formFields=new j();this.annotations=new l();this.redactionControls=new p()}return w}());q.InteractiveElements=o;var v=(function(){function w(){this.zoomValue=q.ZoomMode.fitWidth;this.rotationAngle=q.RotationAngle.zero;this.colorInversionApplied=false;this.navigationPaneOpened=true}return w}());q.ViewSettings=v;var k=(function(){function w(){this.enableBookmarks=true;this.enableThumbnails=true;this.visible=true;this.width=180;this.position=d.auto}return w}());q.NavigationPane=k;var s=(function(){function w(){this.name="Anonymous"}return w}());q.UserIdentity=s;var u=(function(){function w(){this.language="en";this.resourcePath=""}return w}());q.Localization=u;var c=(function(){function w(){this.renderingDpi=96;this.printingDpi=96;this.toolbarVisible=true;this.visibleFullScreen=true;this.userIdentity=new s();this.visibleNavigationControls=new h();this.visibleRotationControls=new m();this.visibleFileOperationControls=new n();this.visibleColorInversionControls=new a();this.visibleZoomControls=new g();this.search=new i();this.digitizerSettings=new e();this.viewSettings=new v();this.interactiveElements=new o();this.navigationPane=new k();this.securitySettings=new r();this.localization=new u()}return w}());q.Preferences=c})(gnostice||(gnostice={}));var gnostice;(function(e){var b=(function(){function g(i,h){this.eventDispatcher=i;this.formsModule=h}g.prototype.getAllFormFields=function(){if(this.formsModule!=null){return this.formsModule.getAllFormFields()}};g.prototype.getFormField=function(h){if(this.formsModule!=null){return this.formsModule.getFormField(h)}};g.prototype.submitForm=function(l,k,j,h,i){if(k===void 0){k=e.SubmitMethod.POST}if(j===void 0){j=false}if(h===void 0){h=null}if(i===void 0){i=true}if(this.formsModule!=null){return this.formsModule.submitForm(l,k,h,i,j)}};g.prototype.resetForm=function(h,i){if(h===void 0){h=null}if(i===void 0){i=true}if(this.formsModule!=null){return this.formsModule.resetFields(h,i)}};g.prototype.focusForm=function(){if(this.formsModule!=null){return this.formsModule.focusForm()}};g.prototype.addEventListener=function(h,i,j){if(this.eventDispatcher!=null){return this.eventDispatcher.addFormsEventListener(h,i,j)}};return g}());e.FormsAPI=b;var d=(function(){function g(h){this.viewerManager=h}g.prototype.showNavigationPane=function(){this.viewerManager.refreshLeftRightPanel(true)};g.prototype.hideNavigationPane=function(){this.viewerManager.refreshLeftRightPanel(false)};return g}());e.ViewAPI=d;(function(g){g[g.NOTMOVABLE=0]="NOTMOVABLE";g[g.MOVABLE=1]="MOVABLE";g[g.HIDE=2]="HIDE"})(e.ToolBarResizeAction||(e.ToolBarResizeAction={}));var f=e.ToolBarResizeAction;var c=(function(){function g(k,i,h,j){if(h===void 0){h=f.MOVABLE}if(j===void 0){j="Control Name"}this.control=k;this.priority=i;this.actionType=h;this.description=j;this.width=0;this.visible=true}return g}());e.ToolbarControl=c;var a=(function(h){__extends(g,h);function g(l,j,i){var m=this;if(j===void 0){j=null}if(i===void 0){i="DocumentHandler.axd"}h.call(this);this.handlerUri="DocumentHandler.axd";this.preferences=new e.Preferences();this.id=null;this.toolbarControlList=new Array();this.menuControlList=new Array();this.isOpenMenuItems=false;this.searchModule=null;this.formsModule=null;this.redactModule=null;this.selectRectangleModule=null;this.annotsModule=null;this.beforePageChange=function(o){var n={currentPageNumber:o.currentPageNumber,targetPageNumber:o.targetPageNumber,cancel:o.pagechangecancel};m.dispatchAll(e.EventNames.beforePageChange,n);o.pagechangecancel.value=n.cancel};this.afterPageChange=function(o){var n={pageNumber:o.currentPageNumber};m.dispatchAll(e.EventNames.afterPageChange,n)};this.beforeZoomChange=function(o){var n={currentZoomPercentage:o.currentZoomPercentage,targetZoomPercentage:o.targetZoomPercentage,cancel:o.zoomChangeCancel};m.dispatchAll(e.EventNames.beforeZoomChange,n);o.zoomChangeCancel.value=n.cancel};this.afterZoomChange=function(o){var n={zoomPercentage:o.zoomPercentage};m.dispatchAll(e.EventNames.afterZoomChange,n)};this.beforeDocumentLoad=function(o){var n={documentUri:o.documentUri,cancel:o.documentLoadCancel};m.dispatchAll(e.EventNames.beforeDocumentLoad,n);o.documentLoadCancel.value=n.cancel};this.afterDocumentLoad=function(o){var n={mimetype:o.viewerManager.mimetype};m.dispatchAll(e.EventNames.afterDocumentLoad,n)};this.beforeDocumentUpload=function(o){var n={cancel:o.documentUploadCancel};m.dispatchAll(e.EventNames.beforeDocumentUpload,n);o.documentUploadCancel.value=n.cancel};this.afterDocumentUpload=function(o){var n={documentUri:o.documentUri};m.dispatchAll(e.EventNames.afterDocumentUpload,n)};this.beforeDocumentPrint=function(o){var n={documentUri:o.documentUri,cancel:o.printCancel};m.dispatchAll(e.EventNames.beforeDocumentPrint,n);o.printCancel.value=n.cancel};this.afterDocumentPrint=function(o){var n={};m.dispatchAll(e.EventNames.afterDocumentPrint,n)};this.beforeDocumentClose=function(o){var n={documentUri:o.documentUri,cancel:o.documentCloseCancel};m.dispatchAll(e.EventNames.beforeDocumentClose,n);o.documentCloseCancel.value=n.cancel};this.afterDocumentClose=function(o){var n={};m.dispatchAll(e.EventNames.afterDocumentClose,n)};this.beforeDocumentDownload=function(o){var n={downloadFileformat:o.downloadFileformat,cancel:o.documentDownloadCancel,newFileName:o.newFileName};m.dispatchAll(e.EventNames.beforeDocumentDownload,n);o.documentDownloadCancel.value=n.cancel};this.afterDocumentDownload=function(o){var n={documentUri:o.viewerManager.documentUri};m.dispatchAll(e.EventNames.afterDocumentDownload,n)};this.beforeDocumentSave=function(o){var n={documentUri:o.documentUri,cancel:o.saveCancel};m.dispatchAll(e.EventNames.beforeDocumentSave,n);o.saveCancel.value=n.cancel};this.afterDocumentSave=function(o){var n={documentUri:o.documentUri};m.dispatchAll(e.EventNames.afterDocumentSave,n)};this.onNavigationAction=function(o){var n={actionType:o.actionType,actionParams:o.actionParams,cancel:o.cancel};m.dispatchAll(e.EventNames.onNavigationAction,n)};this.formsEventBeforeFormSubmit=function(o){var n={keyValuePair:o.data,cancel:o.cancelPosting};m.dispatchAllFormEvents(e.EventNames.beforeFormSubmit,null,n)};this.formsEventAfterFormSubmit=function(o){var n={documentUri:o.documentUri};m.dispatchAllFormEvents(e.EventNames.afterFormSubmit,null,n)};this.formsEventOnFormLoaded=function(n){m.dispatchAllFormEvents(e.EventNames.onFormLoaded,null,n)};this.formsEventOnFormModified=function(n){delete n.viewerManager;m.dispatchAllFormEvents(e.EventNames.onFormModified,null,n)};this.formsEventOnFieldClick=function(n){m.dispatchAllFormEvents(e.EventNames.onFieldClicked,n.formField.name,n)};this.formsEventOnFieldFocusIn=function(n){m.dispatchAllFormEvents(e.EventNames.onFieldFocusIn,n.formField.name,n)};this.formsEventOnFieldFocusOut=function(n){m.dispatchAllFormEvents(e.EventNames.onFieldFocusOut,n.formField.name,n)};this.formsEventOnFieldChange=function(n){m.dispatchAllFormEvents(e.EventNames.onFieldChanged,n.formField.name,n)};this.beforePageRotate=function(o){var n={currentRotationAngle:o.currentRotationAngle,newRotationAngle:o.newRotationAngle,cancel:o.rotateCancel};m.dispatchAll(e.EventNames.beforePageRotate,n);o.rotateCancel.value=n.cancel};this.afterPageRotate=function(o){var n={rotationAngle:o.currentRotationAngle};m.dispatchAll(e.EventNames.afterPageRotate,n)};this.afterPageDraw=function(o){var n={pageNumber:o.pageNumber,zoomPercentage:o.zoomPercentage,rotationAngle:o.rotationAngle,actualPageWidth:o.actualPageWidth,actualPageHeight:o.actualPageHeight,pageScaleX:o.scaleX,pageScaleY:o.scaleY,context:o.context,source:o.source};m.dispatchAll(e.EventNames.afterPageDraw,n)};this.id=l;this.docviewercontrol=$("#"+this.id)||null;var k={toolbarVisible:true,renderingDpi:96,printingDpi:96,disableOpen:false,disableDownload:false,disablePrint:false,enableFormFilling:true,digitizerSettings:{enableDigitization:false,textRecognitionLanguage:"eng"},search:{enableQuickSearch:true,visibleQuickSearchControls:true,highlightColor:"yellow"},interactiveElements:{formFields:{enableFormFilling:true,highlightColor:"rgba(204, 215, 255, 0.5)"},annotations:{enableAnnotations:false,commentsPanelDisplayColor:"rgb(255, 245, 245)",userFieldDisplayColor:"blue"},redactionControls:{enableRedaction:false,fillColor:"white",strokeColor:"white",isFill:false,isStroke:false}},userIdentity:{username:"Anonymous"},visibleNavigationControls:{firstPage:true,prevPage:true,nextPage:true,lastPage:true,pageIndicator:true,gotoPage:true},visibleZoomControls:{fixedSteps:true,zoomIn:true,zoomOut:true},visibleRotationControls:{clockwise:true,counterClockwise:true},visibleFileOperationControls:{open:true,download:true,print:true,downloadAs:true,save:true},visibleColorInversionControls:{allPages:true},viewSettings:{zoomValue:e.ZoomMode.fitWidth,customZoomPercentage:100,rotationAngle:e.RotationAngle.zero,colorInversionApplied:false,navigationPaneOpened:true},navigationPane:{enableBookmarks:false,enableThumbnails:true,position:e.NavigationPanePosition.auto,width:180,visible:true},securitySettings:{hyperlinkNavigation:{access:e.HyperlinkAccess.alwaysAsk,customAccess:{blockedSites:[],trustedSites:[],showPermissionDialog:true}}},localization:{language:"en",resourcePath:""},visibleFullScreen:true};this.preferences=$.extend(k,j);this.localizeResources(this.preferences.localization.language,this.preferences.localization.resourcePath);this.render()}g.prototype.changeLanguage=function(j,i){if(i===void 0){i=""}this.localizeResources(j,i)};g.prototype.localizeResources=function(l,j){var k=this;try{jQuery.i18n.properties({name:"Messages",mode:"both",path:j,language:l,async:true,callback:function(){e.LocalizedStrings.tooltip_open_doc=jQuery.i18n.prop("tooltip_open_doc");e.LocalizedStrings.tooltip_print_doc=jQuery.i18n.prop("tooltip_print_doc");e.LocalizedStrings.tooltip_save_doc=jQuery.i18n.prop("tooltip_save_doc");e.LocalizedStrings.tooltip_download_doc=jQuery.i18n.prop("tooltip_download_doc");e.LocalizedStrings.tooltip_download_as_doc=jQuery.i18n.prop("tooltip_download_as_doc");e.LocalizedStrings.tooltip_download_pdf=jQuery.i18n.prop("tooltip_download_pdf");e.LocalizedStrings.tooltip_download_docx=jQuery.i18n.prop("tooltip_download_docx");e.LocalizedStrings.tooltip_download_tiff=jQuery.i18n.prop("tooltip_download_tiff");e.LocalizedStrings.tooltip_download_html=jQuery.i18n.prop("tooltip_download_html");e.LocalizedStrings.tooltip_show_first_page=jQuery.i18n.prop("tooltip_show_first_page");e.LocalizedStrings.tooltip_show_previous_page=jQuery.i18n.prop("tooltip_show_previous_page");e.LocalizedStrings.go_to_page=jQuery.i18n.prop("go_to_page");e.LocalizedStrings.tooltip_show_next_page=jQuery.i18n.prop("tooltip_show_next_page");e.LocalizedStrings.tooltip_show_last_page=jQuery.i18n.prop("tooltip_show_last_page");e.LocalizedStrings.tooltip_rotate_anti_clockwise=jQuery.i18n.prop("tooltip_rotate_anti_clockwise");e.LocalizedStrings.tooltip_rotate_clockwise=jQuery.i18n.prop("tooltip_rotate_clockwise");e.LocalizedStrings.tooltip_zoomout=jQuery.i18n.prop("tooltip_zoomout");e.LocalizedStrings.tooltip_zoomin=jQuery.i18n.prop("tooltip_zoomin");e.LocalizedStrings.custom_zoom=jQuery.i18n.prop("tooltip_custom_zoom");e.LocalizedStrings.page_fit_actual_size=jQuery.i18n.prop("page_fit_actual_size");e.LocalizedStrings.page_fit_height=jQuery.i18n.prop("page_fit_height");e.LocalizedStrings.page_fit_width=jQuery.i18n.prop("page_fit_width");e.LocalizedStrings.fit_page=jQuery.i18n.prop("fit_page");e.LocalizedStrings.tooltip_full_screen=jQuery.i18n.prop("tooltip_full_screen");e.LocalizedStrings.tooltip_thumbnails=jQuery.i18n.prop("tooltip_thumbnails");e.LocalizedStrings.tooltip_bookmarks=jQuery.i18n.prop("tooltip_bookmarks");e.LocalizedStrings.tooltip_quick_find=jQuery.i18n.prop("tooltip_quick_find");e.LocalizedStrings.tooltip_find_prev=jQuery.i18n.prop("tooltip_find_prev");e.LocalizedStrings.tooltip_find_next=jQuery.i18n.prop("tooltip_find_next");e.LocalizedStrings.close=jQuery.i18n.prop("close");e.LocalizedStrings.tooltip_invert_color=jQuery.i18n.prop("tooltip_invert_color");e.LocalizedStrings.msgdlg_alert_formFieldsRequired=jQuery.i18n.prop("msgdlg_alert_formFieldsRequired");e.LocalizedStrings.msgdlg_btnCaption_OK=jQuery.i18n.prop("msgdlg_btnCaption_OK");e.LocalizedStrings.msgdlg_btnCaption_Cancel=jQuery.i18n.prop("msgdlg_btnCaption_Cancel");e.LocalizedStrings.msgdlg_btnCaption_Allow=jQuery.i18n.prop("msgdlg_btnCaption_Allow");e.LocalizedStrings.msgdlg_btnCaption_Yes=jQuery.i18n.prop("msgdlg_btnCaption_Yes");e.LocalizedStrings.msgdlg_btnCaption_No=jQuery.i18n.prop("msgdlg_btnCaption_No");e.LocalizedStrings.msgdlg_warning_jsAction=jQuery.i18n.prop("msgdlg_warning_jsAction");e.LocalizedStrings.msgdlg_warning_jsActionGOTO=jQuery.i18n.prop("msgdlg_warning_jsActionGOTO");e.LocalizedStrings.msgdlg_warning_jsLaunchApp=jQuery.i18n.prop("msgdlg_warning_jsLaunchApp");e.LocalizedStrings.msgdlg_warning_linkAction=jQuery.i18n.prop("msgdlg_warning_linkAction");e.LocalizedStrings.nav_pane_comments=jQuery.i18n.prop("nav_pane_comments");e.LocalizedStrings.nav_pane_no_comments=jQuery.i18n.prop("nav_pane_no_comments");e.LocalizedStrings.annot_add_new=jQuery.i18n.prop("annot_add_new");e.LocalizedStrings.annot_state_accepted=jQuery.i18n.prop("annot_state_accepted");e.LocalizedStrings.annot_state_rejected=jQuery.i18n.prop("annot_state_rejected");e.LocalizedStrings.annot_state_completed=jQuery.i18n.prop("annot_state_completed");e.LocalizedStrings.annot_state_cancelled=jQuery.i18n.prop("annot_state_cancelled");e.LocalizedStrings.annot_enter_reply=jQuery.i18n.prop("annot_enter_reply");e.LocalizedStrings.annot_reply=jQuery.i18n.prop("annot_reply");e.LocalizedStrings.nav_pane=jQuery.i18n.prop("nav_pane");e.LocalizedStrings.annot_by=jQuery.i18n.prop("annot_by");e.LocalizedStrings.form_validation_error_date=jQuery.i18n.prop("form_validation_error_date");e.LocalizedStrings.form_validation_error_time=jQuery.i18n.prop("form_validation_error_time");e.LocalizedStrings.form_validation_error_datetime=jQuery.i18n.prop("form_validation_error_datetime");k.applyLocalization()}})}catch(i){}};g.prototype.applyLocalization=function(){try{$(this.sidePaneToggleBtn).attr("title",e.LocalizedStrings.nav_pane);$(this.openDocBtn).attr("title",e.LocalizedStrings.tooltip_open_doc);$(this.printBtn).attr("title",e.LocalizedStrings.tooltip_print_doc);$(this.saveBtn).attr("title",e.LocalizedStrings.tooltip_save_doc);$(this.downloadBtn).attr("title","Download document");$(this.toolbarsaveAsCaratControl).attr("title",e.LocalizedStrings.tooltip_download_as_doc);this.downloadAsCmbBox.options.length=0;var i=new Option("--Select--",".temp",true,true);this.downloadAsCmbBox.options.add(i);i.style.display="none";this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_pdf,".pdf"));this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_docx,".docx"));this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_tiff,".tiff"));this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_html,".html"));this.zoominDropdown.options.length=0;this.zoominDropdown.options.add(new Option("25%"));this.zoominDropdown.options.add(new Option("50%"));this.zoominDropdown.options.add(new Option("75%"));this.zoominDropdown.options.add(new Option("100%"));this.zoominDropdown.options.add(new Option("125%"));this.zoominDropdown.options.add(new Option("150%"));this.zoominDropdown.options.add(new Option(e.LocalizedStrings.page_fit_actual_size));this.zoominDropdown.options.add(new Option(e.LocalizedStrings.page_fit_height));this.zoominDropdown.options.add(new Option(e.LocalizedStrings.page_fit_width));this.zoominDropdown.options.add(new Option(e.LocalizedStrings.fit_page));this.zoominDropdown.options.add(new Option(e.LocalizedStrings.custom_zoom));$(this.firstPageBtn).attr("title",e.LocalizedStrings.tooltip_show_first_page);$(this.prevPageBtn).attr("title",e.LocalizedStrings.tooltip_show_previous_page);$(this.pagenumberInput).attr({title:e.LocalizedStrings.go_to_page});$(this.nextPageBtn).attr("title",e.LocalizedStrings.tooltip_show_next_page);$(this.lastPageBtn).attr("title",e.LocalizedStrings.tooltip_show_last_page);$(this.counterClockwiseBtn).attr("title",e.LocalizedStrings.tooltip_rotate_anti_clockwise);$(this.clockwiseBtn).attr("title",e.LocalizedStrings.tooltip_rotate_clockwise);$(this.zoomOutBtn).attr("title",e.LocalizedStrings.tooltip_zoomout);$(this.zoomInBtn).attr("title",e.LocalizedStrings.tooltip_zoomin);$(this.invertAllPagesBtn).attr("title",e.LocalizedStrings.tooltip_invert_color);$(this.fullScreenBtn).attr("title",e.LocalizedStrings.tooltip_full_screen);$(this.thumbnailBtn).attr("title",e.LocalizedStrings.tooltip_thumbnails);$(this.bookmarkBtn).attr("title",e.LocalizedStrings.tooltip_bookmarks);if(this.searchModule!=null){this.searchModule.applyLocalization()}if(this.annotsModule!=null){this.annotsModule.applyLocalization()}}catch(j){}};g.prototype.render=function(){var F=this;var z=this;this.viewer=document.createElement("DIV");$(this.viewer).height("100%");$(this.viewer).width("100%");$(this.viewer).css({position:"relative","min-width":"280px"});$(this.viewer).attr("tabindex",0);var w=document.createElement("DIV");$(w).height("100%");$(w).width("100%");$(w).css("position","absolute");$(w).addClass("git-docviewer-container");var p=document.createElement("div");$(p).attr("class","git-docviewer-scrollablecanvas");$(p).attr("align","center");$(p).css({"box-sizing":"border-box",width:"100%",height:"100%",position:"relative","box-shadow":"inset 1px 0 0 hsla(0,0%,100%,.05)","float":"left"});if(z.preferences.search.enableQuickSearch){this.searchModule=new e.SearchModule(this.preferences.search.highlightColor)}if(this.preferences.interactiveElements.formFields.enableFormFilling){this.formsModule=new e.FormsModule(this.preferences.interactiveElements.formFields.highlightColor,this.preferences.interactiveElements.formFields.readonlyColor,this.preferences.interactiveElements.formFields.focusColor,this.preferences.interactiveElements.formFields.listContainerBackgroundColor,this.preferences.interactiveElements.formFields.listItemHoverBackgroundColor)}if(this.preferences.interactiveElements.annotations.enableAnnotations){this.annotsModule=new e.AnnotsModule()}if(this.preferences.interactiveElements.redactionControls.enableRedaction){this.redactModule=new e.redactModule(this.preferences.interactiveElements.redactionControls.fillColor,this.preferences.interactiveElements.redactionControls.strokeColor,this.preferences.interactiveElements.redactionControls.isFill,this.preferences.interactiveElements.redactionControls.isStroke);this.redactModule.supportsRedactionLayer=true}if(!(z.preferences.navigationPane.visible||z.preferences.toolbarVisible)){z.preferences.navigationPane.enableThumbnails=false;z.preferences.navigationPane.enableBookmarks=false;z.preferences.viewSettings.navigationPaneOpened=false}if(z.preferences.toolbarVisible){$(p).css({"padding-top":"38px"});this.toolbar=document.createElement("DIV");$(this.toolbar).css({position:"absolute","z-index":"2",width:"100%","min-height":"37px","text-align":"center",left:"0px",right:"0px",cursor:"default"});this.container=document.createElement("DIV");$(this.container).css({position:"relative",left:"0",right:"0",width:"100%","text-align":"center"});$(this.container).addClass("git-docviewer-toolbar");this.placeholder=document.createElement("DIV");$(this.placeholder).css({position:"relative","z-index":"2",width:"100%","min-height":"37px","text-align":"center"});this.centerplaceholder=document.createElement("span");$(this.centerplaceholder).attr("class","git_xdoc_docviewer_toolbar_container_class_center");$(this.centerplaceholder).css({position:"relative",top:"5px;","min-width":"16px"});this.leftplaceholder=document.createElement("span");$(this.leftplaceholder).css({position:"relative","float":"left",margin:"2px 0px 0px 0px"});this.toggleplaceholder=document.createElement("span");$(this.toggleplaceholder).css({position:"relative","float":"right",margin:"2px 0px 0px 0px",right:"3px"});$(this.placeholder).append(this.leftplaceholder);$(this.placeholder).append(this.toggleplaceholder);$(this.container).append(this.placeholder);$(this.toolbar).append(this.container);if(z.preferences.navigationPane.visible){if((z.preferences.navigationPane.enableThumbnails)||(z.preferences.navigationPane.enableBookmarks)){this.sidePaneToggleBtn=document.createElement("div");$(this.sidePaneToggleBtn).attr("title",e.LocalizedStrings.nav_pane);$(this.sidePaneToggleBtn).attr("id","sidebartool");$(this.sidePaneToggleBtn).addClass("git-docviewer-controlcontainer");$(this.sidePaneToggleBtn).addClass("git-docviewer-closepan");$(this.sidePaneToggleBtn).attr("disabled","true");$(this.leftplaceholder).append(this.sidePaneToggleBtn);this.toolbarControlList.push(new c(this.sidePaneToggleBtn,1,f.NOTMOVABLE,"toggle"));var n=document.createElement("div");$(n).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(n);this.toolbarControlList.push(new c(n,2,f.NOTMOVABLE,"sepLine0"))}}else{z.preferences.navigationPane.enableThumbnails=false;z.preferences.navigationPane.enableBookmarks=false;z.preferences.viewSettings.navigationPaneOpened=false}if(z.preferences.visibleFileOperationControls.open){this.openDocBtn=document.createElement("div");$(this.openDocBtn).attr("title",e.LocalizedStrings.tooltip_open_doc);$(this.openDocBtn).addClass("git-docviewer-controlcontainer");$(this.openDocBtn).addClass("git-docviewer-open");$(this.leftplaceholder).append(this.openDocBtn);this.toolbarControlList.push(new c(this.openDocBtn,3,f.NOTMOVABLE,"open"))}if(z.preferences.visibleFileOperationControls.print){this.printBtn=document.createElement("div");$(this.printBtn).attr("title",e.LocalizedStrings.tooltip_print_doc);$(this.printBtn).attr("disabled","true");$(this.printBtn).addClass("git-docviewer-controlcontainer");$(this.printBtn).addClass("git-docviewer-print");$(this.leftplaceholder).append(this.printBtn);this.toolbarControlList.push(new c(this.printBtn,9,f.MOVABLE,"print"))}if(z.preferences.visibleFileOperationControls.save){this.saveBtn=document.createElement("div");$(this.saveBtn).attr("title",e.LocalizedStrings.tooltip_save_doc);$(this.saveBtn).attr("disabled","true");$(this.saveBtn).addClass("git-docviewer-controlcontainer");$(this.saveBtn).addClass("git-docviewer-save");$(this.leftplaceholder).append(this.saveBtn);this.toolbarControlList.push(new c(this.saveBtn,13,f.MOVABLE,"save"))}var x=null;if(z.preferences.visibleFileOperationControls.download){this.downloadAsContainer=document.createElement("div");$(this.downloadAsContainer).attr("disabled","disabled");this.downloadBtn=document.createElement("div");$(this.downloadBtn).attr("title",e.LocalizedStrings.tooltip_download_doc);$(this.downloadBtn).addClass("git-docviewer-download");var C=document.createElement("div");if(z.preferences.visibleFileOperationControls.downloadAs){this.toolbarsaveAsCaratControl=document.createElement("div");$(this.toolbarsaveAsCaratControl).addClass("git-viewer-dual-button-container");$(this.toolbarsaveAsCaratControl).css({width:"12px",padding:"7px 0px",left:"0px","float":"left",position:"relative"});$(this.toolbarsaveAsCaratControl).attr("title",e.LocalizedStrings.tooltip_download_as_doc);$(this.toolbarsaveAsCaratControl).on("click",function(N){if($(z.downloadAsContainer).attr("disabled")=="disabled"){return}$(x).slideToggle(200);$(".clicker").toggleClass("active");N.stopPropagation();if(z.isOpenMenuItems){$(z.toggleMenuBtn).removeClass("toggled");$(z.menuItems).css("display","none");z.isOpenMenuItems=false}});$(C).append(this.toolbarsaveAsCaratControl);var i=document.createDocumentFragment();this.downloadAsCmbBox=document.createElement("select");$(this.downloadAsCmbBox).css({position:"absolute",top:"-5px",left:"0px",height:"34px",width:"12px"});var k=new Option("--Select--",".temp",true,true);k.style.display="none";this.downloadAsCmbBox.options.add(k);this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_pdf,".pdf"));this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_docx,".docx"));this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_tiff,".tiff"));this.downloadAsCmbBox.options.add(new Option(e.LocalizedStrings.tooltip_download_html,".html"));i.appendChild(this.downloadAsCmbBox);this.toolbarsaveAsCaratControl.appendChild(i);$(C).addClass("click-nav")}$(this.downloadAsContainer).addClass("git-viewer-button-container");$(this.downloadAsContainer).append(this.downloadBtn);if(z.preferences.visibleFileOperationControls.downloadAs){$(this.downloadAsContainer).append(C)}$(this.leftplaceholder).append(this.downloadAsContainer);this.toolbarControlList.push(new c(this.downloadAsContainer,6,f.HIDE,"downloadAs"))}if(this.preferences.search.enableQuickSearch&&this.preferences.search.visibleQuickSearchControls){this.searchBtn=this.searchModule.getQuickFindUIBtn();$(this.searchBtn).attr("disabled","true");$(this.leftplaceholder).append(this.searchBtn);this.toolbarControlList.push(new c(this.searchBtn,7,f.MOVABLE,"quickSearch"))}var I=document.createElement("div");$(I).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(I);this.toolbarControlList.push(new c(I,8,f.HIDE,"SepLine0"));if(z.preferences.visibleNavigationControls.firstPage){this.firstPageBtn=document.createElement("div");$(this.firstPageBtn).attr("disabled","true");$(this.firstPageBtn).attr("title",e.LocalizedStrings.tooltip_show_first_page);$(this.firstPageBtn).addClass("git-docviewer-controlcontainer");$(this.firstPageBtn).addClass("git-docviewer-first");$(this.leftplaceholder).append(this.firstPageBtn);this.toolbarControlList.push(new c(this.firstPageBtn,5,f.MOVABLE,"first"))}if(z.preferences.visibleNavigationControls.prevPage){this.prevPageBtn=document.createElement("div");$(this.prevPageBtn).attr("disabled","true");$(this.prevPageBtn).attr("title",e.LocalizedStrings.tooltip_show_previous_page);$(this.prevPageBtn).addClass("git-docviewer-controlcontainer");$(this.prevPageBtn).addClass("git-docviewer-prev");$(this.leftplaceholder).append(this.prevPageBtn);this.toolbarControlList.push(new c(this.prevPageBtn,10,f.NOTMOVABLE,"prev"))}if(z.preferences.visibleNavigationControls.pageIndicator){z.pagenumberInput=document.createElement("input");$(z.pagenumberInput).attr("disabled","true");$(z.pagenumberInput).attr({title:e.LocalizedStrings.go_to_page,type:"text","class":"git-docviewer-goto",id:"git_xdoc_docviewer_toolbar_id_goto",value:"0 / 0"});$(z.pagenumberInput).css({width:"55px",padding:"0px 6px",margin:"4px 2px","text-align":"center","min-height":"24px","min-width":"52px"});$(this.leftplaceholder).append(z.pagenumberInput);this.toolbarControlList.push(new c(this.pagenumberInput,11,f.NOTMOVABLE,"pageindicator"))}if(z.preferences.visibleNavigationControls.nextPage){this.nextPageBtn=document.createElement("div");$(this.nextPageBtn).attr("disabled","true");$(this.nextPageBtn).attr("title",e.LocalizedStrings.tooltip_show_next_page);$(this.nextPageBtn).addClass("git-docviewer-controlcontainer");$(this.nextPageBtn).addClass("git-docviewer-next");$(this.leftplaceholder).append(this.nextPageBtn);this.toolbarControlList.push(new c(this.nextPageBtn,12,f.NOTMOVABLE,"next"))}if(z.preferences.visibleNavigationControls.lastPage){this.lastPageBtn=document.createElement("div");$(this.lastPageBtn).attr("disabled","true");$(this.lastPageBtn).attr("title",e.LocalizedStrings.tooltip_show_last_page);$(this.lastPageBtn).addClass("git-docviewer-controlcontainer");$(this.lastPageBtn).addClass("git-docviewer-last");$(this.leftplaceholder).append(this.lastPageBtn);this.toolbarControlList.push(new c(this.lastPageBtn,4,f.MOVABLE,"last"))}var u=document.createElement("div");$(u).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(u);this.toolbarControlList.push(new c(u,13,f.HIDE,"sepLine1"));if(z.preferences.visibleRotationControls.counterClockwise){this.counterClockwiseBtn=document.createElement("div");$(this.counterClockwiseBtn).attr("disabled","true");$(this.counterClockwiseBtn).attr("title",e.LocalizedStrings.tooltip_rotate_anti_clockwise);$(this.counterClockwiseBtn).addClass("git-docviewer-controlcontainer");$(this.counterClockwiseBtn).addClass("git-docviewer-rotateleft");$(z.leftplaceholder).append(this.counterClockwiseBtn);this.toolbarControlList.push(new c(this.counterClockwiseBtn,14,f.MOVABLE,"counterClockwise"))}if(z.preferences.visibleRotationControls.clockwise){this.clockwiseBtn=document.createElement("div");$(this.clockwiseBtn).attr("disabled","true");$(this.clockwiseBtn).attr("title",e.LocalizedStrings.tooltip_rotate_clockwise);$(this.clockwiseBtn).addClass("git-docviewer-controlcontainer");$(this.clockwiseBtn).addClass("git-docviewer-rotateright");$(z.leftplaceholder).append(this.clockwiseBtn);this.toolbarControlList.push(new c(this.clockwiseBtn,15,f.MOVABLE,"clockwise"))}var r=document.createElement("div");$(r).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(r);this.toolbarControlList.push(new c(r,16,f.HIDE,"sepLine3"));if(z.preferences.visibleZoomControls.zoomOut){this.zoomOutBtn=document.createElement("div");$(this.zoomOutBtn).attr("title",e.LocalizedStrings.tooltip_zoomout);$(this.zoomOutBtn).attr({disabled:"true"});$(this.zoomOutBtn).addClass("git-docviewer-controlcontainer");$(this.zoomOutBtn).addClass("git-docviewer-zoomout");$(this.leftplaceholder).append(this.zoomOutBtn);this.toolbarControlList.push(new c(this.zoomOutBtn,17,f.MOVABLE,"zoomout"))}if(z.preferences.visibleZoomControls.zoomIn){this.zoomInBtn=document.createElement("div");$(this.zoomInBtn).attr("title",e.LocalizedStrings.tooltip_zoomin);$(this.zoomInBtn).attr({disabled:"true"});$(this.zoomInBtn).addClass("git-docviewer-controlcontainer");$(this.zoomInBtn).addClass("git-docviewer-zoomin");$(this.leftplaceholder).append(this.zoomInBtn);this.toolbarControlList.push(new c(this.zoomInBtn,18,f.MOVABLE,"zoomin"))}if(z.preferences.visibleZoomControls.fixedSteps){var D=document.createElement("span");$(D).attr("disabled","disabled");$(D).attr("class","git-viewer-button-container git-viewer-toolbar-drpdwn-zoom");$(D).css({"min-width":"68px",position:"relative"});this.zoominDropdown=document.createElement("select");$(this.zoominDropdown).css({height:"100%"});$(this.zoominDropdown).attr({disabled:"true"});if(z.preferences.visibleZoomControls.fixedSteps){var y=document.createElement("option");$(y).append("25%");$(z.zoominDropdown).append(y)}if(z.preferences.visibleZoomControls.fixedSteps){var B=document.createElement("option");$(B).append("50%");$(z.zoominDropdown).append(B)}if(z.preferences.visibleZoomControls.fixedSteps){var A=document.createElement("option");$(A).append("75%");$(z.zoominDropdown).append(A)}if(z.preferences.visibleZoomControls.fixedSteps){var l=document.createElement("option");$(l).attr("selected","selected");$(l).append("100%");$(z.zoominDropdown).append(l)}if(z.preferences.visibleZoomControls.fixedSteps){var j=document.createElement("option");$(j).append("125%");$(z.zoominDropdown).append(j)}if(z.preferences.visibleZoomControls.fixedSteps){var E=document.createElement("option");$(E).append("150%");$(z.zoominDropdown).append(E)}if(z.preferences.visibleZoomControls.fixedSteps){var t=document.createElement("option");$(t).append("200%");$(z.zoominDropdown).append(t)}if(z.preferences.visibleZoomControls.fixedSteps){var K=document.createElement("option");$(K).append(e.LocalizedStrings.page_fit_actual_size);$(z.zoominDropdown).append(K)}if(z.preferences.visibleZoomControls.fixedSteps){z.pageFitSelectOptions=document.createElement("option");$(z.pageFitSelectOptions).append(e.LocalizedStrings.page_fit_height);$(z.zoominDropdown).append(z.pageFitSelectOptions)}if(z.preferences.visibleZoomControls.fixedSteps){z.pageWidthSelectOptions=document.createElement("option");$(z.pageWidthSelectOptions).append(e.LocalizedStrings.page_fit_width);$(z.zoominDropdown).append(z.pageWidthSelectOptions)}if(z.preferences.visibleZoomControls.fixedSteps){z.pageWidthSelectOptions=document.createElement("option");$(z.pageWidthSelectOptions).append(e.LocalizedStrings.fit_page);$(z.zoominDropdown).append(z.pageWidthSelectOptions)}if(z.preferences.visibleZoomControls.fixedSteps){var H=document.createElement("option");$(H).hide();$(H).append(e.LocalizedStrings.custom_zoom);$(z.zoominDropdown).append(H)}$(D).append(z.zoominDropdown);if(z.preferences.visibleZoomControls.fixedSteps){var s=document.createElement("input");$(s).attr("type","text");$(s).val("100%");$(s).addClass("git-zoom-text-input");$(s).attr({disabled:"true"});$(D).append(s)}$(z.leftplaceholder).append(D);this.toolbarControlList.push(new c(D,24,f.HIDE,"predefinedzoom"))}var o=document.createElement("div");$(o).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(o);this.toolbarControlList.push(new c(o,21,f.HIDE,"sepLine4"));if(z.preferences.visibleColorInversionControls.allPages){this.invertAllPagesBtn=document.createElement("div");$(this.invertAllPagesBtn).attr("disabled","true");$(this.invertAllPagesBtn).attr("title",e.LocalizedStrings.tooltip_invert_color);$(this.invertAllPagesBtn).addClass("git-docviewer-controlcontainer");$(this.invertAllPagesBtn).addClass("git-docviewer-invert");$(z.leftplaceholder).append(this.invertAllPagesBtn);this.toolbarControlList.push(new c(this.invertAllPagesBtn,22,f.MOVABLE,"invert"))}if(z.preferences.interactiveElements.redactionControls.enableRedaction){this.selectRectangleModule=new e.selectRectModule("");this.selectRectangleModule.supportsSelectionLayer=true;this.redactBtn=document.createElement("div");$(this.redactBtn).attr("disabled","true");$(this.redactBtn).attr("title","Select Rectangle");$(this.redactBtn).addClass("git-docviewer-controlcontainer");$(this.redactBtn).addClass("git-docviewer-redact");$(z.leftplaceholder).append(this.redactBtn);this.toolbarControlList.push(new c(this.redactBtn,23,f.MOVABLE,"invert"))}this.addSignatureBtn=document.createElement("div");if(z.preferences.visibleFullScreen){this.fullScreenBtn=document.createElement("div");$(this.fullScreenBtn).attr("title",e.LocalizedStrings.tooltip_full_screen);$(this.fullScreenBtn).addClass("git-docviewer-controlcontainer");$(this.fullScreenBtn).addClass("git-docviewer-fullScreen");$(z.leftplaceholder).append(this.fullScreenBtn);this.toolbarControlList.push(new c(this.fullScreenBtn,24,f.MOVABLE,"fullscreen"))}$(this.viewer).on("fscreenopen",function(){$(z.fullScreenBtn).addClass("git-docviewer-fullScreen-exit");$(z.fullScreenBtn).removeClass("git-docviewer-fullScreen")});$(this.viewer).on("fscreenclose",function(){$(z.fullScreenBtn).removeClass("git-docviewer-fullScreen-exit");$(z.fullScreenBtn).addClass("git-docviewer-fullScreen")})}this.toggleMenuBtn=document.createElement("div");$(this.toggleMenuBtn).css("float","left");$(this.toggleMenuBtn).attr("class","git-xdoc-viewer-toolbar-toggle-button");$(this.toggleMenuBtn).append("<div class='git-docviewer-togglemenu' style='width:27px;height:27px;margin: 0px 2px 4px 2px;' />");$(this.toggleMenuBtn).on("click",function(N){F.showMenuItems();N.stopPropagation();if(x!=null){$(x).hide(200);$(".clicker").removeClass("active")}});$(z.toggleplaceholder).append(this.toggleMenuBtn);this.menuItems=document.createElement("span");$(this.menuItems).css("display","none");$(this.menuItems).attr("id","toggleMenuItem-id");$(this.menuItems).attr("class","doc_viewer_toolbar_button git-xdoc-viewer-toolbar-drpdwn-class-zoom");$(this.menuItems).click(function(N){N.stopPropagation();if(x!=null){$(x).hide(200);$(".clicker").removeClass("active")}});var z=this;$(w).html("");if(z.preferences.toolbarVisible){$(w).append(this.menuItems);$(w).append(this.toolbar)}z.scrollableviewer=document.createElement("div");$(z.scrollableviewer).attr("align","center");$(z.scrollableviewer).css({width:"100%",height:"100%",position:"relative",overflow:"auto","-webkit-overflow-scrolling":"touch"});var q=new e.ProgressAnimation(this.viewer);var L=new e.YesNoCancelDialog(w);var v=new e.MessageBox(w);var M=new e.WarningBox(w);$(p).append(z.scrollableviewer);$(w).append(p);var G=document.createElement("div");$(G).css({"z-index":"50",width:"0px",top:"0",bottom:"0",position:"absolute","float":"left","background-color":"transparent"});$(G).attr({id:"leftPane"});var J=document.createElement("div");$(J).css({width:"100%",height:"36px","z-index":"5",overflow:"hidden","padding-top":"1px"});$(J).addClass("git-viewer-leftpane-header");if(z.preferences.navigationPane.enableThumbnails){this.thumbnailBtn=document.createElement("div");$(this.thumbnailBtn).attr("title",e.LocalizedStrings.tooltip_thumbnails);$(this.thumbnailBtn).addClass("git-docviewer-controlcontainer");$(this.thumbnailBtn).addClass("git-docviewer-thumbnails");$(this.thumbnailBtn).addClass("toggled");$(J).append(this.thumbnailBtn)}if(z.preferences.navigationPane.enableBookmarks){this.bookmarkBtn=document.createElement("div");$(this.bookmarkBtn).attr("title",e.LocalizedStrings.tooltip_bookmarks);$(this.bookmarkBtn).addClass("git-docviewer-controlcontainer");$(this.bookmarkBtn).addClass("git-docviewer-bookmark");$(this.bookmarkBtn).attr("disabled","true");$(J).append(this.bookmarkBtn)}$(G).append(J);var m=document.createElement("div");$(m).css({width:"100%",position:"absolute",top:"37px",bottom:"0",overflow:"auto"});$(m).addClass("git-viewer-toolbarContent");$(G).append(m);this.thumbnailContent=document.createElement("div");$(this.thumbnailContent).attr("id","thumbnail");$(this.thumbnailContent).css({width:"100%",bottom:"0",top:"0",position:"absolute",overflow:"auto"});$(this.thumbnailContent).addClass("git-thumbnail-content");$(m).append(this.thumbnailContent);this.bookmarkContent=document.createElement("div");$(this.bookmarkContent).attr("id","bookmark");$(this.bookmarkContent).css({width:"100%",bottom:"0",top:"0",position:"absolute",overflow:"auto",display:"none"});$(this.bookmarkContent).addClass("git-bookmark-content");$(m).append(this.bookmarkContent);$(this.viewer).append(G);$(this.viewer).append(w);$(z.docviewercontrol).append(this.viewer);this.uploaderBtn=document.createElement("input");$(this.uploaderBtn).css({left:"-9999px",top:"-9999px",width:"1px",height:"1px",position:"fixed"});$(this.uploaderBtn).attr("type","file");$(this.uploaderBtn).attr("id",this.id+"-fileupload");$(this.uploaderBtn).attr("name","document");$(this.viewer).append(this.uploaderBtn);this.viewerDOM=new e.ViewerDOM(this.viewer,z.scrollableviewer,this.sidePaneToggleBtn,this.openDocBtn,this.printBtn,this.saveBtn,this.downloadBtn,this.downloadAsCmbBox,this.firstPageBtn,this.prevPageBtn,this.nextPageBtn,this.lastPageBtn,this.uploaderBtn,this.pagenumberInput,this.zoomInBtn,this.zoomOutBtn,this.zoominDropdown,this.clockwiseBtn,this.counterClockwiseBtn,this.invertAllPagesBtn,this.fullScreenBtn,this.addSignatureBtn,this.redactBtn,this.bookmarkBtn,this.bookmarkContent,this.thumbnailBtn,this.thumbnailContent,q,null,v,L,M);this.viewerManager=new e.ViewerManager(this.viewerDOM,this.handlerUri,this.preferences.renderingDpi,this.id+"-fileupload",z.preferences);this.viewerManager.tag=this;if(this.searchModule!=null){this.viewerManager.registerPluggableModule(this.searchModule)}if(this.formsModule!=null){this.viewerManager.registerPluggableModule(this.formsModule)}if(this.redactModule!=null){this.viewerManager.registerPluggableModule(this.redactModule)}if(this.selectRectangleModule!=null){this.viewerManager.registerPluggableModule(this.selectRectangleModule)}if(this.annotsModule!=null){this.viewerManager.registerPluggableModule(this.annotsModule)}this.viewerManager.onToolbarResize=function(){z.reflowToolbar()};this.viewerManager.events.addEventListener(e.EventNames.beforePageChange,this.beforePageChange);this.viewerManager.events.addEventListener(e.EventNames.afterPageChange,this.afterPageChange);this.viewerManager.events.addEventListener(e.EventNames.beforeZoomChange,this.beforeZoomChange);this.viewerManager.events.addEventListener(e.EventNames.afterZoomChange,this.afterZoomChange);this.viewerManager.events.addEventListener(e.EventNames.beforeDocumentLoad,this.beforeDocumentLoad);this.viewerManager.events.addEventListener(e.EventNames.afterDocumentLoad,this.afterDocumentLoad);this.viewerManager.events.addEventListener(e.EventNames.beforeDocumentUpload,this.beforeDocumentUpload);this.viewerManager.events.addEventListener(e.EventNames.afterDocumentUpload,this.afterDocumentUpload);this.viewerManager.events.addEventListener(e.EventNames.beforeDocumentPrint,this.beforeDocumentPrint);this.viewerManager.events.addEventListener(e.EventNames.afterDocumentPrint,this.afterDocumentPrint);this.viewerManager.events.addEventListener(e.EventNames.beforeDocumentClose,this.beforeDocumentClose);this.viewerManager.events.addEventListener(e.EventNames.afterDocumentClose,this.afterDocumentClose);this.viewerManager.events.addEventListener(e.EventNames.beforePageRotate,this.beforePageRotate);this.viewerManager.events.addEventListener(e.EventNames.afterPageRotate,this.afterPageRotate);this.viewerManager.events.addEventListener(e.EventNames.beforeDocumentDownload,this.beforeDocumentDownload);this.viewerManager.events.addEventListener(e.EventNames.afterDocumentDownload,this.afterDocumentDownload);this.viewerManager.events.addEventListener(e.EventNames.beforeDocumentSave,this.beforeDocumentSave);this.viewerManager.events.addEventListener(e.EventNames.afterDocumentSave,this.afterDocumentSave);this.viewerManager.events.addEventListener(e.EventNames.onNavigationAction,this.onNavigationAction);this.viewerManager.events.addFormsEventListener(e.EventNames.beforeFormSubmit,null,function(N){return F.formsEventBeforeFormSubmit(N)});this.viewerManager.events.addFormsEventListener(e.EventNames.afterFormSubmit,null,function(N){return F.formsEventAfterFormSubmit(N)});this.viewerManager.events.addFormsEventListener(e.EventNames.onFormLoaded,null,function(N){return F.formsEventOnFormLoaded(N)});this.viewerManager.events.addFormsEventListener(e.EventNames.onFormModified,null,function(N){return F.formsEventOnFormModified(N)});this.viewerManager.events.addFormsEventListener(e.EventNames.onFieldClicked,"*",function(N){return F.formsEventOnFieldClick(N)});this.viewerManager.events.addFormsEventListener(e.EventNames.onFieldFocusIn,"*",function(N){return F.formsEventOnFieldFocusIn(N)});this.viewerManager.events.addFormsEventListener(e.EventNames.onFieldFocusOut,"*",function(N){return F.formsEventOnFieldFocusOut(N)});this.viewerManager.events.addFormsEventListener(e.EventNames.onFieldChanged,"*",function(N){return F.formsEventOnFieldChange(N)});this.viewerManager.events.addEventListener(e.EventNames.afterPageDraw,this.afterPageDraw);this.applyToolbarControlWidth();this.reflowToolbar();$(document).click(function(){if(x!=null){$(x).hide(200);$(".clicker").removeClass("active")}if(z.isOpenMenuItems){$(z.toggleMenuBtn).removeClass("toggled");$(z.menuItems).css("display","none");z.isOpenMenuItems=false}});this.Forms=new b(this,this.formsModule);this.View=new d(this.viewerManager)};g.prototype.loadDocument=function(j,i){if(i===void 0){i=""}if(this.viewerManager!=null){return this.viewerManager.loadDocument(j,i,null,null)}};g.prototype.loadDocumentFromServer=function(i){if(this.viewerManager!=null){this.viewerManager.loadDocumentFromServer(i)}};g.prototype.openDocument=function(){this.uploaderBtn.uploader.click()};g.prototype.closeDocument=function(i){if(this.viewerManager!=null){return this.viewerManager.closeDocument(i)}};g.prototype.uploadDocumentFromBuffer=function(i){if(this.viewerManager!=null){this.viewerManager.uploadDocumentFromBuffer(i)}};g.prototype.uploadDocumentFromUri=function(i){if(this.viewerManager!=null){this.viewerManager.uploadDocumentFromUri(i)}};g.prototype.download=function(){if(this.viewerManager!=null){return this.viewerManager.download()}};g.prototype.getDocumentUrl=function(){if(this.viewerManager!=null){return this.viewerManager.getServerDocumentURI()}};g.prototype.refresh=function(i){if(i==undefined){this.reflowToolbar();this.viewerManager.resizePagesOnViewerSizeChanges()}else{i.reflowToolbar();i.viewerManager.resizePagesOnViewerSizeChanges()}};g.prototype.downloadAs=function(i){if(this.viewerManager!=null){return this.viewerManager.downloadAs(i)}};g.prototype.print=function(){if(this.viewerManager!=null){return this.viewerManager.print()}};g.prototype.firstPage=function(){if(this.viewerManager!=null){this.viewerManager.firstPage()}};g.prototype.prevPage=function(){if(this.viewerManager!=null){this.viewerManager.prevPage()}};g.prototype.nextPage=function(){if(this.viewerManager!=null){this.viewerManager.nextPage()}};g.prototype.lastPage=function(){if(this.viewerManager!=null){this.viewerManager.lastPage()}};g.prototype.zoomIn=function(){if(this.viewerManager!=null){this.viewerManager.zoomIn()}};g.prototype.zoomOut=function(){if(this.viewerManager!=null){this.viewerManager.zoomOut()}};g.prototype.rotatePages=function(i){if(this.viewerManager!=null){this.viewerManager.rotateTo(i)}};g.prototype.zoom=function(i){if(this.viewerManager!=null){if(i==e.ZoomMode.fitPage||e.ZoomMode.fitWidth||i==e.ZoomMode.fitHeight||i==e.ZoomMode.actualSize){this.viewerManager.setZoomMode(i)}else{this.viewerManager.zoomTo(i)}}};g.prototype.rotatePagesClockwise=function(){if(this.viewerManager!=null){this.viewerManager.rotatePagesClockwise()}};g.prototype.rotatePagesCounterClockwise=function(){if(this.viewerManager!=null){this.viewerManager.rotatePagesCounterClockwise()}};g.prototype.invertColors=function(i){if(this.viewerManager!=null){this.viewerManager.invertColors(i)}};g.prototype.gotoPage=function(i){if(this.viewerManager!=null){this.viewerManager.gotoPage(i)}};g.prototype.save=function(){if(this.viewerManager!=null){return this.viewerManager.save()}};g.prototype.submitForm=function(m,l,k,i,j){if(l===void 0){l=e.SubmitMethod.POST}if(k===void 0){k=false}if(i===void 0){i=null}if(j===void 0){j=true}if(this.formsModule!=null){return this.formsModule.submitForm(m,l,i,j,k)}};g.prototype.resetForm=function(i,j){if(i===void 0){i=null}if(j===void 0){j=true}if(this.formsModule!=null){return this.formsModule.resetFields(i,j)}};g.prototype.findNext=function(j,i){if(i===void 0){i=null}if(this.searchModule!=null){return this.searchModule.findNext(j,i)}};g.prototype.findPrevious=function(j,i){if(i===void 0){i=null}if(this.searchModule!=null){return this.searchModule.findPrevious(j,i)}};g.prototype.findFirst=function(j,i){if(i===void 0){i=null}if(this.searchModule!=null){return this.searchModule.findFirst(j,i)}};g.prototype.findLast=function(j,i){if(i===void 0){i=null}if(this.searchModule!=null){return this.searchModule.findLast(j,i)}};g.prototype.showMenuItems=function(){$(this.toggleMenuBtn).addClass("toggled");var i=$(this.menuItems);if($(this.menuItems).css("display")==="none"){$(this.menuItems).css("display","inline-block");this.isOpenMenuItems=true}else{$(this.toggleMenuBtn).removeClass("toggled");$(this.menuItems).css("display","none");this.isOpenMenuItems=false}};g.prototype.applyToolbarControlWidth=function(){for(var j=0;j<this.toolbarControlList.length;j++){if(this.toolbarControlList[j]!=null){if(this.toolbarControlList[j].description=="pageindicator"){this.toolbarControlList[j].width=90}if(this.toolbarControlList[j].description=="predefinedzoom"){this.toolbarControlList[j].width=$(this.toolbarControlList[j].control).outerWidth(true)}else{this.toolbarControlList[j].width=$(this.toolbarControlList[j].control).outerWidth(true)}}}};g.prototype.reflowToolbar=function(){var q=false;var p=null;var s=null;while(!q){var o=this.calculateToolbarCurrentWidth();var k=$(this.toolbar).outerWidth(true);p=null;if(o>=k-1){var n=-1;for(var l=this.toolbarControlList.length-1;l>=0;l--){s=this.toolbarControlList[l];if(s!=null){if(s.actionType!=f.NOTMOVABLE){if(p!=null){if(s.visible){if(p.priority<s.priority){p=s;n=l}}}else{if(s.visible){p=s;n=l}}}}}if(n!=-1){var j=$(p.control).clone(true);var r=this.menuControlList.indexOf(null);var m=new c(j,p.priority,p.actionType,p.description);m.width=p.width;if(r==-1){this.menuControlList.push(m)}else{this.menuControlList[r]=m}$(p.control).hide();p.visible=false;this.toolbarControlList[n].visible=false;this.viewMenubarItems();this.viewToolbarControls()}else{q=true}}else{var n=-1;for(var l=this.menuControlList.length-1;l>=0;l--){s=this.menuControlList[l];if(s!=null){if(p!=null){if(p.priority>s.priority){p=s;n=l}}else{p=s;n=l}}}if(n!=-1&&Math.abs(o-k)>(p.width+1)){for(var l=0;l<this.toolbarControlList.length;l++){if(this.toolbarControlList[l].description==p.description){this.toolbarControlList[l].visible=true;$(this.toolbarControlList[l].control).show()}}$(p.control).hide();this.menuControlList[n]=null;this.viewToolbarControls();this.viewMenubarItems()}else{q=true}}}};g.prototype.viewMenubarItems=function(){$(this.menuItems).empty();this.menuControlList=this.cleanArray(this.menuControlList);var k=0;for(var j=0;j<this.menuControlList.length;j++){if(this.menuControlList[j]!=null){if(this.menuControlList[j].actionType==f.MOVABLE){var l=$(this.menuControlList[j].control).clone(true);$(this.menuItems).append(l);if(this.viewerManager.documentLoaded){$(l).removeAttr("disabled")}$(l).show();k+=1}}}if(k==0){$(this.toggleMenuBtn).hide()}else{$(this.toggleMenuBtn).show()}};g.prototype.cleanArray=function(k){for(var j=0;j<k.length;j++){if(k[j]==null){k.splice(j,1);j--}}return k};g.prototype.viewToolbarControls=function(){if(this.menuControlList.length==0){$(this.toggleMenuBtn).hide()}for(var j=0;j<this.toolbarControlList.length;j++){if(this.toolbarControlList[j]!=null){if(this.toolbarControlList[j].visible){if(this.viewerManager.documentLoaded){$(this.toolbarControlList[j].control).removeAttr("disabled")}$(this.toolbarControlList[j].control).show()}}}};g.prototype.calculateToolbarCurrentWidth=function(){var j=0;var l=5;for(var k=0;k<this.toolbarControlList.length;k++){if(this.toolbarControlList[k]!=null){if(this.toolbarControlList[k].visible){if(this.toolbarControlList[k].actionType==f.NOTMOVABLE){j+=$(this.toolbarControlList[k].control).outerWidth(true);l+=$(this.toolbarControlList[k].control).outerWidth(true)}else{if(this.toolbarControlList[k].description=="sepLine0"){j+=$(this.toolbarControlList[k].control).outerWidth(true);l+=$(this.toolbarControlList[k].control).outerWidth(true)}else{j+=this.toolbarControlList[k].width}}}}}j+=$(this.toggleplaceholder).outerWidth(true);l+=$(this.toggleplaceholder).outerWidth(true);$(this.viewer).css("min-width",l);$(this.viewer).find(".git-docviewer-container").css("min-width",l);return j};return g}(e.EventDispatcher));e.DocumentViewer=a})(gnostice||(gnostice={}));var gnostice;(function(b){var c=(function(){function e(){this.isInclude=true}return e}());b.RedactRegion=c;var d=(function(){function e(){this.redactedDOMRegion=new Array();this.redactedRegion=new Array()}return e}());b.RedactionPage=d;var a=(function(f){__extends(e,f);function e(k,h,i,g){var j=this;f.call(this);this.description="RedactModule";this.supportsRedactionLayer=false;this.redactionPage=new Array();this.onAfterDocumentLoad=function(o){var n=o.viewerManager;var l;for(var m=0;m<n.pluggableModules.length;m++){if(n.pluggableModules[m].description=="RedactModule"){l=n.pluggableModules[m];break}}if(l!=null){l.create(n)}};this.onDocumentInfoRetrived=function(m){var l=m.viewerManager;j.supportsRedactionLayer=false;if(m.mimeType==b.MimeTypes.PDF){j.supportsRedactionLayer=true}};this.onRotationChanged=function(o){var n=o.viewerManager;var l;for(var m=0;m<n.pluggableModules.length;m++){if(n.pluggableModules[m].description=="RedactModule"){l=n.pluggableModules[m];break}}if(l!=null){l.reDrawAllRedactionRegions(n)}};this.onZoomChanged=function(o){var n=o.viewerManager;var l;for(var m=0;m<n.pluggableModules.length;m++){if(n.pluggableModules[m].description=="RedactModule"){l=n.pluggableModules[m];break}}if(l!=null){l.reDrawAllRedactionRegions(n)}};this.onBeforeSave=function(m){if(!j.supportsRedactionLayer){return null}var l=j.convertDOMRegionToDocumentRegion(j.redactionPage,m);var n=j.convertRegionsInPoints(l);if(n!=null&&n.length>0){return{module:"redactRegions",value:n}}return null};this.onAfterSave=function(l,m){j.fixedRegions(l)};this.fColor=k;this.sColor=h;this.isFill=i;this.isStroke=g}e.prototype.initialize=function(k,l){f.prototype.initialize.call(this,k,l);var h;for(var j=0;j<k.pluggableModules.length;j++){if(k.pluggableModules[j].description=="RedactModule"){h=k.pluggableModules[j];break}}var g=new b.RegionAction();g.name="Redact Region";g.action=h.AddRedactRegionsOnPage;k.regionActionList.push(g)};e.prototype.reDrawAllRedactionRegions=function(k){if(!this.supportsRedactionLayer){return}for(var h=0;h<this.redactionPage.length;h++){for(var g=0;g<this.redactionPage[h].redactedDOMRegion.length;g++){this.drawRedactRegion(h,g,k)}}};e.prototype.drawRedactRegion=function(r,t,j){var o=this.redactionPage[r].redactedRegion[t];var q=this.redactionPage[r].redactedDOMRegion[t];if(o!=null){var l=j.pages[r+1].width;var g=j.pages[r+1].height;var u=o.x;var s=o.y;var v=o.width;var n=o.height;if(j.rotationAngle==90){var k=s;s=u;u=g-k-n;var p=v;v=n;n=p}if(j.rotationAngle==180){var m=s;s=g-s-n;u=l-u-v}if(j.rotationAngle==270){var m=u;u=s;s=l-m-v;var i=n;n=v;v=i}u=u*j.zoomfactor;s=s*j.zoomfactor;v=v*j.zoomfactor;n=n*j.zoomfactor;$(q).css({top:s+"px",left:u+"px",width:v+"px",height:n+"px",position:"absolute"})}};e.prototype.AddRedactRegionsOnPage=function(q,j){var z;for(var m=0;m<j.pluggableModules.length;m++){if(j.pluggableModules[m].description=="RedactModule"){z=j.pluggableModules[m];break}}if(z!=null){var g=$("#"+j.documentid+q.pagenumber);var o=document.createElement("div");var t=q.posX;var s=q.posY;var v=q.w;var n=q.h;var k=j.pages[q.pagenumber].height*j.zoomfactor;var u=j.pages[q.pagenumber].width*j.zoomfactor;$(o).css({"z-index":"5000","background-color":this.fColor,top:s+"px",left:t+"px",width:v+"px",height:n+"px",position:"absolute",border:"1px solid gray",cursor:"move"});$(o).on("mousedown",function(h){$(this).css({opacity:"0.8"});h.stopPropagation()});$(o).on("mouseup",function(h){$(this).css({opacity:"1"});h.stopPropagation()});var l=document.createElement("div");$(l).addClass("git-region-delete");$(l).css({"z-index":"3010",opacity:"0.5",position:"absolute",right:"1px",bottom:"1px",width:"25px",height:"25px",cursor:"pointer"});$(o).append(l);$(o).on("hover",function(){$(l).css({opacity:"0.8"});$(o).css({border:"1px dashed blue"})},function(){$(l).css({opacity:"0.5"});$(o).css({border:"1px solid "+this.sColor})});$(g).append(o);var p=z.redactionPage[q.pagenumber-1].redactedRegion.length;$(l).on("click",function(h){$(o).remove();z.redactionPage[q.pagenumber-1].redactedRegion[p]=null;z.redactionPage[q.pagenumber-1].redactedDOMRegion[p]=null});$(l).on("mousedown",function(h){h.stopPropagation()});$(l).on("mouseup",function(h){h.stopPropagation()});var r=new c();r.x=q.posX/j.zoomfactor;r.y=q.posY/j.zoomfactor;r.width=q.w/j.zoomfactor;r.height=q.h/j.zoomfactor;r.pagenumber=q.pagenumber;r.sColor=z.sColor;r.fColor=z.fColor;r.isFill=z.isFill;r.isStroke=z.isStroke;$(o).resizable({containment:g,stop:function(i,D){if(p!=-1){var y=D.position.left/j.zoomfactor;var C=D.position.top/j.zoomfactor;var E=$(this).height()/j.zoomfactor;var w=$(this).width()/j.zoomfactor;if(j.rotationAngle==90){var A=y;y=C;C=$(g).width()/j.zoomfactor-A-$(this).width()/j.zoomfactor;var x=E;E=w;w=E}if(j.rotationAngle==180){var B=y;y=$(g).width()/j.zoomfactor-y-$(this).width()/j.zoomfactor;C=$(g).height()/j.zoomfactor-C-$(this).height()/j.zoomfactor}if(j.rotationAngle==270){var h=C;C=y;y=$(g).height()/j.zoomfactor-h-$(this).height()/j.zoomfactor;var x=E;E=w;w=E}z.redactionPage[q.pagenumber-1].redactedRegion[p].x=y;z.redactionPage[q.pagenumber-1].redactedRegion[p].y=C;z.redactionPage[q.pagenumber-1].redactedRegion[p].width=w;z.redactionPage[q.pagenumber-1].redactedRegion[p].height=E}}});$(o).draggable({containment:g,start:function(h,i){},drag:function(h,i){},stop:function(w,x){if(p!=-1){var A=x.position.left/j.zoomfactor;var y=x.position.top/j.zoomfactor;if(j.rotationAngle==90){var B=A;A=y;y=$(g).width()/j.zoomfactor-B-$(this).width()/j.zoomfactor}if(j.rotationAngle==180){var i=A;A=$(g).width()/j.zoomfactor-A-$(this).width()/j.zoomfactor;y=$(g).height()/j.zoomfactor-y-$(this).height()/j.zoomfactor}if(j.rotationAngle==270){var h=y;y=A;A=$(g).height()/j.zoomfactor-h-$(this).height()/j.zoomfactor}z.redactionPage[q.pagenumber-1].redactedRegion[p].x=A;z.redactionPage[q.pagenumber-1].redactedRegion[p].y=y;z.redactionPage[q.pagenumber-1].redactedRegion[p].width=$(this).width()/j.zoomfactor;z.redactionPage[q.pagenumber-1].redactedRegion[p].height=$(this).height()/j.zoomfactor}}});r=z.convertRotationToZeroAngle(r,j);z.redactionPage[q.pagenumber-1].redactedRegion.push(r);z.redactionPage[q.pagenumber-1].redactedDOMRegion.push(o);q.clearSelection()}};e.prototype.convertRotationToZeroAngle=function(o,j){var k=o.x;var r=o.y;var s=o.width;var p=o.height;var m=j.pages[o.pagenumber].width;var g=j.pages[o.pagenumber].height;if(j.rotationAngle==90){var l=k;k=r;r=g-l-s;var q=s;s=p;p=q}if(j.rotationAngle==180){var n=r;r=g-r-p;k=m-k-s}if(j.rotationAngle==270){var l=r;r=k;k=m-l-p;var i=p;p=s;s=i}o.x=k;o.y=r;o.width=s;o.height=p;return o};e.prototype.convertRegionsInPoints=function(h){var k=new Array();for(var g=0;g<h.length;g++){var j=new c();j.x=h[g].x==0?0:h[g].x*72/96;j.y=h[g].x==0?0:h[g].y*72/96;j.width=h[g].width==0?0:h[g].width*72/96;j.height=h[g].height==0?0:h[g].height*72/96;j.pagenumber=h[g].pagenumber;j.sColor=h[g].sColor;j.fColor=h[g].fColor;j.isFill=h[g].isFill;j.isStroke=h[g].isStroke;k.push(j)}return k};e.prototype.convertDOMRegionToDocumentRegion=function(g,l){var m=new Array();for(var k=0;k<g.length;k++){for(var h=0;h<g[k].redactedRegion.length;h++){if(g[k].redactedRegion[h]!=null){if(g[k].redactedRegion[h].isInclude){var n=new c();n.x=g[k].redactedRegion[h].x;n.y=g[k].redactedRegion[h].y;n.width=g[k].redactedRegion[h].width;n.height=g[k].redactedRegion[h].height;n.pagenumber=k+1;n.fColor=g[k].redactedRegion[h].fColor;n.sColor=g[k].redactedRegion[h].sColor;n.isFill=g[k].redactedRegion[h].isFill;n.isStroke=g[k].redactedRegion[h].isStroke;m.push(n)}}}}return m};e.prototype.getCurrentPageRegions=function(h,g,i){};e.prototype.create=function(h){this.redactionPage=new Array();for(var g=1;g<=h.pageCount;g++){var j=new d();this.redactionPage.push(j)}};e.prototype.reset=function(k){for(var h=0;h<this.redactionPage.length;h++){for(var g=0;g<this.redactionPage[h].redactedDOMRegion.length;g++){this.removeRedactRegion(h,g,k)}}this.redactionPage=new Array()};e.prototype.removeRedactRegion=function(g,j,h){var i=this.redactionPage[g].redactedRegion[j];var k=this.redactionPage[g].redactedDOMRegion[j];if(k!=null){$(k).remove()}};e.prototype.fixedRegions=function(k){for(var h=0;h<this.redactionPage.length;h++){for(var g=0;g<this.redactionPage[h].redactedDOMRegion.length;g++){this.staticRedactRegion(h,g,k)}}};e.prototype.staticRedactRegion=function(g,j,h){var i=this.redactionPage[g].redactedRegion[j];var k=this.redactionPage[g].redactedDOMRegion[j];if(k!=null){$(k).resizable("destroy");$(k).off("mousedown",null);$(k).off("mouseup",null);$(k).off("mousemove",null);$(k).off("hover",null,null);$(k).css({cursor:"","z-index":"200"});$(k).find(".git-region-delete").remove();$(k).css("border","0px solid white");i.isInclude=false}};return e}(b.PluggableModule));b.redactModule=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(f,e,d){this.vm=e;this.isMoving=false;this.selected=null;this.x_pos=0;this.y_pos=0;this.x_elem=0;this.y_elem=0;var g=this;g.afterMoveEvent=d;$(f).on("mousemove",g,this._move_elem);$(f).on("mouseup",g,this._destroy);$(f).on("mousedown",function(){g._drag_init(f,g);return false})}c.prototype._drag_init=function(d,e){e.isMoving=true;e.selected=d;e.x_elem=e.x_pos-e.selected.offsetLeft;e.y_elem=e.y_pos-e.selected.offsetTop};c.prototype._move_elem=function(g){g.data.x_pos=g.pageX;g.data.y_pos=g.pageY;if(g.data.selected!==null){if(g.data.isMoving){var f=g.data.x_pos-g.data.x_elem;var d=g.data.y_pos-g.data.y_elem;if(Math.min(f,d)>=0){g.data.selected.style.left=f+"px";g.data.selected.style.top=d+"px"}else{if((f<=0)&&(d<=0)){g.data.selected.style.left="0px";g.data.selected.style.top="0px"}else{if(d<=0){g.data.selected.style.left=f+"px";g.data.selected.style.top="0px"}else{if(f<=0){g.data.selected.style.left="0px";g.data.selected.style.top=d+"px"}}}}}}};c.prototype._destroy=function(f){f.data.isMoving=false;var d={vm:f.data.vm,left:$(f.data.selected).position().left,top:$(f.data.selected).position().top,width:$(f.data.selected).height(),height:$(f.data.selected).width(),element:$(f.data.selected)};f.data.afterMoveEvent(d);f.data.selected=null};return c}());a.ReSizableRegion=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(f){var e=this;d.call(this);this.description="SelectionModule";this.supportsSelectionLayer=false;this.selectablePages=new Array();this.onAfterDocumentLoad=function(k){var j=k.viewerManager;var g;for(var h=0;h<j.pluggableModules.length;h++){if(j.pluggableModules[h].description=="SelectionModule"){g=j.pluggableModules[h];break}}if(g!=null){g.create(j)}};this.onDocumentInfoRetrived=function(h){var g=h.viewerManager;e.supportsSelectionLayer=false;if(h.mimeType==b.MimeTypes.PDF){e.supportsSelectionLayer=true}};this.onBindRedactEvents=function(h){var g=h.viewerManager;e.bindEvents()};this.onUnBindRedactEvents=function(h){var g=h.viewerManager;e.unbindEvents()};this.onZoomChanged=function(j){var h=j.viewerManager;if(!e.supportsSelectionLayer){return}if(e!=null){for(var g=0;g<e.selectablePages.length;g++){if(e.selectablePages[g].active){e.activeRegion=e.selectablePages[g];if(e.activeRegion!=null){e.activeRegion.drawRegion(e.activeRegion);e.activeRegion.showButton(e.activeRegion,true);e.activeRegion.applyAngle(e.activeRegion)}}}}};this.onRotationChanged=function(j){var h=j.viewerManager;if(!e.supportsSelectionLayer){return}if(e!=null){for(var g=0;g<e.selectablePages.length;g++){if(e.selectablePages[g].active){e.activeRegion=e.selectablePages[g];if(e.activeRegion!=null){e.activeRegion.drawRegion(e.activeRegion);e.activeRegion.showButton(e.activeRegion,true);e.activeRegion.applyAngle(e.activeRegion)}}}}};this.onPageReRendered=function(j){var h=j.viewerManager;if(!e.supportsSelectionLayer){return}if(e!=null){for(var g=0;g<e.selectablePages.length;g++){if(e.selectablePages[g].active){e.activeRegion=e.selectablePages[g];break}}if(e.activeRegion!=null){e.activeRegion.drawRegion(e.activeRegion);e.activeRegion.showButton(e.activeRegion,true)}}}}c.prototype.initialize=function(e,f){d.prototype.initialize.call(this,e,f);this.viewerManager.events.addEventListener(b.EventNames.bindSelectableRegionEvent,this.onBindRedactEvents);this.viewerManager.events.addEventListener(b.EventNames.unSelectableRegionEvent,this.onUnBindRedactEvents)};c.prototype.create=function(g){this.selectablePages=new Array();for(var f=1;f<=g.pageCount;f++){var e=$("#"+g.documentid+f);var h=new b.SelectRectangle(f,e,g);this.selectablePages.push(h)}};c.prototype.bindEvents=function(){for(var e=0;e<this.viewerManager.pageCount;e++){this.selectablePages[e].selectable()}};c.prototype.unbindEvents=function(){for(var e=0;e<this.viewerManager.pageCount;e++){this.selectablePages[e].removeSelection()}};return c}(b.PluggableModule));b.selectRectModule=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(d,e,f){this.pagenumber=d;this.drawingElement=e;this.vm=f;this.enableMove=false;this.active=false;this.redactionBtn=null;this.x1=0;this.x2=0;this.y1=0;this.y2=0;this.regionElement=document.createElement("div");$(this.regionElement).css({border:"1px dotted #000",position:"absolute","z-index":"3000","background-color":"#ADD8E6",opacity:"0.5",cursor:"default"});$(this.drawingElement).append(this.regionElement);var g=document.createElement("div");$(g).css({width:"100%",height:"100%",position:"relative"});this.redactionBtn=document.createElement("div");$(this.redactionBtn).css({position:"absolute","z-index":"3000",width:"32px",height:"32px",display:"none",cursor:"pointer"});this.appendDropDown(this.redactionBtn,f);$(this.redactionBtn).on("mouseup",function(h){h.stopPropagation()});$(this.redactionBtn).on("mousedown",function(h){h.stopPropagation()});$(this.redactionBtn).on("mousemove",function(h){h.stopPropagation()});$(e).append(this.redactionBtn);$(this.regionElement).append(g)}c.prototype.appendDropDown=function(d,e){var k=this;var l=document.createElement("ul");$(l).addClass("git-redact-list-ul");var m=document.createElement("li");$(m).css({"float":"left"});$(m).addClass("git-action-dropdown");var j=document.createElement("a");$(j).addClass("git-action-dropbtn");$(j).attr({"class":"git-actionlist"});var g=document.createElement("div");$(g).addClass("git-dropdown-content");var n;for(var h=0;h<e.regionActionList.length;h++){n=document.createElement("a");$(n).addClass("git-action-anchor");$(n).append("Redact");var f=h;$(n).on("click",function(){e.regionActionList[f].action.call(null,k,e);return false});$(g).append(n)}$(m).append(j);$(m).append(g);$(l).append(m);$(d).append(l)};c.prototype.removeSelection=function(){var d=this;$(d.drawingElement).off("mouseup",null);$(d.drawingElement).off("mousedown",null);$(d.drawingElement).off("mousemove",null);$(d.drawingElement).removeClass("git-draw-cursor");d.InitiallizeRegion()};c.prototype.InitiallizeRegion=function(){var d=this;d.x1=0;d.x2=0;d.y1=0;d.y2=0;d.mouseX1=0;d.mouseX2=0;d.mouseY1=0;d.mouseY2=0;d.drawRegion(d);d.showButton(d,false);d.active=false};c.prototype.selectable=function(){var d=this;$(d.drawingElement).addClass("git-draw-cursor");$(d.drawingElement).on("mouseup",function(f){d.enableMove=false;d.showButton(d,true)});$(d.drawingElement).on("mousedown",function(f){d.showButton(d,false);d.enableMove=true;d.mouseX1=f.pageX-$(d.drawingElement).offset().left;d.mouseY1=f.pageY-$(d.drawingElement).offset().top;d.mouseX1=d.mouseX1/d.vm.zoomfactor;d.mouseY1=d.mouseY1/d.vm.zoomfactor;d.x1=d.mouseX1;d.y1=d.mouseY1});$(d.drawingElement).on("mousemove",function(f){if(d.enableMove){d.mouseX2=f.pageX-$(d.drawingElement).offset().left;d.mouseY2=f.pageY-$(d.drawingElement).offset().top;d.mouseX2=d.mouseX2/d.vm.zoomfactor;d.mouseY2=d.mouseY2/d.vm.zoomfactor;d.x2=d.mouseX2;d.y2=d.mouseY2;d.drawRegion(d)}})};c.prototype.drawRegion=function(j){var f=Math.min(j.x1,j.x2)*j.vm.zoomfactor;var e=Math.max(j.x1,j.x2)*j.vm.zoomfactor;var h=Math.min(j.y1,j.y2)*j.vm.zoomfactor;var g=Math.max(j.y1,j.y2)*j.vm.zoomfactor;var i=e-f;var d=g-h;j.w=i;j.h=d;j.posX=f;j.posY=h;$(j.regionElement).css({left:f+"px",top:h+"px",width:i+"px",height:d+"px"});j.active=true};c.prototype.showButton=function(g,d){if(d){if((g.w!=0)&&(g.h!=0)){$(g.redactionBtn).show();var f=g.posX+g.w+4;var e=g.posY+g.h-$(g.redactionBtn).outerHeight()+6;$(g.redactionBtn).css({left:f+"px",top:e+"px"})}}else{$(g.redactionBtn).hide()}};c.prototype.applyAngle=function(p){var f=p.w;var r=p.h;var d=p.posX;var q=p.posY;var j=p.vm.pages[p.pagenumber].width*p.vm.zoomfactor;var e=p.vm.pages[p.pagenumber].height*p.vm.zoomfactor;if(p.vm.rotationAngle==90){var k=q;q=d;d=e-k-r;var o=f;f=r;r=o}if(p.vm.rotationAngle==180){var n=q;q=e-q-r;d=j-d-f}if(p.vm.rotationAngle==270){var n=d;d=q;q=j-n-f;var g=r;r=f;f=g}$(p.regionElement).css({left:d+"px",top:q+"px",width:f+"px",height:r+"px"});var m=$(p.redactionBtn).outerHeight();var i,s;i=d+f+4;s=q+r-m+6;$(p.redactionBtn).css({left:i+"px",top:s+"px"});p.w=f;p.h=r;p.posX=d;p.posY=q};c.prototype.clearSelection=function(){this.x1=0;this.x2=0;this.y1=0;this.y2=0;this.drawRegion(this);this.active=false;this.showButton(this,false)};c.prototype.getSelectedRegion=function(){};return c}());b.SelectRectangle=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(d,e,g,f){this.parentPanel=d;this.isCollapsed=e;this.splitter=g;this.parent=f;this.rightPaneStoredWidth=261;this.resizerPaneWidth=13;this.isCollapsedState=false;this.constructView();this.addEventHanldersToView()}c.prototype.toggle=function(){if(this.splitter.rightPanelWidth>this.resizerPaneWidth){this.collapse()}else{this.expand()}};c.prototype.expand=function(d){if(d===void 0){d=-1}if(this.parent.collapsing){return}try{if(d!=-1){this.rightPaneStoredWidth=d}if(this.splitter.rightPanelWidth<=this.resizerPaneWidth||(this.rightPaneStoredWidth>this.resizerPaneWidth)){this.parent.expanding=true;$(this.resizerIcon).addClass("git-right-pane-icon-minimize");$(this.resizerIcon).removeClass("git-right-pane-icon-maximize");this.splitter.setPosition(this.splitter.leftPanelWidth,Math.max(this.rightPaneStoredWidth,this.resizerPaneWidth));this.isCollapsedState=false}else{if(d!=-1){this.splitter.setPosition(this.splitter.leftPanelWidth,Math.max(this.rightPaneStoredWidth,this.resizerPaneWidth));this.isCollapsedState=false}}}catch(f){}finally{this.parent.expanding=false}};c.prototype.collapse=function(){if(this.parent.expanding){return}if((this.splitter.rightPanelWidth>=this.resizerPaneWidth)||(this.splitter.rightPanelWidth==0)){this.parent.collapsing=true;try{$(this.resizerIcon).addClass("git-right-pane-icon-maximize");$(this.resizerIcon).removeClass("git-right-pane-icon-minimize");if(this.splitter.rightPanelWidth!=0){this.rightPaneStoredWidth=this.splitter.rightPanelWidth}this.splitter.setPosition(this.splitter.leftPanelWidth,this.resizerPaneWidth);this.isCollapsedState=true}catch(d){}finally{this.parent.collapsing=false}}};c.prototype.constructView=function(){this.rightPaneResizer=document.createElement("div");$(this.rightPaneResizer).addClass("git-right-pane-resizer");$(this.rightPaneResizer).css({width:"13px",bottom:"0",top:"2px",position:"absolute",left:"0px",overflow:"hidden",display:"block"});$(this.parentPanel).append(this.rightPaneResizer);this.resizerIcon=document.createElement("div");$(this.resizerIcon).addClass("git-right-pane-resizer-icon");$(this.resizerIcon).css({position:"relative","text-align":"middle",top:"50%"});$(this.rightPaneResizer).append(this.resizerIcon);if(this.isCollapsed){this.collapse()}};c.prototype.addEventHanldersToView=function(){var d=this;$(this.rightPaneResizer).click(function(){d.toggle();d.parent.dispatchAll("PaneToggle",{isCollapsed:d.isCollapsedState})})};return c}());a.RightCollapsablePane=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(g,e,f){d.call(this);this.splitter=g;this.parentPanel=e;this.isMinimize=f;this.children=new Array();this.collapsing=false;this.expanding=false;this.constructView();this.addEventHanldersToView()}c.prototype.expand=function(){this.expanding=true;try{this.rightCollapsablePane.expand()}catch(f){}finally{this.expanding=false}};c.prototype.setExpandableWidth=function(f){this.expanding=true;try{this.rightCollapsablePane.expand(f)}catch(g){}finally{this.expanding=false}};c.prototype.setWidth=function(e){this.splitter.setPosition(this.splitter.leftPanelWidth,e)};c.prototype.collapse=function(){this.collapsing=true;try{this.rightCollapsablePane.collapse()}catch(f){}finally{this.collapsing=false}};c.prototype.toggle=function(){this.rightCollapsablePane.toggle()};c.prototype.add=function(e){this.children.push(e);$(this.rightToolbarContent).append(e)};c.prototype.remove=function(e){};c.prototype.clearAllChildren=function(){$(this.rightToolbarContent).find(".git_side_pane_element").remove();this.children.length=0};c.prototype.get=function(e){if(e<this.children.length){return this.children[e]}return null};c.prototype.destroy=function(){$("div.git-viewer-rightpane").remove();this.splitter.rightPanelWidth=0};c.prototype.constructView=function(){this.destroy();this.rightViewerPane=document.createElement("div");$(this.rightViewerPane).css({"z-index":"50",width:"0px",top:"0",bottom:"0",position:"absolute","float":"right"});$(this.rightViewerPane).attr({id:"rightPane","class":"git-viewer-rightpane"});var e=document.createElement("div");$(e).css({width:"100%",height:"36px","z-index":"5",overflow:"hidden","vertical-align":"central","text-align":"center"});$(e).addClass("git-viewer-rightpane-header");this.rightToolbarContent=document.createElement("div");$(this.rightToolbarContent).css({width:"100%",position:"absolute",top:"36px",bottom:"0",overflow:"hidden"});$(this.rightToolbarContent).addClass("git-viewer-comment-toolbarContent");$(this.rightToolbarContent).css({"overflow-x":"hidden"});$(this.rightViewerPane).append(e);$(this.rightViewerPane).append(this.rightToolbarContent);$(this.parentPanel).append(this.rightViewerPane);this.rightCollapsablePane=new b.RightCollapsablePane(this.rightToolbarContent,this.isMinimize,this.splitter,this)};c.prototype.addEventHanldersToView=function(){};return c}(b.EventDispatcher));b.RightPane=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(){}c.tooltip_open_doc="Open document";c.tooltip_print_doc="Print document";c.tooltip_save_doc="Save document changes";c.tooltip_download_doc="Download document";c.tooltip_download_as_doc="Download as document";c.tooltip_download_pdf="Download as PDF";c.tooltip_download_docx="Download as DOCX";c.tooltip_download_tiff="Download as TIFF";c.tooltip_download_html="Download as HTML";c.tooltip_show_first_page="Show first page";c.tooltip_show_previous_page="Show previous page";c.go_to_page="Goto Page";c.tooltip_show_next_page="Show next page";c.tooltip_show_last_page="Show last page";c.tooltip_rotate_anti_clockwise="Rotate current view counterclockwise; change is not saved";c.tooltip_rotate_clockwise="Rotate current view clockwise; change is not saved";c.tooltip_zoomout="Zoom out";c.tooltip_zoomin="Zoom in";c.custom_zoom="Custom";c.page_fit_actual_size="Actual Size";c.page_fit_height="Fit Height";c.page_fit_width="Fit Width";c.fit_page="Fit Page";c.tooltip_full_screen="View file in full screen window";c.tooltip_thumbnails="Thumbnails";c.tooltip_bookmarks="Bookmarks";c.tooltip_quick_find="Quick find";c.tooltip_find_prev="Find previous";c.tooltip_find_next="Find next";c.close="Close";c.tooltip_invert_color="Invert color; change is not saved";c.msgdlg_alert_formFieldsRequired="At least one required field was empty.Please fill in the required fields before continuing.";c.msgdlg_btnCaption_OK="OK";c.msgdlg_btnCaption_Cancel="Cancel";c.msgdlg_btnCaption_Allow="Allow";c.msgdlg_btnCaption_Yes="Yes";c.msgdlg_btnCaption_No="No";c.msgdlg_warning_jsAction="Application can not perform PDF Javascript actions.";c.msgdlg_warning_jsActionGOTO="Application can not perform remote goto action.";c.msgdlg_warning_jsLaunchApp="Application can not launch Application or FilePath.";c.msgdlg_warning_linkAction="The document is trying to connect to:";c.nav_pane_comments="Comments";c.nav_pane_no_comments="No Comment";c.annot_add_new="Add Sticky Note";c.annot_state_accepted="Accepted";c.annot_state_rejected="Rejected";c.annot_state_completed="Completed";c.annot_state_cancelled="Cancelled";c.annot_enter_reply="Enter a reply";c.annot_reply="Reply";c.nav_pane="Navigation Pane";c.annot_by="by:";c.form_validation_error_date="Invalid date. Please ensure that the value entered matches the format";c.form_validation_error_time="Invalid time. Please ensure that the value entered matches the format";c.form_validation_error_datetime="Invalid date or time. Please ensure that the value entered matches the format";c.form_validation_error_input="Invalid input. Please ensure that the value entered matches the format";return c}());a.LocalizedStrings=b})(gnostice||(gnostice={}));